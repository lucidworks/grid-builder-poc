{"version":3,"file":"layer-panel-item.entry.esm.js","sources":["src/demo/components/layer-panel-item/layer-panel-item.scss?tag=layer-panel-item","src/demo/components/layer-panel-item/layer-panel-item.tsx"],"sourcesContent":["/**\n * Layer Panel Item Styles\n * =======================\n *\n * Styling for individual layer panel items with drag-to-reorder functionality.\n */\n\n.layer-item {\n  position: relative; // For ::before and ::after drop indicators\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px;\n  border-radius: 4px;\n  cursor: pointer;\n  transition:\n    background 180ms cubic-bezier(0.4, 0, 0.2, 1),\n    border-color 180ms cubic-bezier(0.4, 0, 0.2, 1),\n    box-shadow 180ms cubic-bezier(0.4, 0, 0.2, 1),\n    transform 120ms cubic-bezier(0.4, 0, 0.2, 1),\n    opacity 120ms cubic-bezier(0.4, 0, 0.2, 1);\n  background: #ffffff;\n  border: 1px solid #e0e0e0;\n  margin-bottom: 4px;\n  user-select: none;\n\n  &:hover {\n    background: #f5f5f5;\n    border-color: #4a90e2;\n  }\n\n  &--active {\n    background: #e3f2fd;\n    border-color: #4a90e2;\n    box-shadow: 0 2px 4px rgba(74, 144, 226, 0.2);\n\n    &:hover {\n      background: #d1e7f7;\n    }\n  }\n\n  &.dragging {\n    opacity: 0.5;\n    cursor: grabbing;\n  }\n\n  // Drop target states\n  &.drop-target {\n    background: #f0f8ff;\n    border-color: #4a90e2;\n  }\n\n  &.drop-above::before {\n    content: '';\n    position: absolute;\n    top: -2px;\n    left: 0;\n    right: 0;\n    height: 3px;\n    background: #4a90e2;\n    border-radius: 2px;\n    z-index: 10;\n    animation: dropIndicatorFadeIn 200ms cubic-bezier(0.4, 0, 0.2, 1);\n  }\n\n  &.drop-below::after {\n    content: '';\n    position: absolute;\n    bottom: -2px;\n    left: 0;\n    right: 0;\n    height: 3px;\n    background: #4a90e2;\n    border-radius: 2px;\n    z-index: 10;\n    animation: dropIndicatorFadeIn 200ms cubic-bezier(0.4, 0, 0.2, 1);\n  }\n\n  &__drag-handle {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 20px;\n    height: 20px;\n    cursor: grab;\n    color: #9e9e9e;\n    font-size: 12px;\n    line-height: 1;\n    flex-shrink: 0;\n\n    &:hover {\n      color: #4a90e2;\n    }\n\n    &:active {\n      cursor: grabbing;\n    }\n  }\n\n  &__icon {\n    font-size: 20px;\n    width: 24px;\n    height: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-shrink: 0;\n  }\n\n  &__info {\n    flex: 1;\n    min-width: 0;\n    display: flex;\n    flex-direction: column;\n    gap: 2px;\n  }\n\n  &__name {\n    font-size: 14px;\n    font-weight: 500;\n    color: #333;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n\n  &__meta {\n    font-size: 11px;\n    color: #757575;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n}\n\n/**\n * Drop indicator fade-in animation\n * Smooth appearance when dragging over target\n */\n@keyframes dropIndicatorFadeIn {\n  from {\n    opacity: 0;\n    transform: scaleX(0.8);\n  }\n  to {\n    opacity: 1;\n    transform: scaleX(1);\n  }\n}\n","/**\n * Layer Panel Item Component\n * ==========================\n *\n * Individual item in the layer panel representing a grid item.\n * Displays item name, type icon, and provides drag handle for reordering.\n *\n * ## Features\n *\n * - **Visual feedback**: Shows active/selected state\n * - **Drag handle**: Reorder items by z-index\n * - **Click to select**: Activates item in builder\n * - **Type icon**: Visual identifier for component type\n *\n * ## Usage\n *\n * ```typescript\n * <layer-panel-item\n * itemId=\"item-123\"\n * canvasId=\"canvas1\"\n * name=\"Header Component\"\n * type=\"header\"\n * zIndex={5}\n * isActive={false}\n * />\n * ```\n * @module layer-panel-item\n */\n\nimport {\n  Component,\n  h,\n  Prop,\n  Event,\n  EventEmitter,\n  Element,\n} from \"@stencil/core\";\n\n@Component({\n  tag: \"layer-panel-item\",\n  styleUrl: \"layer-panel-item.scss\",\n  shadow: false,\n})\nexport class LayerPanelItem {\n  @Element() hostElement: HTMLElement;\n\n  /**\n   * Unique ID of the grid item this represents\n   */\n  @Prop() itemId!: string;\n\n  /**\n   * Canvas ID containing this item\n   */\n  @Prop() canvasId!: string;\n\n  /**\n   * Display name of the item\n   */\n  @Prop() name!: string;\n\n  /**\n   * Component type (for icon display)\n   */\n  @Prop() type!: string;\n\n  /**\n   * Current z-index value\n   */\n  @Prop() zIndex!: number;\n\n  /**\n   * Whether this item is currently active/selected\n   */\n  @Prop() isActive?: boolean = false;\n\n  /**\n   * Emitted when user clicks on this item\n   */\n  @Event() layerItemSelect: EventEmitter<{ itemId: string; canvasId: string }>;\n\n  /**\n   * Emitted when user starts dragging this item for reordering\n   */\n  @Event() layerItemDragStart: EventEmitter<{\n    itemId: string;\n    canvasId: string;\n    zIndex: number;\n  }>;\n\n  /**\n   * Emitted when user drops this item at a new position\n   */\n  @Event() layerItemDrop: EventEmitter<{\n    itemId: string;\n    canvasId: string;\n    oldZIndex: number;\n    newZIndex: number;\n  }>;\n\n  /**\n   * Component did load - initialize drag functionality\n   */\n  componentDidLoad() {\n    this.initializeDrag();\n  }\n\n  /**\n   * Initialize drag-to-reorder functionality\n   *\n   * Uses HTML5 drag and drop for list reordering.\n   * Emits events for parent layer-panel to handle z-index updates.\n   */\n  private initializeDrag = () => {\n    // Make the entire item draggable\n    this.hostElement.setAttribute(\"draggable\", \"true\");\n\n    // Drag start: store data and add visual feedback\n    this.hostElement.addEventListener(\"dragstart\", (e: DragEvent) => {\n      if (e.dataTransfer) {\n        e.dataTransfer.effectAllowed = \"move\";\n        e.dataTransfer.setData(\n          \"text/plain\",\n          JSON.stringify({\n            itemId: this.itemId,\n            canvasId: this.canvasId,\n            zIndex: this.zIndex,\n          }),\n        );\n      }\n\n      // Add visual feedback\n      this.hostElement.classList.add(\"dragging\");\n\n      // Emit drag start event\n      this.layerItemDragStart.emit({\n        itemId: this.itemId,\n        canvasId: this.canvasId,\n        zIndex: this.zIndex,\n      });\n    });\n\n    // Drag end: clean up\n    this.hostElement.addEventListener(\"dragend\", () => {\n      this.hostElement.classList.remove(\n        \"dragging\",\n        \"drop-above\",\n        \"drop-below\",\n        \"drop-target\",\n      );\n    });\n\n    // Drag over: show drop indicator\n    this.hostElement.addEventListener(\"dragover\", (e: DragEvent) => {\n      e.preventDefault(); // Allow drop\n      if (e.dataTransfer) {\n        e.dataTransfer.dropEffect = \"move\";\n      }\n\n      // Show drop indicator based on cursor position\n      const rect = this.hostElement.getBoundingClientRect();\n      const midpoint = rect.top + rect.height / 2;\n      const dropAbove = e.clientY < midpoint;\n\n      this.hostElement.classList.remove(\"drop-above\", \"drop-below\");\n      this.hostElement.classList.add(\n        \"drop-target\",\n        dropAbove ? \"drop-above\" : \"drop-below\",\n      );\n    });\n\n    // Drag leave: remove drop indicator\n    this.hostElement.addEventListener(\"dragleave\", () => {\n      this.hostElement.classList.remove(\n        \"drop-target\",\n        \"drop-above\",\n        \"drop-below\",\n      );\n    });\n\n    // Drop: handle the drop\n    this.hostElement.addEventListener(\"drop\", (e: DragEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      // Calculate drop position (above or below this item)\n      const rect = this.hostElement.getBoundingClientRect();\n      const midpoint = rect.top + rect.height / 2;\n      const dropAbove = e.clientY < midpoint;\n\n      // Emit drop event with target information\n      // The parent layer-panel will handle the actual state update\n      const dropEvent = new CustomEvent(\"layer-item-dropped\", {\n        detail: {\n          targetItemId: this.itemId,\n          targetCanvasId: this.canvasId,\n          targetZIndex: this.zIndex,\n          dropAbove,\n        },\n        bubbles: true,\n        composed: true,\n      });\n      this.hostElement.dispatchEvent(dropEvent);\n\n      // Clean up visual feedback\n      this.hostElement.classList.remove(\n        \"drop-above\",\n        \"drop-below\",\n        \"drop-target\",\n      );\n    });\n  };\n\n  /**\n   * Handle click to select this item\n   */\n  private handleClick = () => {\n    if (!this.isActive) {\n      this.layerItemSelect.emit({\n        itemId: this.itemId,\n        canvasId: this.canvasId,\n      });\n    }\n  };\n\n  /**\n   * Cleanup on unmount\n   * Note: HTML5 drag and drop event listeners are automatically cleaned up\n   */\n  disconnectedCallback() {\n    // No manual cleanup needed for HTML5 drag and drop\n  }\n\n  /**\n   * Get icon for component type\n   *\n   * Maps component types to emoji icons for visual identification.\n   * Fallback to generic icon for unknown types.\n   */\n  private getTypeIcon(): string {\n    const iconMap: { [key: string]: string } = {\n      header: \"üìÑ\",\n      text: \"üìù\",\n      image: \"üñºÔ∏è\",\n      button: \"üîò\",\n      gallery: \"üñºÔ∏è\",\n      dashboard: \"üìä\",\n      livedata: \"üìà\",\n      card: \"üÉè\",\n      list: \"üìã\",\n    };\n\n    return iconMap[this.type] || \"üì¶\";\n  }\n\n  render() {\n    const itemClasses = {\n      \"layer-item\": true,\n      \"layer-item--active\": this.isActive,\n    };\n\n    return (\n      <div class={itemClasses} onClick={this.handleClick}>\n        <div class=\"layer-item__drag-handle\" title=\"Drag to reorder\">\n          ‚ãÆ‚ãÆ\n        </div>\n        <div class=\"layer-item__icon\">{this.getTypeIcon()}</div>\n        <div class=\"layer-item__info\">\n          <div class=\"layer-item__name\">{this.name}</div>\n          <div class=\"layer-item__meta\">\n            {this.type} ¬∑ z:{this.zIndex}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n"],"names":[],"mappings":"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"}