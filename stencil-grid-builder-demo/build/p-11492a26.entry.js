import{r as t,c as e,h as i,g as o,H as n}from"./p-4Z_c7dK2.js";import{i as s}from"./p-BKH_Whl_.js";import{b as a,g as r,D as c,c as l,p as d,f as h}from"./p-BpT5anos.js";import{b as p}from"./p-CrS_Nxz0.js";import{c as f,S as u,u as v,d as b,f as m,h as g,a as x,g as y,o as w,m as k,i as I}from"./p-Dn6kA53k.js";import{U as C,V as _,a as j,M as z,u as O,R as A,A as D,B as $,b as S,d as B,c as M,C as E}from"./p-DR52Wuc6.js";import{E as R,e as T}from"./p-CxIZTn1z.js";const F=".canvas-header{position:absolute;top:0;right:0;z-index:10;display:flex;align-items:center;justify-content:flex-end;padding:12px;margin:0;gap:8px}.canvas-wrapper:not(:first-child) .canvas-header{margin-top:-38px}.canvas-header .canvas-title{display:inline-flex;align-items:center;padding:6px 12px;border-radius:4px;margin:0;background:#4a90e2;box-shadow:0 1px 3px rgba(74, 144, 226, 0.2);color:white;cursor:pointer;font-size:13px;font-weight:500;text-transform:none;opacity:0.6;transition:all 0.15s}.canvas-header .canvas-title:hover{background:#357abd;box-shadow:0 2px 6px rgba(74, 144, 226, 0.3)}.canvas-header.is-active .canvas-title{opacity:1}.canvas-header .canvas-actions{display:flex;align-items:center;gap:6px}.canvas-header .canvas-actions .delete-canvas-btn{display:flex;width:28px;height:28px;align-items:center;justify-content:center;padding:0;border:1px solid #dee2e6;border-radius:4px;background:white;color:#dc3545;cursor:pointer;font-size:20px;font-weight:300;line-height:1;transition:all 0.15s}.canvas-header .canvas-actions .delete-canvas-btn:hover{border-color:#dc3545;background:rgba(220, 53, 69, 0.1);transform:scale(1.1)}.canvas-header .canvas-actions .delete-canvas-btn:active{transform:scale(1)}";const P=class{constructor(i){t(this,i);this.headerClick=e(this,"headerClick");this.deleteClick=e(this,"deleteClick");this.isDeletable=true;this.isActive=false;this.handleTitleClick=()=>{this.headerClick.emit({canvasId:this.canvasId})};this.handleDeleteClick=()=>{this.deleteClick.emit({canvasId:this.canvasId})}}render(){const t=`canvas-header ${this.isActive?"is-active":""}`;return i("div",{key:"3c17bc79777e2990d7fbf9a1dcd7c84754b93d1a",class:t,"data-canvas-id":this.canvasId},i("div",{key:"91ac9802271588d57f916e3e0afa9ac2cedace64",class:"canvas-actions"},i("span",{key:"fc82dd63892d193c3275d780039efbe00a990a3d",class:"canvas-title",onClick:this.handleTitleClick},this.sectionTitle),this.isDeletable&&i("button",{key:"665aa088f6c68bfe6423be1cd582e3a59fa80515",class:"delete-canvas-btn",title:"Delete this section",onClick:this.handleDeleteClick},"Ã—")))}};P.style=F;const L=".palette{width:250px;padding:20px;border-right:1px solid #ddd;background:white;overflow-y:auto}.palette h2{margin-bottom:20px;color:#333;font-size:18px}.palette-chromeless{padding-top:10px}.palette-empty{color:#999;font-size:13px;font-style:italic}.palette-item{margin-bottom:10px;cursor:move;user-select:none;touch-action:none;}.palette-item:not(:has(>div)){padding:15px;border-radius:4px;background:#4a90e2;color:white;font-weight:500;text-align:center;transition:transform 0.2s, box-shadow 0.2s}.palette-item:hover{box-shadow:0 4px 8px rgba(0, 0, 0, 0.1);transform:translateY(-2px)}.palette-item.dragging-from-palette{opacity:0.5}.dragging-clone{position:fixed;z-index:10000;pointer-events:none}";const G=class{constructor(e){t(this,e);this.showHeader=true;this.paletteLabel="Component palette";this.draggingItemType=null;this.paletteId=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`;this.initializePaletteItems=()=>{const t=this.hostElement.querySelectorAll(".palette-item");t.forEach((t=>{if(t._dragInitialized){return}s(t).draggable({inertia:false,autoScroll:false,listeners:{start:t=>{var e;const i=t.target.closest(".palette-item");if(!i){console.warn("Could not find .palette-item element");return}const o=i.getAttribute("data-component-type");this.draggingItemType=o;const n=i.getBoundingClientRect();i._originalPosition={left:n.left,top:n.top};i._dropWasValid=false;const s=this.components.find((t=>t.type===o));if(!s){console.warn(`Component definition not found for type: ${o}`);return}const c=s.defaultSize||{width:10,height:6};const l=this.targetGridBuilderId||"gridBuilderAPI";const d=window[l];const h=(e=d===null||d===void 0?void 0:d.getState)===null||e===void 0?void 0:e.call(d);const p=(h===null||h===void 0?void 0:h.canvases)?Object.keys(h.canvases):[];const f=p.length>0?p[0]:null;let u;let v;if(f){u=a(c.width,f,this.config);v=r(c.height,this.config)}else{const t=20;u=c.width*t;v=c.height*t}const b=u/2;const m=v/2;const g=document.createElement("div");g.className="dragging-clone";g.style.position="fixed";g.style.left=t.clientX-b+"px";g.style.top=t.clientY-m+"px";g.style.width=u+"px";g.style.height=v+"px";g.style.overflow="hidden";g.style.pointerEvents="none";g.style.zIndex="10000";g.style.border="2px solid rgba(74, 144, 226, 0.5)";g.style.borderRadius="4px";g.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.2)";g.style.cursor="grabbing";const x=s.renderDragClone();if(x instanceof HTMLElement){g.appendChild(x)}else{const t=x;const e=t.t;const i=document.createElement(e);if(t.i){Object.keys(t.i).forEach((e=>{i.setAttribute(e,t.i[e])}))}g.appendChild(i)}document.body.appendChild(g);i._dragClone=g;i._halfWidth=b;i._halfHeight=m;i._defaultWidth=c.width;i._defaultHeight=c.height},move:t=>{const e=t.target.closest(".palette-item");if(!e)return;const i=e._dragClone;const o=e._halfWidth;const n=e._halfHeight;if(i){i.style.left=t.clientX-o+"px";i.style.top=t.clientY-n+"px"}},end:t=>{this.draggingItemType=null;const e=t.target.closest(".palette-item");if(!e)return;const i=e._dragClone;const o=e._dropWasValid;const n=e._originalPosition;if(i){if(!o&&n){i.style.transition="all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)";i.style.left=n.left+"px";i.style.top=n.top+"px";i.style.opacity="0";setTimeout((()=>{i.remove()}),300)}else{i.remove()}delete e._dragClone;delete e._halfWidth;delete e._halfHeight;delete e._dropWasValid;delete e._originalPosition}}}});t._dragInitialized=true}))};this.handlePaletteItemClick=t=>{var e,i;const o=(i=(e=this.config)===null||e===void 0?void 0:e.enableClickToAdd)!==null&&i!==void 0?i:true;if(!o){return}if(this.draggingItemType){return}const n=t.target.closest(".palette-item");if(!n){return}const s=n.getAttribute("data-component-type");if(!s){console.warn("handlePaletteItemClick: Component type not found");return}const a=new CustomEvent("palette-item-click",{detail:{componentType:s,targetGridBuilderId:this.targetGridBuilderId},bubbles:true,composed:true});this.hostElement.dispatchEvent(a)};this.handlePaletteItemKeyDown=t=>{var e,i;const o=(i=(e=this.config)===null||e===void 0?void 0:e.enableClickToAdd)!==null&&i!==void 0?i:true;if(!o){return}if(t.key==="Enter"||t.key===" "){t.preventDefault();this.handlePaletteItemClick(t)}}}handleComponentsChange(t,e){if(t===e)return;if(!e)return;requestAnimationFrame((()=>{this.initializePaletteItems()}))}handleConfigChange(t,e){if(t===e)return}componentDidLoad(){this.initializePaletteItems()}componentDidUpdate(){this.initializePaletteItems()}render(){var t;const e={palette:true,"palette-chromeless":!this.showHeader};const o=`palette-help-${this.paletteId}`;if(!this.components||this.components.length===0){return i("div",{class:e},this.showHeader&&i("h2",null,"Components"),i("p",{class:"palette-empty",role:"status","aria-live":"polite"},"No components available"))}return i("div",{class:e,role:"toolbar","aria-label":this.paletteLabel,"aria-orientation":"vertical"},i("div",{id:o,class:"sr-only"},((t=this.config)===null||t===void 0?void 0:t.enableClickToAdd)!==false?"Click or press Enter/Space to add component to active canvas, or drag to position on any canvas":"Drag component to canvas to add"),this.showHeader&&i("h2",{id:"palette-heading"},"Components"),this.components.map((t=>{var e;const n={"palette-item":true,"palette-item-custom":!!t.renderPaletteItem,"dragging-from-palette":this.draggingItemType===t.type};const s=((e=this.config)===null||e===void 0?void 0:e.enableClickToAdd)!==false?`${t.name} component. Click to add to active canvas or drag to position`:`${t.name} component. Drag to canvas`;return i("div",{class:n,"data-component-type":t.type,key:t.type,role:"button",tabindex:0,"aria-label":s,"aria-describedby":o,"aria-pressed":this.draggingItemType===t.type?"true":"false",onClick:t=>this.handlePaletteItemClick(t),onKeyDown:t=>this.handlePaletteItemKeyDown(t)},t.renderPaletteItem?(()=>{const e=t.renderPaletteItem({componentType:t.type,name:t.name,icon:t.icon});if(e instanceof HTMLElement){return i("div",{ref:t=>t&&!t.hasChildNodes()&&t.appendChild(e)})}return e})():`${t.icon} ${t.name}`)})))}disconnectedCallback(){const t=this.hostElement.querySelectorAll(".palette-item");t.forEach((t=>{if(t._dragInitialized){s(t).unset();delete t._dragInitialized}}))}get hostElement(){return o(this)}static get watchers(){return{components:["handleComponentsChange"],config:["handleConfigChange"]}}};G.style=L;const U="confirmation-modal .confirmation-overlay{position:fixed;z-index:10000;top:0;right:0;bottom:0;left:0;display:flex;align-items:center;justify-content:center;animation:fadeIn 0.2s ease-out;background:rgba(0, 0, 0, 0.5)}confirmation-modal .confirmation-modal{width:90%;max-width:400px;border-radius:8px;animation:slideUp 0.2s ease-out;background:white;box-shadow:0 4px 20px rgba(0, 0, 0, 0.15)}confirmation-modal .modal-header{padding:20px 24px;border-bottom:1px solid #e9ecef}confirmation-modal .modal-header .modal-title{margin:0;color:#212529;font-size:18px;font-weight:600}confirmation-modal .modal-body{padding:24px}confirmation-modal .modal-body .modal-message{margin:0;color:#495057;font-size:14px;line-height:1.5}confirmation-modal .modal-footer{display:flex;justify-content:flex-end;padding:16px 24px;border-top:1px solid #e9ecef;gap:12px}confirmation-modal .modal-footer button{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px;font-weight:500;transition:all 0.15s}confirmation-modal .modal-footer button.cancel-btn{background:#f8f9fa;color:#495057}confirmation-modal .modal-footer button.cancel-btn:hover{background:#e9ecef}confirmation-modal .modal-footer button.confirm-btn{background:#dc3545;color:white}confirmation-modal .modal-footer button.confirm-btn:hover{background:#c82333}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}";const Y=class{constructor(i){t(this,i);this.confirm=e(this,"confirm");this.cancel=e(this,"cancel");this.isOpen=false;this.data=null;this.handleConfirm=()=>{this.confirm.emit()};this.handleCancel=()=>{this.cancel.emit()}}render(){if(!this.isOpen||!this.data){return null}return i("div",{class:"confirmation-overlay",onClick:this.handleCancel},i("div",{class:"confirmation-modal",onClick:t=>t.stopPropagation()},i("div",{class:"modal-header"},i("h2",{class:"modal-title"},this.data.title)),i("div",{class:"modal-body"},i("p",{class:"modal-message"},this.data.message)),i("div",{class:"modal-footer"},i("button",{class:"cancel-btn",onClick:this.handleCancel},"Cancel"),i("button",{class:"confirm-btn",onClick:this.handleConfirm},"Delete"))))}};Y.style=U;const N='.custom-config-panel{position:fixed;right:0;bottom:0;width:400px;max-width:90vw;max-height:80vh;background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);border-radius:12px 0 0 0;box-shadow:0 -4px 20px rgba(0, 0, 0, 0.15);display:flex;flex-direction:column;z-index:1000;transform:translateY(100%);transition:transform 0.3s ease-in-out;overflow:hidden}.custom-config-panel.panel-open{transform:translateY(0)}.custom-panel-header{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;background:rgba(255, 255, 255, 0.1);backdrop-filter:blur(10px);border-bottom:1px solid rgba(255, 255, 255, 0.2)}.custom-panel-header .header-content{display:flex;align-items:center;gap:12px;color:#ffffff}.custom-panel-header .header-content .component-icon{font-size:24px;line-height:1}.custom-panel-header .header-content h2{margin:0;font-size:20px;font-weight:600;color:#ffffff}.custom-panel-header .close-btn{background:rgba(255, 255, 255, 0.2);border:none;color:#ffffff;width:32px;height:32px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:20px;transition:all 0.2s ease}.custom-panel-header .close-btn:hover{background:rgba(255, 255, 255, 0.3);transform:scale(1.1)}.custom-panel-header .close-btn:active{transform:scale(0.95)}.custom-panel-body{flex:1;overflow-y:auto;padding:24px;background:#ffffff}.custom-panel-body .config-section{margin-bottom:24px}.custom-panel-body .config-section:last-child{margin-bottom:0}.custom-panel-body .config-section .section-label{display:block;font-size:14px;font-weight:600;color:#374151;margin-bottom:8px;text-transform:uppercase;letter-spacing:0.5px}.custom-panel-body .config-section.info-section{background:#f9fafb;border-radius:8px;padding:16px}.custom-panel-body .config-section.info-section .info-row{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid #e5e7eb}.custom-panel-body .config-section.info-section .info-row:last-child{border-bottom:none;padding-bottom:0}.custom-panel-body .config-section.info-section .info-row:first-child{padding-top:0}.custom-panel-body .config-section.info-section .info-row .info-label{font-size:13px;font-weight:500;color:#6b7280}.custom-panel-body .config-section.info-section .info-row .info-value{font-size:13px;color:#1f2937;font-family:"Monaco", "Menlo", monospace;background:#ffffff;padding:4px 8px;border-radius:4px}.custom-panel-body .config-field{margin-bottom:16px}.custom-panel-body .config-field:last-child{margin-bottom:0}.custom-panel-body .config-field .field-label{display:block;font-size:13px;font-weight:500;color:#4b5563;margin-bottom:6px}.custom-panel-body .text-input{width:100%;padding:10px 12px;border:2px solid #e5e7eb;border-radius:6px;font-size:14px;color:#1f2937;transition:all 0.2s ease}.custom-panel-body .text-input:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px rgba(102, 126, 234, 0.1)}.custom-panel-body .text-input:disabled{background:#f9fafb;color:#9ca3af;cursor:not-allowed}.custom-panel-body .text-input::placeholder{color:#9ca3af}.custom-panel-body .textarea-input{width:100%;padding:10px 12px;border:2px solid #e5e7eb;border-radius:6px;font-size:14px;color:#1f2937;font-family:inherit;line-height:1.5;min-height:80px;resize:vertical;transition:all 0.2s ease}.custom-panel-body .textarea-input:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px rgba(102, 126, 234, 0.1)}.custom-panel-body .textarea-input:disabled{background:#f9fafb;color:#9ca3af;cursor:not-allowed}.custom-panel-body .textarea-input::placeholder{color:#9ca3af}.custom-panel-body .select-input{width:100%;padding:10px 12px;border:2px solid #e5e7eb;border-radius:6px;font-size:14px;color:#1f2937;background:#ffffff;cursor:pointer;transition:all 0.2s ease}.custom-panel-body .select-input:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px rgba(102, 126, 234, 0.1)}.custom-panel-body .checkbox-label{display:flex;align-items:center;gap:8px;cursor:pointer;user-select:none}.custom-panel-body .checkbox-label input[type=checkbox]{width:18px;height:18px;cursor:pointer;accent-color:#667eea}.custom-panel-body .checkbox-label .checkbox-text{font-size:14px;color:#4b5563}.custom-panel-body .color-input-wrapper{display:flex;align-items:center;gap:12px}.custom-panel-body .color-input-wrapper .color-input{width:60px;height:40px;border:2px solid #e5e7eb;border-radius:6px;cursor:pointer;transition:all 0.2s ease}.custom-panel-body .color-input-wrapper .color-input:hover{border-color:#667eea}.custom-panel-body .color-input-wrapper .color-value{font-size:13px;font-family:"Monaco", "Menlo", monospace;color:#6b7280;background:#f9fafb;padding:8px 12px;border-radius:4px}.custom-panel-body .no-config-message{text-align:center;color:#9ca3af;font-size:14px;padding:24px;margin:0}.custom-panel-body .field-error{color:#ef4444;font-size:13px;margin:0;padding:8px;background:#fef2f2;border-radius:4px}.custom-panel-footer{display:flex;gap:12px;padding:20px 24px;background:#f9fafb;border-top:1px solid #e5e7eb}.custom-panel-footer .btn{flex:1;padding:12px 20px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all 0.2s ease;text-transform:uppercase;letter-spacing:0.5px}.custom-panel-footer .btn:active{transform:translateY(1px)}.custom-panel-footer .btn.btn-secondary{background:#ffffff;color:#6b7280;border:2px solid #e5e7eb}.custom-panel-footer .btn.btn-secondary:hover{background:#f9fafb;border-color:#d1d5db}.custom-panel-footer .btn.btn-primary{background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);color:#ffffff;box-shadow:0 4px 6px rgba(102, 126, 234, 0.3)}.custom-panel-footer .btn.btn-primary:hover{box-shadow:0 6px 12px rgba(102, 126, 234, 0.4);transform:translateY(-2px)}.custom-panel-footer .btn.btn-primary:active{transform:translateY(0);box-shadow:0 2px 4px rgba(102, 126, 234, 0.3)}@media (max-width: 768px){.custom-config-panel{width:100%;max-width:100vw;max-height:70vh;border-radius:12px 12px 0 0}}';const H=class{constructor(e){t(this,e);this.isOpen=false;this.selectedItemId=null;this.selectedCanvasId=null;this.componentConfig={};this.componentName="";this.originalState=null;this.componentRegistry=new Map;this.eventsSubscribed=false;this.handleItemRemoved=t=>{console.log("ðŸŽ¨ custom-config-panel received itemRemoved event",{eventItemId:t.itemId,selectedItemId:this.selectedItemId,isOpen:this.isOpen});if(this.isOpen&&this.selectedItemId&&t.itemId===this.selectedItemId){console.log("  âœ… Custom panel: Closing because selected item was deleted");this.closePanel()}};this.handleItemClick=t=>{console.log("ðŸŽ¨ custom-config-panel handleItemClick called",t.detail);this.ensureEventSubscription();const{itemId:e,canvasId:i}=t.detail;this.selectedItemId=e;this.selectedCanvasId=i;const o=this.getAPI();console.log("  ðŸ”§ API exists:",!!o);const n=o===null||o===void 0?void 0:o.getItem(e);console.log("  ðŸ”§ Item retrieved:",!!n,n);if(!n){console.log("  âŒ No item found - exiting");return}const s=this.componentRegistry.get(n.type);console.log("  ðŸ”§ Definition found:",!!s,s===null||s===void 0?void 0:s.name);this.originalState={name:n.name||(s===null||s===void 0?void 0:s.name)||n.type,zIndex:n.zIndex,config:n.config?Object.assign({},n.config):{}};this.componentName=this.originalState.name;this.componentConfig=Object.assign({},this.originalState.config);console.log("  ðŸšª Opening panel - setting isOpen = true");this.isOpen=true;console.log("  âœ… Panel should now be open, isOpen =",this.isOpen)};this.closePanel=()=>{const t=this.getAPI();if(this.selectedItemId&&this.selectedCanvasId&&this.originalState&&t){t.updateConfig(this.selectedItemId,this.originalState.config);const e=t.getState();for(const t in e.canvases){const i=e.canvases[t];const o=i.items.findIndex((t=>t.id===this.selectedItemId));if(o!==-1){i.items[o]=Object.assign(Object.assign({},i.items[o]),{name:this.originalState.name});e.canvases=Object.assign({},e.canvases);break}}}this.isOpen=false;this.selectedItemId=null;this.selectedCanvasId=null;this.componentName="";this.componentConfig={};this.originalState=null};this.saveConfig=()=>{this.isOpen=false;this.selectedItemId=null;this.selectedCanvasId=null;this.componentName="";this.componentConfig={};this.originalState=null};this.handleNameChange=t=>{const e=t.target.value;this.componentName=e;const i=this.getAPI();if(this.selectedItemId&&i){const t=i.getState();for(const i in t.canvases){const o=t.canvases[i];const n=o.items.findIndex((t=>t.id===this.selectedItemId));if(n!==-1){o.items[n]=Object.assign(Object.assign({},o.items[n]),{name:e});t.canvases=Object.assign({},t.canvases);break}}}};this.handleConfigChange=(t,e)=>{this.componentConfig=Object.assign(Object.assign({},this.componentConfig),{[t]:e});const i=this.getAPI();if(this.selectedItemId&&i){i.updateConfig(this.selectedItemId,this.componentConfig)}}}getAPI(){return this.api||window.gridBuilderAPI||null}ensureEventSubscription(){if(this.eventsSubscribed){return}const t=this.getAPI();if(!t){return}t.on("itemRemoved",this.handleItemRemoved);this.eventsSubscribed=true;console.log("  âœ… Custom panel: Subscribed to itemRemoved event")}handleApiChange(t,e){console.log("ðŸŽ¨ custom-config-panel API prop changed",{hadOldApi:!!e,hasNewApi:!!t,newApiType:typeof t});if(t&&!this.eventsSubscribed){this.ensureEventSubscription()}}componentDidLoad(){console.log("ðŸŽ¨ custom-config-panel componentDidLoad - setting up component registry");const t=this.getAPI();console.log("  ðŸ”§ API status:",{apiExists:!!t,apiType:typeof t,fromProp:!!this.api,fromWindow:!!window.gridBuilderAPI});this.componentRegistry=new Map(p.map((t=>[t.type,t])));this.ensureEventSubscription();document.addEventListener("item-click",this.handleItemClick);console.log("  âœ… Custom panel: Listening for item-click events")}disconnectedCallback(){console.log("ðŸŽ¨ custom-config-panel disconnectedCallback - cleaning up");const t=this.getAPI();if(t&&this.eventsSubscribed){t.off("itemRemoved",this.handleItemRemoved);this.eventsSubscribed=false}document.removeEventListener("item-click",this.handleItemClick)}render(){if(!this.isOpen){return null}const t=this.getAPI();const e=t===null||t===void 0?void 0:t.getItem(this.selectedItemId);if(!e){return null}const o=this.componentRegistry.get(e.type);if(!o){return null}const n={"custom-config-panel":true,"panel-open":this.isOpen};return i("div",{class:n},i("div",{class:"custom-panel-header"},i("div",{class:"header-content"},i("span",{class:"component-icon"},o.icon),i("h2",null,"Edit Component")),i("button",{class:"close-btn",onClick:()=>this.closePanel(),title:"Close"},"âœ•")),i("div",{class:"custom-panel-body"},i("div",{class:"config-section"},i("label",{class:"section-label"},"Component Name"),i("input",{type:"text",class:"text-input",value:this.componentName,placeholder:"Enter component name",onInput:t=>this.handleNameChange(t)})),i("div",{class:"config-section info-section"},i("div",{class:"info-row"},i("span",{class:"info-label"},"Type:"),i("span",{class:"info-value"},o.name)),i("div",{class:"info-row"},i("span",{class:"info-label"},"ID:"),i("span",{class:"info-value"},e.id))),o.configSchema&&o.configSchema.length>0?i("div",{class:"config-section"},i("label",{class:"section-label"},"Configuration"),o.configSchema.map((t=>i("div",{class:"config-field",key:t.name},i("label",{class:"field-label"},t.label),this.renderConfigField(t))))):i("div",{class:"config-section"},i("p",{class:"no-config-message"},"No configuration options available for this component."))),i("div",{class:"custom-panel-footer"},i("button",{class:"btn btn-secondary",onClick:()=>this.closePanel()},"Cancel"),i("button",{class:"btn btn-primary",onClick:()=>this.saveConfig()},"Save Changes")))}renderConfigField(t){var e,o,n;const s=(o=(e=this.componentConfig[t.name])!==null&&e!==void 0?e:t.defaultValue)!==null&&o!==void 0?o:"";switch(t.type){case"text":return i("input",{type:"text",class:"text-input",value:s,onInput:e=>this.handleConfigChange(t.name,e.target.value),placeholder:t.placeholder});case"textarea":return i("textarea",{class:"textarea-input",value:s,onInput:e=>this.handleConfigChange(t.name,e.target.value),placeholder:t.placeholder,rows:t.rows||3});case"number":return i("input",{type:"number",class:"text-input",value:s,onInput:e=>this.handleConfigChange(t.name,Number(e.target.value)),min:t.min,max:t.max,step:t.step});case"select":return i("select",{class:"select-input",onChange:e=>this.handleConfigChange(t.name,e.target.value)},(n=t.options)===null||n===void 0?void 0:n.map((t=>{const e=typeof t==="string"?t:t.value;const o=typeof t==="string"?t:t.label;return i("option",{key:e,value:e,selected:s===e},o)})));case"checkbox":return i("label",{class:"checkbox-label"},i("input",{type:"checkbox",checked:!!s,onChange:e=>this.handleConfigChange(t.name,e.target.checked)}),i("span",{class:"checkbox-text"},t.label));case"color":return i("div",{class:"color-input-wrapper"},i("input",{type:"color",class:"color-input",value:s,onInput:e=>this.handleConfigChange(t.name,e.target.value)}),i("span",{class:"color-value"},s));default:return i("p",{class:"field-error"},"Unknown field type: ",t.type)}}static get watchers(){return{api:["handleApiChange"]}}};H.style=N;const K=':host{--grid-builder-primary-color:#007bff;--grid-builder-palette-bg:#f5f5f5;--grid-builder-canvas-bg:#ffffff;--grid-builder-grid-line-color:rgba(0, 0, 0, 0.1);--grid-builder-selection-color:#007bff;--grid-builder-resize-handle-color:#007bff;--grid-builder-font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell",\n    "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;display:block;width:100%;height:100%;font-family:var(--grid-builder-font-family)}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.grid-builder-container{position:relative;display:flex;width:100%;height:100%}.canvas-area{position:relative;flex:1;background:var(--grid-builder-canvas-bg);overflow-y:auto}.canvases-container{display:flex;flex-direction:column;min-height:100%;gap:0;}.canvas-wrapper{position:relative;display:flex;flex-direction:column;gap:0}.canvas-wrapper:first-child{padding-top:38px}.config-area{position:fixed;z-index:1000;right:0;bottom:0;display:none;width:350px;max-height:60%;border:1px solid #ddd;border-radius:8px 8px 0 0;background:white;box-shadow:0 -2px 10px rgba(0, 0, 0, 0.1)}.config-area.visible{display:block}';const V=f("grid-builder");const W=class{constructor(e){t(this,e);this.apiRef={key:"gridBuilderAPI"};this.componentRegistry=new Map;this.initializedPlugins=[];this.announcement="";this.setupViewportResizeObserver=()=>{if(!this.hostElement){return}this.viewportResizeObserver=new ResizeObserver((t=>{var e,i;for(const o of t){const t=this.hostElement.offsetWidth||((i=(e=o.borderBoxSize)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.inlineSize)||o.contentRect.width;if(t<100){V.log(`ðŸ“± Skipping viewport switch - container not yet laid out (width: ${Math.round(t)}px)`);return}const n=t<768?"mobile":"desktop";if(this.stateManager.state.currentViewport!==n){V.log(`ðŸ“± Container-based viewport switch: ${this.stateManager.state.currentViewport} â†’ ${n} (width: ${Math.round(t)}px)`);this.stateManager.state.currentViewport=n}}}));this.viewportResizeObserver.observe(this.hostElement)};this.setupScreenReaderAnnouncements=()=>{var t,e,i,o,n,s;(t=this.eventManagerInstance)===null||t===void 0?void 0:t.on("componentAdded",(t=>{const e=this.componentRegistry.get(t.item.type);const i=(e===null||e===void 0?void 0:e.name)||t.item.type;this.announce(`${i} component added to canvas`)}));(e=this.eventManagerInstance)===null||e===void 0?void 0:e.on("componentDeleted",(t=>{this.announce(`Component deleted`)}));(i=this.eventManagerInstance)===null||i===void 0?void 0:i.on("componentMoved",(t=>{this.announce(`Component moved to new canvas`)}));(o=this.eventManagerInstance)===null||o===void 0?void 0:o.on("undoExecuted",(()=>{this.announce(`Undo action performed`);this.restoreFocusToSelection()}));(n=this.eventManagerInstance)===null||n===void 0?void 0:n.on("redoExecuted",(()=>{this.announce(`Redo action performed`);this.restoreFocusToSelection()}));(s=this.eventManagerInstance)===null||s===void 0?void 0:s.on("canvasActivated",(t=>{var e;const i=(e=this.canvasMetadata)===null||e===void 0?void 0:e[t.canvasId];const o=(i===null||i===void 0?void 0:i.title)||t.canvasId;this.announce(`${o} canvas activated`)}))};this.announce=t=>{this.announcement=t;setTimeout((()=>{this.announcement=""}),100)};this.moveFocusAfterDeletion=(t,e)=>{const i=this.stateManager.state.canvases[t];if(!i){V.log("âŒ¨ï¸ Focus: Canvas not found, focusing palette");const t=this.hostElement.querySelector("component-palette");if(t){t.focus()}return}const o=i.items;if(o.length===0){V.log("âŒ¨ï¸ Focus: No items left, focusing canvas");const e=this.hostElement.querySelector(`canvas-section[canvas-id="${t}"]`);if(e){e.focus()}else{const t=this.hostElement.querySelector("component-palette");if(t){t.focus()}}return}const n=[...o].sort(((t,e)=>{const i=t.layouts.desktop;const o=e.layouts.desktop;if(i.y!==o.y){return i.y-o.y}return i.x-o.x}));const s=n[0];V.log("âŒ¨ï¸ Focus: Focusing next item",{itemId:s.id,position:{x:s.layouts.desktop.x,y:s.layouts.desktop.y}});const a=this.hostElement.querySelector(`#${s.id}`);if(a){a.focus();this.stateManager.state.selectedItemId=s.id;this.stateManager.state.selectedCanvasId=s.canvasId}};this.restoreFocusToSelection=()=>{setTimeout((()=>{if(this.stateManager.state.selectedItemId){V.log("âŒ¨ï¸ Focus: Restoring focus to selected item",{itemId:this.stateManager.state.selectedItemId});const t=this.hostElement.querySelector(`#${this.stateManager.state.selectedItemId}`);if(t){t.focus()}}}),10)}}handleGridItemDelete(t){var e;V.log("ðŸ—‘ï¸ @Listen(grid-item:delete) in grid-builder",{detail:t.detail});const{itemId:i}=t.detail;if(i){V.log("  âœ… Deleting item via API (with undo support):",i);(e=this.api)===null||e===void 0?void 0:e.deleteComponent(i)}}async handlePaletteItemClick(t){var e,i,o,n,s;V.log("âž• @Listen(palette-item-click) in grid-builder",{detail:t.detail});const{targetGridBuilderId:a}=t.detail;if(a){const t=((e=this.apiRef)===null||e===void 0?void 0:e.key)||"gridBuilderAPI";if(a!==t){V.log(`  â­ï¸ Skipping - event targeted at ${a}, this instance is ${t}`);return}V.log(`  âœ… Event matches this instance (${t})`)}const r=(o=(i=this.config)===null||i===void 0?void 0:i.enableClickToAdd)!==null&&o!==void 0?o:true;if(!r){V.log("  â­ï¸ Click-to-add disabled via config");return}const{componentType:c}=t.detail;if(!c){V.warn("handlePaletteItemClick: Component type not provided");return}let l=this.stateManager.state.activeCanvasId;if(!l){const t=Object.keys(this.stateManager.state.canvases);if(t.length===0){V.warn("handlePaletteItemClick: No canvases available");return}l=t[0];this.stateManager.state.activeCanvasId=l;V.log(`  ðŸŽ¯ Auto-selected first canvas: ${l}`)}const d=this.componentRegistry.get(c);if(!d){V.error(`handlePaletteItemClick: Component definition not found for type: ${c}`);return}const h=d.defaultSize||{width:10,height:6};const{findFreeSpace:p}=await import("./p-DZJYXfUn.js");const f=p(l,h.width,h.height,this.stateManager.state);if(!f){V.error(`handlePaletteItemClick: Could not find space on canvas ${l}`);return}V.log("  ðŸ“ Found free space:",f);const u=await import("./p-CUVzvLO4.js");u.highlightCanvas(l);u.showPositionIndicator(l,f.x,f.y,h.width,h.height,this.config);V.log("  âž• Adding component via API");const v=(n=this.api)===null||n===void 0?void 0:n.addComponent(l,c,{x:f.x,y:f.y,width:h.width,height:h.height},{});if(!v){V.error("Failed to add component to canvas");return}requestAnimationFrame((()=>{requestAnimationFrame((()=>{u.animateComponentIn(v)}))}));this.stateManager.state.selectedItemId=v;this.stateManager.state.selectedCanvasId=l;const b=this.stateManager.state.canvases[l];const m=b===null||b===void 0?void 0:b.items.find((t=>t.id===v));if(m){(s=this.eventManagerInstance)===null||s===void 0?void 0:s.emit("componentAdded",{item:m,canvasId:l})}V.log("  âœ… Component added successfully")}componentWillLoad(){var t;if(!this.components||this.components.length===0){console.error("GridBuilder: components prop is required");return}this.componentRegistry=new Map(this.components.map((t=>[t.type,t])));if(this.componentRegistry.size!==this.components.length){V.warn("GridBuilder: Duplicate component types detected")}window.interact=s;this.stateManager=new u;this.undoRedoManager=new C;this.eventManagerInstance=new R;this.virtualRendererInstance=new _;this.domCacheInstance=new c;V.log("GridBuilder: Service instances created",{stateManager:!!this.stateManager,undoRedoManager:!!this.undoRedoManager,eventManagerInstance:!!this.eventManagerInstance,virtualRendererInstance:!!this.virtualRendererInstance,domCacheInstance:!!this.domCacheInstance});this.instanceId=((t=this.apiRef)===null||t===void 0?void 0:t.key)||"gridBuilderAPI";V.log("GridBuilder: Instance ID set",{instanceId:this.instanceId,hasCustomConfig:!!this.config});l(this.instanceId);V.log("GridBuilder: Cleared instance cache on load",{instanceId:this.instanceId});if(this.initialState){Object.assign(this.stateManager.state,this.initialState)}}componentDidLoad(){var t,e,i,o;this.api=this.createAPI();V.log("ðŸ”§ grid-builder exposing API and service instances",{hasApiRef:!!this.apiRef,apiRefKey:(t=this.apiRef)===null||t===void 0?void 0:t.key,apiCreated:!!this.api});if(this.apiRef&&this.apiRef.key){V.log("  ðŸ“¤ Setting API and services on window",{key:this.apiRef.key});window[this.apiRef.key]=this.api;window[`${this.apiRef.key}_virtualRenderer`]=this.virtualRendererInstance;V.log("  âœ… API and services set on window",{key:this.apiRef.key,apiExists:!!window[this.apiRef.key],virtualRendererExists:!!window[`${this.apiRef.key}_virtualRenderer`]})}if(this.plugins&&this.plugins.length>0){this.initializedPlugins=this.plugins.filter((t=>{try{t.init(this.api);V.log(`GridBuilder: Initialized plugin "${t.name}"`);return true}catch(e){console.error(`GridBuilder: Failed to initialize plugin "${t.name}":`,e);return false}}))}if(this.theme){this.applyTheme(this.theme)}const n=(i=(e=this.config)===null||e===void 0?void 0:e.eventDebounceDelay)!==null&&i!==void 0?i:300;(o=this.eventManagerInstance)===null||o===void 0?void 0:o.setDebounceDelay(n);V.log(`GridBuilder: Event debounce delay set to ${n}ms`);window.debugInteractables=()=>{const t=s.interactables.list;V.log("Total interactables:",t.length);t.forEach(((t,e)=>{V.log(`Interactable ${e}:`,{target:t.target,actions:t._actions,options:t.options})}))};this.canvasDropHandler=t=>{var e,i;const o=t;const{canvasId:n,componentType:s,x:a,y:r}=o.detail;V.log("ðŸŽ¯ canvas-drop event received:",{canvasId:n,componentType:s,x:a,y:r});const c=this.componentRegistry.get(s);if(!c){V.warn(`Component definition not found for type: ${s}`);return}const l=d(a,n,this.config);const p=h(r,this.config);V.log("  Converting to grid units (before constraints):",{gridX:l,gridY:p,defaultWidth:c.defaultSize.width,defaultHeight:c.defaultSize.height});const f=j(c,l,p);if(!f){V.warn(`Cannot place component "${c.name}" - minimum size exceeds canvas width`);return}V.log("  After boundary constraints:",f);const u=(e=this.api)===null||e===void 0?void 0:e.addComponent(n,s,{x:f.x,y:f.y,width:f.width,height:f.height});V.log("  Created item:",u);this.stateManager.state.activeCanvasId=n;(i=this.eventManagerInstance)===null||i===void 0?void 0:i.emit("canvasActivated",{canvasId:n})};this.hostElement.addEventListener("canvas-drop",this.canvasDropHandler);this.canvasMoveHandler=t=>{var e,i,o;const n=t;const{itemId:s,sourceCanvasId:a,targetCanvasId:r,x:c,y:l}=n.detail;V.log("ðŸ”„ canvas-move event received:",{itemId:s,sourceCanvasId:a,targetCanvasId:r,x:c,y:l});const p=this.stateManager.state.canvases[a];if(!p){console.error("Source canvas not found:",a);return}const f=p.items.findIndex((t=>t.id===s));if(f===-1){console.error("Item not found in source canvas:",s);return}const u=p.items[f];const v={x:u.layouts.desktop.x,y:u.layouts.desktop.y};let b=d(c,r,this.config);let m=h(l,this.config);const g=M(b,m,u.layouts.desktop.width,u.layouts.desktop.height,E);b=g.x;m=g.y;const x={x:b,y:m};const y=u.zIndex;u.layouts.desktop.x=b;u.layouts.desktop.y=m;p.items=p.items.filter((t=>t.id!==s));u.canvasId=r;const w=this.stateManager.state.canvases[r];w.items.push(u);const k=w.zIndexCounter++;u.zIndex=k;this.stateManager.state.canvases=Object.assign({},this.stateManager.state.canvases);this.stateManager.state.activeCanvasId=r;if(this.stateManager.state.selectedItemId===s){this.stateManager.state.selectedCanvasId=r}const I=new z(s,a,r,v,x,f,y,k);(e=this.undoRedoManager)===null||e===void 0?void 0:e.push(I);(i=this.eventManagerInstance)===null||i===void 0?void 0:i.emit("componentMoved",{item:u,sourceCanvasId:a,targetCanvasId:r,position:x});(o=this.eventManagerInstance)===null||o===void 0?void 0:o.emit("canvasActivated",{canvasId:r});V.log("âœ… Cross-canvas move completed:",{itemId:s,from:a,to:r,position:x})};this.hostElement.addEventListener("canvas-move",this.canvasMoveHandler);this.canvasActivatedHandler=t=>{var e;const i=t;const{canvasId:o}=i.detail;V.log("ðŸŽ¨ canvas-activated event received:",{canvasId:o});(e=this.eventManagerInstance)===null||e===void 0?void 0:e.emit("canvasActivated",{canvasId:o})};this.hostElement.addEventListener("canvas-activated",this.canvasActivatedHandler);this.keyboardHandler=t=>{var e,i,o,n,s;const a=(t.metaKey||t.ctrlKey)&&t.key==="z"&&!t.shiftKey;const r=(t.metaKey||t.ctrlKey)&&(t.key==="z"&&t.shiftKey||t.key==="y");if(a){V.log("âŒ¨ï¸ Keyboard: Undo triggered");t.preventDefault();(e=this.api)===null||e===void 0?void 0:e.undo();return}if(r){V.log("âŒ¨ï¸ Keyboard: Redo triggered");t.preventDefault();(i=this.api)===null||i===void 0?void 0:i.redo();return}if(t.key==="Delete"||t.key==="Backspace"){if(this.stateManager.state.selectedItemId&&this.stateManager.state.selectedCanvasId){V.log("âŒ¨ï¸ Keyboard: Delete triggered",{itemId:this.stateManager.state.selectedItemId});t.preventDefault();const e=this.stateManager.state.selectedItemId;const i=this.stateManager.state.selectedCanvasId;(o=this.api)===null||o===void 0?void 0:o.deleteComponent(this.stateManager.state.selectedItemId).then((t=>{if(t){this.announce("Component deleted");this.moveFocusAfterDeletion(i,e)}}));return}}if(t.key==="Escape"){if(this.stateManager.state.selectedItemId||this.stateManager.state.selectedCanvasId){V.log("âŒ¨ï¸ Keyboard: Escape triggered (deselecting)");t.preventDefault();this.stateManager.state.selectedItemId=null;this.stateManager.state.selectedCanvasId=null;this.announce("Selection cleared");return}}if(!this.stateManager.state.selectedItemId||!this.stateManager.state.selectedCanvasId){return}const c=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(t.key);if(!c){return}t.preventDefault();const l=this.stateManager.state.canvases[this.stateManager.state.selectedCanvasId];if(!l){return}const d=l.items.find((t=>t.id===this.stateManager.state.selectedItemId));if(!d){return}const h=this.stateManager.state.currentViewport;const p=d.layouts[h];const f=1;let u=0;let v=0;switch(t.key){case"ArrowUp":v=-1;break;case"ArrowDown":v=f;break;case"ArrowLeft":u=-1;break;case"ArrowRight":u=f;break}V.log("âŒ¨ï¸ Keyboard: Nudging component",{key:t.key,deltaX:u,deltaY:v,itemId:d.id});const b=p.x;const m=p.y;const g=Math.max(0,p.x+u);const x=Math.max(0,p.y+v);const y=100-p.width;const w=Math.min(g,y);const k=x;if(b===w&&m===k){return}p.x=w;p.y=k;const I=new z(d.id,this.stateManager.state.selectedCanvasId,this.stateManager.state.selectedCanvasId,{x:b,y:m},{x:w,y:k},l.items.findIndex((t=>t.id===d.id)),d.zIndex,d.zIndex);(n=this.undoRedoManager)===null||n===void 0?void 0:n.push(I);this.stateManager.state.canvases=Object.assign({},this.stateManager.state.canvases);(s=this.eventManagerInstance)===null||s===void 0?void 0:s.emit("componentDragged",{itemId:d.id,canvasId:this.stateManager.state.selectedCanvasId,position:{x:w,y:k}})};document.addEventListener("keydown",this.keyboardHandler);this.setupViewportResizeObserver();this.setupScreenReaderAnnouncements()}disconnectedCallback(){if(this.canvasDropHandler){this.hostElement.removeEventListener("canvas-drop",this.canvasDropHandler)}if(this.canvasMoveHandler){this.hostElement.removeEventListener("canvas-move",this.canvasMoveHandler)}if(this.canvasActivatedHandler){this.hostElement.removeEventListener("canvas-activated",this.canvasActivatedHandler)}if(this.keyboardHandler){document.removeEventListener("keydown",this.keyboardHandler)}if(this.viewportResizeObserver){this.viewportResizeObserver.disconnect()}if(this.initializedPlugins.length>0){this.initializedPlugins.forEach((t=>{try{t.destroy();V.log(`GridBuilder: Destroyed plugin "${t.name}"`)}catch(e){console.error(`GridBuilder: Failed to destroy plugin "${t.name}":`,e)}}));this.initializedPlugins=[]}if(this.undoRedoManager){this.undoRedoManager.dispose();V.log("GridBuilder: Disposed undoRedoManager")}if(this.virtualRendererInstance){this.virtualRendererInstance.destroy();V.log("GridBuilder: Destroyed virtualRendererInstance")}if(this.eventManagerInstance){this.eventManagerInstance.removeAllListeners();V.log("GridBuilder: Cleared eventManagerInstance listeners")}if(this.domCacheInstance){this.domCacheInstance.clear();V.log("GridBuilder: Cleared domCacheInstance")}if(this.instanceId){l(this.instanceId);V.log("GridBuilder: Cleared grid size cache for instance",{instanceId:this.instanceId})}if(this.apiRef&&this.apiRef.key){delete window[this.apiRef.key];delete window[`${this.apiRef.key}_virtualRenderer`]}}handleComponentsChange(t){this.componentRegistry=new Map(t.map((t=>[t.type,t])))}handleThemeChange(t){if(t){this.applyTheme(t)}}createAPI(){return{on:(t,e)=>{var i;(i=this.eventManagerInstance)===null||i===void 0?void 0:i.on(t,e)},off:(t,e)=>{var i;(i=this.eventManagerInstance)===null||i===void 0?void 0:i.off(t,e)},getState:()=>this.stateManager.state,getItems:t=>{var e;return((e=this.stateManager.state.canvases[t])===null||e===void 0?void 0:e.items)||[]},getItem:t=>{for(const e in this.stateManager.state.canvases){const i=this.stateManager.state.canvases[e];const o=i.items.find((e=>e.id===t));if(o){return o}}return null},addComponent:(t,e,i,o)=>{var n,s;const a=this.stateManager.state.canvases[t];if(!a){console.error(`Canvas not found: ${t}`);return null}const r=this.componentRegistry.get(e);const c=(r===null||r===void 0?void 0:r.name)||e;const l={id:g(),canvasId:t,name:c,type:e,zIndex:++a.zIndexCounter,layouts:{desktop:Object.assign({},i),mobile:{x:0,y:0,width:50,height:i.height,customized:false}},config:o||{}};const d=[...a.items,l];const h=Object.assign(Object.assign({},a),{items:d});const p=Object.assign(Object.assign({},this.stateManager.state.canvases),{[t]:h});this.stateManager.state.canvases=p;(n=this.undoRedoManager)===null||n===void 0?void 0:n.push(new B([l.id]));(s=this.eventManagerInstance)===null||s===void 0?void 0:s.emit("componentAdded",{item:l,canvasId:t});return l.id},deleteComponent:async t=>{var e,i;let o=null;let n=null;for(const e in this.stateManager.state.canvases){const i=this.stateManager.state.canvases[e];const s=i.items.find((e=>e.id===t));if(s){o=e;n=s;break}}if(!o||!n){return false}if(this.onBeforeDelete){try{const e=await this.onBeforeDelete({item:n,canvasId:o,itemId:t});if(!e){return false}}catch(t){console.error("Error in onBeforeDelete hook:",t);return false}}const s=this.stateManager.state.canvases[o];const a=s.items.findIndex((e=>e.id===t));if(a!==-1){(e=this.undoRedoManager)===null||e===void 0?void 0:e.push(new S([t]));s.items.splice(a,1);this.stateManager.state.canvases=Object.assign({},this.stateManager.state.canvases);if(this.stateManager.state.selectedItemId===t){this.stateManager.state.selectedItemId=null;this.stateManager.state.selectedCanvasId=null}(i=this.eventManagerInstance)===null||i===void 0?void 0:i.emit("componentDeleted",{itemId:t,canvasId:o});return true}return false},updateConfig:(t,e)=>{var i,o;for(const n in this.stateManager.state.canvases){const s=this.stateManager.state.canvases[n];const a=s.items.findIndex((e=>e.id===t));if(a!==-1){const r=s.items[a];const c=Object.assign(Object.assign({},r.config),e);const l=[{itemId:t,canvasId:n,updates:{config:c}}];(i=this.undoRedoManager)===null||i===void 0?void 0:i.push(new $(l));s.items[a]=Object.assign(Object.assign({},s.items[a]),{config:c});this.stateManager.state.canvases=Object.assign({},this.stateManager.state.canvases);(o=this.eventManagerInstance)===null||o===void 0?void 0:o.emit("configChanged",{itemId:t,canvasId:n,config:e});return true}}return false},addComponentsBatch:t=>{var e,i;const o=t.map((({canvasId:t,type:e,position:i,config:o})=>{const n=this.componentRegistry.get(e);const s=(n===null||n===void 0?void 0:n.name)||e;return{canvasId:t,type:e,name:s,layouts:{desktop:Object.assign({},i),mobile:{x:0,y:0,width:50,height:i.height,customized:false}},config:o||{}}}));const n=m(o);(e=this.undoRedoManager)===null||e===void 0?void 0:e.push(new B(n));const s=n.map((t=>{var e;const i=(e=this.api)===null||e===void 0?void 0:e.getItem(t);return i?{item:i,canvasId:i.canvasId}:null})).filter(Boolean);(i=this.eventManagerInstance)===null||i===void 0?void 0:i.emit("componentsBatchAdded",{items:s});return n},deleteComponentsBatch:t=>{var e,i;const o=t.map((t=>{var e;const i=(e=this.api)===null||e===void 0?void 0:e.getItem(t);return i?{itemId:t,canvasId:i.canvasId}:null})).filter(Boolean);(e=this.undoRedoManager)===null||e===void 0?void 0:e.push(new S(t));b(t);if(this.stateManager.state.selectedItemId&&t.includes(this.stateManager.state.selectedItemId)){this.stateManager.state.selectedItemId=null;this.stateManager.state.selectedCanvasId=null}(i=this.eventManagerInstance)===null||i===void 0?void 0:i.emit("componentsBatchDeleted",{items:o})},updateConfigsBatch:t=>{var e,i;const o=t.map((({itemId:t,config:e})=>{var i;const o=(i=this.api)===null||i===void 0?void 0:i.getItem(t);if(!o){V.warn(`Item ${t} not found for config update`);return null}return{itemId:t,canvasId:o.canvasId,updates:{config:Object.assign(Object.assign({},o.config),e)}}})).filter(Boolean);(e=this.undoRedoManager)===null||e===void 0?void 0:e.push(new $(o));v(o);const n=o.map((({itemId:t,canvasId:e,updates:i})=>({itemId:t,canvasId:e,config:i.config})));(i=this.eventManagerInstance)===null||i===void 0?void 0:i.emit("configsBatchChanged",{items:n})},getCanvasElement:t=>document.getElementById(t),undo:()=>{var t,e;(t=this.undoRedoManager)===null||t===void 0?void 0:t.undo();(e=this.eventManagerInstance)===null||e===void 0?void 0:e.emit("undoExecuted",{})},redo:()=>{var t,e;(t=this.undoRedoManager)===null||t===void 0?void 0:t.redo();(e=this.eventManagerInstance)===null||e===void 0?void 0:e.emit("redoExecuted",{})},canUndo:()=>{var t;return(t=this.undoRedoManager)===null||t===void 0?void 0:t.canUndo()},canRedo:()=>{var t;return(t=this.undoRedoManager)===null||t===void 0?void 0:t.canRedo()},undoRedoState:O,addCanvas:t=>{var e;const i=new D(t,this.stateManager.state,this.eventManagerInstance);(e=this.undoRedoManager)===null||e===void 0?void 0:e.push(i);i.redo()},removeCanvas:t=>{var e;const i=new A(t,this.stateManager.state,this.eventManagerInstance);(e=this.undoRedoManager)===null||e===void 0?void 0:e.push(i);i.redo()},setActiveCanvas:t=>{var e;this.stateManager.state.activeCanvasId=t;(e=this.eventManagerInstance)===null||e===void 0?void 0:e.emit("canvasActivated",{canvasId:t})},getActiveCanvas:()=>this.stateManager.state.activeCanvasId}}applyTheme(t){const e=this.el;if(!e)return;if(t.primaryColor){e.style.setProperty("--grid-builder-primary-color",t.primaryColor)}if(t.paletteBackground){e.style.setProperty("--grid-builder-palette-bg",t.paletteBackground)}if(t.canvasBackground){e.style.setProperty("--grid-builder-canvas-bg",t.canvasBackground)}if(t.gridLineColor){e.style.setProperty("--grid-builder-grid-line-color",t.gridLineColor)}if(t.selectionColor){e.style.setProperty("--grid-builder-selection-color",t.selectionColor)}if(t.resizeHandleColor){e.style.setProperty("--grid-builder-resize-handle-color",t.resizeHandleColor)}if(t.fontFamily){e.style.setProperty("--grid-builder-font-family",t.fontFamily)}if(t.customProperties){Object.entries(t.customProperties).forEach((([t,i])=>{e.style.setProperty(t,i)}))}}async exportState(){const t={version:"1.0.0",canvases:{},viewport:this.stateManager.state.currentViewport,metadata:{createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}};for(const e in this.stateManager.state.canvases){const i=this.stateManager.state.canvases[e];t.canvases[e]={items:i.items.map((t=>({id:t.id,canvasId:t.canvasId,type:t.type,name:t.name,layouts:{desktop:Object.assign({},t.layouts.desktop),mobile:Object.assign({},t.layouts.mobile)},zIndex:t.zIndex,config:Object.assign({},t.config)})))}}return t}async importState(t){Object.assign(this.stateManager.state,t)}async getState(){return this.stateManager.state}async addCanvas(t){var e;(e=this.api)===null||e===void 0?void 0:e.addCanvas(t)}async removeCanvas(t){var e;(e=this.api)===null||e===void 0?void 0:e.removeCanvas(t)}async setActiveCanvas(t){var e;(e=this.api)===null||e===void 0?void 0:e.setActiveCanvas(t)}async getActiveCanvas(){var t;return((t=this.api)===null||t===void 0?void 0:t.getActiveCanvas())||null}async undo(){var t;(t=this.api)===null||t===void 0?void 0:t.undo()}async redo(){var t;(t=this.api)===null||t===void 0?void 0:t.redo()}async canUndo(){var t;return((t=this.api)===null||t===void 0?void 0:t.canUndo())||false}async canRedo(){var t;return((t=this.api)===null||t===void 0?void 0:t.canRedo())||false}async addComponent(t,e,i,o){var n;return((n=this.api)===null||n===void 0?void 0:n.addComponent(t,e,i,o))||null}async deleteComponent(t){var e;return((e=this.api)===null||e===void 0?void 0:e.deleteComponent(t))||false}async updateConfig(t,e){var i;return((i=this.api)===null||i===void 0?void 0:i.updateConfig(t,e))||false}render(){const t=Object.keys(this.stateManager.state.canvases);const e=this.config?Object.assign(Object.assign({},this.config),{instanceId:this.instanceId}):{instanceId:this.instanceId};return i(n,{key:"fc929e692ed4fe8e6f9b683a6503263b9605585b",ref:t=>this.el=t},i("div",{key:"2b77a5ac349f5e50e1d6f187a52505c8abd9afd6",class:"sr-only",role:"status","aria-live":"polite","aria-atomic":"true"},this.announcement),i("div",{key:"23bb5e8cade11c8c8fdda21abab4ba31c8b2304b",class:"grid-builder-container",role:"application","aria-label":"Grid builder"},i("div",{key:"5a7ea10f82eab9d7f01af2f16b04e4af5af50adf",class:"canvas-area"},i("div",{key:"6f4c1870da88b3d6750ce8c0a55e181d97ddd647",class:"canvases-container"},t.map((t=>{var o,n,s;const a=this.stateManager.state.activeCanvasId===t;const r=((o=this.canvasMetadata)===null||o===void 0?void 0:o[t])||{};const c=(s=(n=this.uiOverrides)===null||n===void 0?void 0:n.CanvasHeader)===null||s===void 0?void 0:s.call(n,{canvasId:t,metadata:r,isActive:a});const l=c instanceof HTMLElement?i("div",{ref:t=>{if(t){t.innerHTML="";t.appendChild(c)}}}):c;return i("div",{key:t,class:"canvas-wrapper"},l,i("canvas-section",{canvasId:t,isActive:a,config:e,componentRegistry:this.componentRegistry,backgroundColor:r.backgroundColor,canvasTitle:r.title,onBeforeDelete:this.onBeforeDelete,virtualRendererInstance:this.virtualRendererInstance,eventManagerInstance:this.eventManagerInstance,stateInstance:this.stateManager.state,onStateChange:(t,e)=>this.stateManager.onChange(t,e),theme:this.theme}))}))))))}get hostElement(){return o(this)}static get watchers(){return{components:["handleComponentsChange"],theme:["handleThemeChange"]}}};W.style=K;const Z='@charset "UTF-8";:host{--grid-viewer-primary-color:#007bff;--grid-viewer-canvas-bg:#ffffff;--grid-viewer-font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen",\n    "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;display:block;width:100%;height:100%;font-family:var(--grid-viewer-font-family)}.grid-viewer-container{width:100%;height:100%;background:var(--grid-viewer-canvas-bg);overflow:auto}.canvas-area{width:100%;height:100%;overflow-y:auto;overflow-x:hidden}.canvases-container{display:flex;flex-direction:column;gap:0;width:100%;min-height:100%}';const q=f("grid-viewer");const X=class{constructor(e){t(this,e);this.componentRegistry=new Map;this.setupViewportResizeObserver=()=>{if(!this.hostElement){return}this.viewportResizeObserver=new ResizeObserver((t=>{var e,i;for(const o of t){const t=this.hostElement.offsetWidth||((i=(e=o.borderBoxSize)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.inlineSize)||o.contentRect.width;if(t<100){q.log(`ðŸ“± [Viewer] Skipping viewport switch - container not yet laid out (width: ${Math.round(t)}px)`);return}const n=t<768?"mobile":"desktop";if(this.viewerState.state.currentViewport!==n){q.log(`ðŸ“± [Viewer] Container-based viewport switch: ${this.viewerState.state.currentViewport} â†’ ${n} (width: ${Math.round(t)}px)`);this.viewerState.state.currentViewport=n}}}));this.viewportResizeObserver.observe(this.hostElement)}}componentWillLoad(){if(!this.components||this.components.length===0){console.error("GridViewer: components prop is required");return}this.componentRegistry=new Map(this.components.map((t=>[t.type,t])));if(this.componentRegistry.size!==this.components.length){q.warn("GridViewer: Duplicate component types detected")}const t={canvases:{},currentViewport:"desktop"};if(this.initialState){if("viewport"in this.initialState){t.currentViewport=this.initialState.viewport;t.canvases=this.initialState.canvases}else{Object.assign(t,this.initialState)}}this.viewerState=x(t)}componentDidLoad(){if(this.theme){this.applyTheme(this.theme)}this.setupViewportResizeObserver()}disconnectedCallback(){if(this.viewportResizeObserver){this.viewportResizeObserver.disconnect()}}handleComponentsChange(t){this.componentRegistry=new Map(t.map((t=>[t.type,t])))}handleInitialStateChange(t){if(t){if("viewport"in t){this.viewerState.state.currentViewport=t.viewport;this.viewerState.state.canvases=t.canvases}else{Object.assign(this.viewerState.state,t)}}}applyTheme(t){const e=this.el;if(!e)return;if(t.primaryColor){e.style.setProperty("--grid-viewer-primary-color",t.primaryColor)}if(t.canvasBackground){e.style.setProperty("--grid-viewer-canvas-bg",t.canvasBackground)}if(t.fontFamily){e.style.setProperty("--grid-viewer-font-family",t.fontFamily)}if(t.customProperties){Object.entries(t.customProperties).forEach((([t,i])=>{e.style.setProperty(t,i)}))}}render(){const t=Object.keys(this.viewerState.state.canvases);return i(n,{key:"b669569ef14f5a1c08e2be1715f4e3e7ca222c89",ref:t=>this.el=t},i("div",{key:"4007d21c7e8b6a1d31e025666cf73ea823b8274c",class:"grid-viewer-container"},i("div",{key:"28960094a485c87dc62638f30287a2e75b5cce20",class:"canvas-area"},i("div",{key:"bea6f47e72276dce68d3be351835317830db7fcb",class:"canvases-container"},t.map((t=>{var e,o;return i("canvas-section-viewer",{key:t,canvasId:t,config:this.config,componentRegistry:this.componentRegistry,items:this.viewerState.state.canvases[t].items,currentViewport:this.viewerState.state.currentViewport,backgroundColor:(o=(e=this.canvasMetadata)===null||e===void 0?void 0:e[t])===null||o===void 0?void 0:o.backgroundColor})}))))))}get hostElement(){return o(this)}static get watchers(){return{components:["handleComponentsChange"],initialState:["handleInitialStateChange"]}}};X.style=Z;const J=".layer-panel{display:flex;flex-direction:column;height:100%;background:#fafafa;border-left:1px solid #e0e0e0;overflow:hidden}.layer-panel__header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid #e0e0e0;background:#ffffff}.layer-panel__title{margin:0;font-size:16px;font-weight:600;color:#333}.layer-panel__count{font-size:12px;color:#757575;background:#f5f5f5;padding:2px 8px;border-radius:12px}.layer-panel__search{padding:12px 16px;border-bottom:1px solid #e0e0e0;background:#ffffff}.layer-panel__search-input{width:100%;padding:8px 12px;border:1px solid #e0e0e0;border-radius:4px;font-size:14px;outline:none;transition:border-color 0.2s ease}.layer-panel__search-input:focus{border-color:#4a90e2;box-shadow:0 0 0 2px rgba(74, 144, 226, 0.1)}.layer-panel__search-input::placeholder{color:#9e9e9e}.layer-panel__list{flex:1;overflow-y:auto;overflow-x:hidden;padding:8px;background:#fafafa;}.layer-panel__list::-webkit-scrollbar{width:8px}.layer-panel__list::-webkit-scrollbar-track{background:#f5f5f5}.layer-panel__list::-webkit-scrollbar-thumb{background:#ccc;border-radius:4px}.layer-panel__list::-webkit-scrollbar-thumb:hover{background:#aaa}.layer-panel__list-inner{position:relative;min-height:100%}.layer-panel__visible-items{position:absolute;width:100%;will-change:transform}.layer-panel__empty{text-align:center;padding:32px 16px;color:#9e9e9e;font-size:14px}.layer-panel__footer{padding:8px 16px;border-top:1px solid #e0e0e0;background:#ffffff}.layer-panel__hint{font-size:11px;color:#757575;text-align:center}";const Q=class{constructor(e){t(this,e);this.canvasMetadata={};this.folderHeight=40;this.itemHeight=40;this.virtualWindowSize=50;this.virtualBufferPx=200;this.searchDebounceMs=300;this.allItems=[];this.filteredItems=[];this.searchQuery="";this.folderExpandedState={};this.searchDebounceTimer=null;this.virtualScrollOffset=0;this.cleanupFunctions=[];this.draggedItem=null;this.initializeFolderState=()=>{const t=y.activeCanvasId;const e={};Object.keys(y.canvases).forEach((i=>{e[i]=i===t}));this.folderExpandedState=e};this.refreshItems=()=>{const t=[];Object.entries(y.canvases).forEach((([e,i])=>{i.items.forEach((i=>{t.push(Object.assign(Object.assign({},i),{canvasId:e}))}))}));t.sort(((t,e)=>e.zIndex-t.zIndex));this.allItems=t;this.applySearchFilter()};this.applySearchFilter=()=>{if(!this.searchQuery){this.filteredItems=this.allItems;return}const t=this.searchQuery.toLowerCase();this.filteredItems=this.allItems.filter((e=>e.name.toLowerCase().includes(t)))};this.handleSearchInput=t=>{const e=t.target;const i=e.value;if(this.searchDebounceTimer){clearTimeout(this.searchDebounceTimer)}this.searchDebounceTimer=window.setTimeout((()=>{this.searchQuery=i;this.applySearchFilter()}),this.searchDebounceMs)};this.groupItemsByCanvas=t=>{const e={};t.forEach((t=>{if(!e[t.canvasId]){e[t.canvasId]=[]}e[t.canvasId].push(t)}));return e};this.getCanvasTitle=t=>{var e,i;return((i=(e=this.canvasMetadata)===null||e===void 0?void 0:e[t])===null||i===void 0?void 0:i.title)||t};this.toggleFolder=t=>{this.folderExpandedState=Object.assign(Object.assign({},this.folderExpandedState),{[t]:!this.folderExpandedState[t]})};this.initializeVirtualScrolling=()=>{const t=this.hostElement.querySelector(".layer-panel__list");if(!t)return;t.addEventListener("scroll",(()=>{const e=t.scrollTop;this.virtualScrollOffset=e}))};this.buildVirtualItemsList=()=>{const t=[];let e=0;const i=this.groupItemsByCanvas(this.allItems);const o=this.groupItemsByCanvas(this.filteredItems);Object.keys(i).forEach((n=>{var s;const a=i[n]||[];const r=o[n]||[];const c=(s=this.folderExpandedState[n])!==null&&s!==void 0?s:true;const l=this.searchQuery&&r.length===0;t.push({type:"folder",data:{canvasId:n,title:this.getCanvasTitle(n),itemCount:r.length,totalItemCount:a.length,isEmpty:l},height:this.folderHeight,offset:e});e+=this.folderHeight;if(c){r.forEach((i=>{t.push({type:"item",data:i,height:this.itemHeight,offset:e});e+=this.itemHeight}))}}));return t};this.calculateVirtualScrolling=()=>{const t=this.buildVirtualItemsList();const e=t.length>0?t[t.length-1].offset+t[t.length-1].height:0;const i=this.virtualScrollOffset;const o=this.hostElement.querySelector(".layer-panel__list");const n=(o===null||o===void 0?void 0:o.clientHeight)||600;const s=Math.max(0,i-this.virtualBufferPx);const a=i+n+this.virtualBufferPx;let r=0;for(let e=0;e<t.length;e++){if(t[e].offset+t[e].height>=s){r=e;break}}let c=r;for(let e=r;e<t.length;e++){if(t[e].offset>a){break}c=e}const l=t.slice(r,c+1);return{visibleItems:l,totalHeight:e}}}componentDidLoad(){this.initializeFolderState();this.refreshItems();const t=w("canvases",(()=>{this.refreshItems()}));this.cleanupFunctions.push(t);const e=()=>{this.refreshItems()};T.on("zIndexChanged",e);this.cleanupFunctions.push((()=>T.off("zIndexChanged",e)));const i=()=>{this.refreshItems()};T.on("zIndexBatchChanged",i);this.cleanupFunctions.push((()=>T.off("zIndexBatchChanged",i)));const o=w("activeCanvasId",(()=>{this.allItems=[...this.allItems]}));this.cleanupFunctions.push(o);const n=w("selectedItemId",(()=>{this.allItems=[...this.allItems]}));this.cleanupFunctions.push(n);this.initializeVirtualScrolling()}disconnectedCallback(){this.cleanupFunctions.forEach((t=>t()));this.cleanupFunctions=[];if(this.searchDebounceTimer){clearTimeout(this.searchDebounceTimer)}}handleLayerItemSelect(t){const{itemId:e,canvasId:i}=t.detail;y.selectedItemId=e;y.selectedCanvasId=i;y.activeCanvasId=i}handleToggleFolder(t){this.toggleFolder(t.detail.canvasId)}handleActivateCanvas(t){y.activeCanvasId=t.detail.canvasId}handleLayerItemDragStart(t){const{itemId:e,canvasId:i,zIndex:o}=t.detail;this.draggedItem={itemId:e,canvasId:i,zIndex:o}}handleLayerItemDropped(t){var e,i;if(!this.draggedItem)return;const{targetItemId:o,targetCanvasId:n,targetZIndex:s,dropAbove:a}=t.detail;const{itemId:r,canvasId:c,zIndex:l}=this.draggedItem;if(r===o&&c===n){this.draggedItem=null;return}if(c!==n){k(c,n,r);const t=y.canvases[n];const e=[...t.items].sort(((t,e)=>t.zIndex-e.zIndex));const i=e.findIndex((t=>t.id===o));let l;if(a){l=s;e.forEach((t=>{if(t.id!==r&&t.zIndex>=l){t.zIndex++}}))}else{if(i<e.length-1){const t=e[i+1];l=t.zIndex;e.forEach((t=>{if(t.id!==r&&t.zIndex>=l){t.zIndex++}}))}else{l=s+1}}I(n,r,l)}else{const t=y.canvases[c];const e=[...t.items].sort(((t,e)=>t.zIndex-e.zIndex));const i=e.findIndex((t=>t.id===r));const n=e.findIndex((t=>t.id===o));let d;if(a){d=s;e.forEach((t=>{if(t.id!==r){if(i<n){if(t.zIndex>l&&t.zIndex<=s){t.zIndex--}}else{if(t.zIndex>=s&&t.zIndex<l){t.zIndex++}}}}))}else{if(n<e.length-1){d=s+1;e.forEach((t=>{if(t.id!==r){if(i<n){if(t.zIndex>l&&t.zIndex<=d){t.zIndex--}}else{if(t.zIndex>=d&&t.zIndex<l){t.zIndex++}}}}))}else{d=s+1}}I(c,r,d)}this.refreshItems();this.draggedItem=null;T.emit("zIndexChanged",{canvasId:n,itemId:r,oldZIndex:l,newZIndex:(i=(e=y.canvases[n])===null||e===void 0?void 0:e.items.find((t=>t.id===r)))===null||i===void 0?void 0:i.zIndex})}render(){const{visibleItems:t,totalHeight:e}=this.calculateVirtualScrolling();return i("div",{key:"6b4685c541c200040beadeed4218dc1c2a02fb7d",class:"layer-panel"},i("div",{key:"6929ebd3086290b5a56a2b641650548a19f4c1f2",class:"layer-panel__header"},i("h3",{key:"2943f76285b9c17682b7d9c54f5786c11671c30d",class:"layer-panel__title"},"Layers"),i("div",{key:"6359e22254e6c89e580564297af1db755d4b8f32",class:"layer-panel__count"},this.filteredItems.length," items")),i("div",{key:"fd0b49a11d5349ebbe4a7e39eaccaf26219ee73a",class:"layer-panel__search"},i("input",{key:"f28e0040414b8cea5f53ce59bad15a420ad6c107",type:"text",class:"layer-panel__search-input",placeholder:"Search layers...",onInput:this.handleSearchInput})),i("div",{key:"3d5f2945e029b19d5431a68d6d9d1baff919def3",class:"layer-panel__list"},i("div",{key:"f636dad140e7f115283d2b9362f4dffde64726b1",class:"layer-panel__list-inner",style:{height:`${e}px`,position:"relative"}},t.length===0&&i("div",{key:"31a24f11afa84d905f81c3863bcd8463b80cf14c",class:"layer-panel__empty"},"No items found"),t.map((t=>{var e;if(t.type==="folder"){const o=t.data;return i("layer-panel-folder-header",{key:`folder-${o.canvasId}`,canvasId:o.canvasId,canvasTitle:o.title,itemCount:o.itemCount,totalItemCount:o.totalItemCount,isExpanded:(e=this.folderExpandedState[o.canvasId])!==null&&e!==void 0?e:true,isActive:o.canvasId===y.activeCanvasId,isEmpty:o.isEmpty,style:{position:"absolute",top:`${t.offset}px`,left:"0",right:"0",height:`${t.height}px`}})}else{const e=t.data;return i("layer-panel-item",{key:e.id,itemId:e.id,canvasId:e.canvasId,name:e.name,type:e.type,zIndex:e.zIndex,isActive:e.id===y.selectedItemId&&e.canvasId===y.selectedCanvasId,style:{position:"absolute",top:`${t.offset}px`,left:"0",right:"0",height:`${t.height}px`}})}})))),i("div",{key:"5b90261b03e2c3d2f4c391f1a93ca31fe81f6147",class:"layer-panel__footer"},i("div",{key:"3b1728188d772e958ba0b87eb0bfaeb419ddf0ad",class:"layer-panel__hint"},"Click folder to expand/collapse Â· Click item to select")))}get hostElement(){return o(this)}};Q.style=J;const tt='section-editor-panel .section-editor-overlay{position:fixed;z-index:10000;top:0;right:0;bottom:0;left:0;display:flex;align-items:center;justify-content:center;animation:fadeIn 0.2s ease-out;background:rgba(0, 0, 0, 0.5)}section-editor-panel .section-editor-panel{width:90%;max-width:440px;border-radius:12px;animation:slideUp 0.2s ease-out;background:white;box-shadow:0 8px 32px rgba(0, 0, 0, 0.12)}section-editor-panel .panel-header{display:flex;align-items:center;justify-content:space-between;padding:28px 32px 24px;border-bottom:1px solid #e9ecef}section-editor-panel .panel-header .panel-title{margin:0;color:#212529;font-size:20px;font-weight:600;letter-spacing:-0.02em}section-editor-panel .panel-header .close-btn{display:flex;width:32px;height:32px;align-items:center;justify-content:center;padding:0;border:none;border-radius:6px;background:transparent;color:#6c757d;cursor:pointer;font-size:24px;font-weight:300;line-height:1;transition:all 0.15s}section-editor-panel .panel-header .close-btn:hover{background:#f8f9fa;color:#212529}section-editor-panel .panel-header .close-btn:active{transform:scale(0.95)}section-editor-panel .panel-body{padding:32px}section-editor-panel .panel-body .form-group{margin-bottom:28px}section-editor-panel .panel-body .form-group:last-child{margin-bottom:0}section-editor-panel .panel-body .form-group label{display:block;margin-bottom:10px;color:#495057;font-size:13px;font-weight:600;letter-spacing:0.01em;text-transform:uppercase}section-editor-panel .panel-body .form-group .section-title-input{width:100%;box-sizing:border-box;padding:12px 16px;border:1.5px solid #e1e4e8;border-radius:8px;background:#f8f9fa;color:#212529;font-size:15px;transition:all 0.2s}section-editor-panel .panel-body .form-group .section-title-input:hover{background:white;border-color:#cbd3da}section-editor-panel .panel-body .form-group .section-title-input:focus{border-color:#4a90e2;background:white;box-shadow:0 0 0 3px rgba(74, 144, 226, 0.08);outline:none}section-editor-panel .panel-body .form-group .section-title-input::placeholder{color:#adb5bd}section-editor-panel .panel-body .form-group .color-picker-wrapper{display:flex;align-items:stretch;gap:14px}section-editor-panel .panel-body .form-group .color-picker-wrapper .section-color-input{width:64px;height:48px;padding:6px;border:1.5px solid #e1e4e8;border-radius:8px;cursor:pointer;transition:all 0.2s}section-editor-panel .panel-body .form-group .color-picker-wrapper .section-color-input:hover{border-color:#4a90e2;box-shadow:0 2px 8px rgba(74, 144, 226, 0.15)}section-editor-panel .panel-body .form-group .color-picker-wrapper .section-color-input:focus{border-color:#4a90e2;box-shadow:0 0 0 3px rgba(74, 144, 226, 0.08);outline:none}section-editor-panel .panel-body .form-group .color-picker-wrapper .color-hex-input{flex:1;padding:12px 16px;border:1.5px solid #e1e4e8;border-radius:8px;background:#f8f9fa;color:#495057;font-family:"SF Mono", "Monaco", "Courier New", monospace;font-size:14px;transition:all 0.2s}section-editor-panel .panel-body .form-group .color-picker-wrapper .color-hex-input:hover{background:white;border-color:#cbd3da}section-editor-panel .panel-body .form-group .color-picker-wrapper .color-hex-input:focus{border-color:#4a90e2;background:white;box-shadow:0 0 0 3px rgba(74, 144, 226, 0.08);outline:none}section-editor-panel .panel-body .form-group .color-picker-wrapper .color-hex-input::placeholder{color:#adb5bd}section-editor-panel .panel-footer{display:flex;align-items:center;justify-content:space-between;padding:24px 32px 28px;border-top:1px solid #e9ecef}section-editor-panel .panel-footer .footer-actions{display:flex;gap:12px}section-editor-panel .panel-footer button{padding:12px 24px;border:none;border-radius:8px;cursor:pointer;font-size:14px;font-weight:600;transition:all 0.2s}section-editor-panel .panel-footer button:active{transform:translateY(1px)}section-editor-panel .panel-footer .delete-btn{padding:12px 16px;margin-right:16px;border:1.5px solid #dc3545;background:transparent;color:#dc3545;font-weight:500}section-editor-panel .panel-footer .delete-btn:hover{background:#fff5f5;border-color:#c82333;color:#c82333}section-editor-panel .panel-footer .delete-btn:active{background:#ffe5e5}section-editor-panel .panel-footer .cancel-btn{border:1.5px solid #e1e4e8;background:white;color:#495057}section-editor-panel .panel-footer .cancel-btn:hover{border-color:#cbd3da;background:#f8f9fa}section-editor-panel .panel-footer .cancel-btn:active{background:#e9ecef}section-editor-panel .panel-footer .save-btn{background:#4a90e2;color:white;box-shadow:0 2px 8px rgba(74, 144, 226, 0.2)}section-editor-panel .panel-footer .save-btn:hover{background:#357abd;box-shadow:0 4px 12px rgba(74, 144, 226, 0.25);transform:translateY(-1px)}section-editor-panel .panel-footer .save-btn:active{background:#2a5f8f;box-shadow:0 1px 4px rgba(74, 144, 226, 0.2);transform:translateY(0)}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}';const et=class{constructor(i){t(this,i);this.closePanel=e(this,"closePanel");this.updateSection=e(this,"updateSection");this.previewColorChange=e(this,"previewColorChange");this.previewTitleChange=e(this,"previewTitleChange");this.deleteSection=e(this,"deleteSection");this.isOpen=false;this.sectionData=null;this.editedTitle="";this.editedColor="";this.originalColor="";this.originalTitle="";this.handleClose=()=>{if(this.sectionData){this.previewColorChange.emit({canvasId:this.sectionData.canvasId,backgroundColor:this.originalColor});this.previewTitleChange.emit({canvasId:this.sectionData.canvasId,title:this.originalTitle})}this.closePanel.emit()};this.handleSave=()=>{if(this.sectionData){this.updateSection.emit({canvasId:this.sectionData.canvasId,title:this.editedTitle,backgroundColor:this.editedColor});this.closePanel.emit()}};this.handleDelete=()=>{if(this.sectionData){this.deleteSection.emit({canvasId:this.sectionData.canvasId});this.closePanel.emit()}};this.handleTitleInput=t=>{this.editedTitle=t.target.value;if(this.sectionData){this.previewTitleChange.emit({canvasId:this.sectionData.canvasId,title:this.editedTitle})}};this.handleColorInput=t=>{this.editedColor=t.target.value;if(this.sectionData){this.previewColorChange.emit({canvasId:this.sectionData.canvasId,backgroundColor:this.editedColor})}}}handleSectionDataChange(t){if(t){this.editedTitle=t.title;this.editedColor=t.backgroundColor;this.originalColor=t.backgroundColor;this.originalTitle=t.title}}componentWillLoad(){if(this.sectionData){this.editedTitle=this.sectionData.title;this.editedColor=this.sectionData.backgroundColor;this.originalColor=this.sectionData.backgroundColor;this.originalTitle=this.sectionData.title}}render(){if(!this.isOpen||!this.sectionData){return null}return i("div",{class:"section-editor-overlay",onClick:this.handleClose},i("div",{class:"section-editor-panel",onClick:t=>t.stopPropagation()},i("div",{class:"panel-header"},i("h2",{class:"panel-title"},"Edit Section"),i("button",{class:"close-btn",onClick:this.handleClose,title:"Close"},"Ã—")),i("div",{class:"panel-body"},i("div",{class:"form-group"},i("label",{htmlFor:"section-title"},"Section Name"),i("input",{type:"text",id:"section-title",class:"section-title-input",value:this.editedTitle,onInput:this.handleTitleInput,placeholder:"Enter section name"})),i("div",{class:"form-group"},i("label",{htmlFor:"section-color"},"Background Color"),i("div",{class:"color-picker-wrapper"},i("input",{type:"color",id:"section-color",class:"section-color-input",value:this.editedColor,onInput:this.handleColorInput}),i("input",{type:"text",class:"color-hex-input",value:this.editedColor,onInput:this.handleColorInput,placeholder:"#ffffff"})))),i("div",{class:"panel-footer"},i("button",{class:"delete-btn",onClick:this.handleDelete},"Delete Section"),i("div",{class:"footer-actions"},i("button",{class:"cancel-btn",onClick:this.handleClose},"Cancel"),i("button",{class:"save-btn",onClick:this.handleSave},"Save Changes")))))}static get watchers(){return{sectionData:["handleSectionDataChange"]}}};et.style=tt;export{P as canvas_header,G as component_palette,Y as confirmation_modal,H as custom_config_panel,W as grid_builder,X as grid_viewer,Q as layer_panel,et as section_editor_panel};
//# sourceMappingURL=p-11492a26.entry.js.map