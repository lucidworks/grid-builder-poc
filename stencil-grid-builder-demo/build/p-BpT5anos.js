class n{constructor(){this.canvases=new Map}getCanvas(n){if(this.canvases.has(n)){return this.canvases.get(n)}const o=document.getElementById(n);if(o){this.canvases.set(n,o)}return o}invalidate(n){this.canvases.delete(n)}clear(){this.canvases.clear()}}const o=new n;const t=20;const i=.02;const s=10;const c=50;const r=new Map;function l(n){if(n){const o=`${n}-`;for(const n of r.keys()){if(n.startsWith(o)){r.delete(n)}}}else{r.clear()}}function e(n,o,t){var l,e;const a=(t===null||t===void 0?void 0:t.instanceId)?`${t.instanceId}-${n}-h`:`${n}-h`;const u=(t===null||t===void 0?void 0:t.gridSizePercent)?t.gridSizePercent/100:i;const d=o*u;const v=(l=t===null||t===void 0?void 0:t.minGridSize)!==null&&l!==void 0?l:s;const f=(e=t===null||t===void 0?void 0:t.maxGridSize)!==null&&e!==void 0?e:c;const h=Math.max(v,Math.min(f,d));r.set(a,h)}function a(n,t,l=false){var e,a;const u=(t===null||t===void 0?void 0:t.instanceId)?`${t.instanceId}-${n}-h`:`${n}-h`;if(!l&&r.has(u)){return r.get(u)}const d=o.getCanvas(n);if(!d){console.warn(`Canvas container not found: ${n}`);return 0}const v=(t===null||t===void 0?void 0:t.gridSizePercent)?t.gridSizePercent/100:i;const f=d.clientWidth*v;const h=(e=t===null||t===void 0?void 0:t.minGridSize)!==null&&e!==void 0?e:s;const M=(a=t===null||t===void 0?void 0:t.maxGridSize)!==null&&a!==void 0?a:c;const $=Math.max(h,Math.min(M,f));if(d.clientWidth>100){r.set(u,$)}return $}function u(n){var o;return(o=n===null||n===void 0?void 0:n.verticalGridSize)!==null&&o!==void 0?o:t}function d(n,o,t){const i=a(o,t);return Math.round(n*i)}function v(n,o){return n*u(o)}function f(n,o,t){const i=a(o,t);if(i===0){return 0}return Math.round(n/i)}function h(n,o){return Math.round(n/u(o))}var M=Object.freeze({__proto__:null,clearGridSizeCache:l,getGridSizeHorizontal:a,getGridSizeVertical:u,gridToPixelsX:d,gridToPixelsY:v,pixelsToGridX:f,pixelsToGridY:h,setGridSizeCache:e});export{n as D,u as a,d as b,l as c,o as d,a as e,h as f,v as g,M as h,f as p,e as s};
//# sourceMappingURL=p-BpT5anos.js.map