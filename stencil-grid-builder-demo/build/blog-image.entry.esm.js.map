{"version":3,"file":"blog-image.entry.esm.js","sources":["src/demo/components/blog-image/blog-image.scss?tag=blog-image","src/demo/components/blog-image/blog-image.tsx"],"sourcesContent":["// The blog-image custom element needs to fill its parent (grid-item content area)\n// Parent has 20px padding, so this fills the content area inside that padding\nblog-image {\n  display: block;\n  width: 100%;\n  height: 100%;\n  position: relative;\n  border-radius: 8px;\n  overflow: hidden; // CRITICAL: Prevent any overflow from this element\n  box-sizing: border-box; // CRITICAL: Include padding in dimensions\n}\n\n// Content wrapper fills the entire blog-image element\n.blog-image-content {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden; // CRITICAL: Prevent overflow\n  box-sizing: border-box; // CRITICAL: Include padding in dimensions\n}\n\n// Image container takes remaining space after caption\n.image-container {\n  position: relative;\n  flex: 1;\n  min-height: 0; // CRITICAL: Allow flex shrinking\n  width: 100%;\n  display: flex; // Flexbox for centering\n  align-items: center; // Center vertically\n  justify-content: center; // Center horizontally\n  overflow: hidden; // CRITICAL: Prevent image overflow\n  background: #fff;\n  box-sizing: border-box; // CRITICAL: Include padding in dimensions\n}\n\n// The actual img element - centered with flexbox\n.blog-image {\n  position: relative; // Create stacking context\n  z-index: 2; // Appear above placeholder (z-index: 1)\n  display: block;\n  max-width: 100%; // CRITICAL: Never exceed container width\n  max-height: 100%; // CRITICAL: Never exceed container height\n  width: auto; // Maintain aspect ratio\n  height: auto; // Maintain aspect ratio\n  object-position: center;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n\n  &.loaded {\n    opacity: 1;\n  }\n\n  &.fit-contain {\n    object-fit: contain; // Show entire image, no cropping\n  }\n\n  &.fit-cover {\n    object-fit: cover; // Fill container, may crop edges\n    width: 100%; // Fill width for cover mode\n    height: 100%; // Fill height for cover mode\n  }\n}\n\n// Loading placeholder\n.image-placeholder {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #e9ecef;\n  z-index: 1;\n}\n\n.spinner {\n  width: 40px;\n  height: 40px;\n  border: 3px solid #dee2e6;\n  border-top-color: #4a90e2;\n  border-radius: 50%;\n  animation: spin 0.8s linear infinite;\n}\n\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n// Error state\n.image-error {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  background: #f8f9fa;\n  color: #6c757d;\n  z-index: 1;\n\n  .error-icon {\n    font-size: 48px;\n  }\n\n  .error-text {\n    font-size: 14px;\n    text-align: center;\n    padding: 0 12px;\n  }\n}\n\n// Caption at the bottom\n.image-caption {\n  flex-shrink: 0; // Don't compress caption\n  padding: 8px 12px;\n  background: rgba(0, 0, 0, 0.03);\n  color: #495057;\n  font-size: 12px;\n  font-style: italic;\n  line-height: 1.4;\n  text-align: center;\n  overflow: hidden; // CRITICAL: Prevent caption overflow\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2; // Max 2 lines\n  -webkit-box-orient: vertical;\n  word-wrap: break-word;\n  box-sizing: border-box; // CRITICAL: Include padding in dimensions\n}\n","import { Component, h, Prop, State, Host } from \"@stencil/core\";\n\n@Component({\n  tag: \"blog-image\",\n  styleUrl: \"blog-image.scss\",\n  shadow: false,\n})\nexport class BlogImage {\n  @Prop() src: string =\n    \"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800&h=600&fit=crop\";\n  @Prop() alt: string = \"Placeholder image\";\n  @Prop() caption?: string;\n  @Prop() objectFit: \"contain\" | \"cover\" = \"contain\";\n  @Prop() backgroundColor?: string = \"#c8e6c9\";\n\n  @State() imageLoaded: boolean = false;\n  @State() imageError: boolean = false;\n\n  private imgRef?: HTMLImageElement;\n\n  componentDidLoad() {\n    // Check if image is already loaded (cached)\n    if (this.imgRef?.complete && this.imgRef?.naturalHeight !== 0) {\n      this.imageLoaded = true;\n    }\n  }\n\n  private handleImageLoad = () => {\n    this.imageLoaded = true;\n    this.imageError = false;\n  };\n\n  private handleImageError = () => {\n    this.imageError = true;\n    this.imageLoaded = false;\n  };\n\n  render() {\n    return (\n      <Host>\n        <div class=\"blog-image-content\">\n          <div class=\"image-container\">\n            {!this.imageLoaded && !this.imageError && (\n              <div class=\"image-placeholder\">\n                <div class=\"spinner\" />\n              </div>\n            )}\n            {this.imageError && (\n              <div class=\"image-error\">\n                <span class=\"error-icon\">üñºÔ∏è</span>\n                <span class=\"error-text\">Failed to load image</span>\n              </div>\n            )}\n            <img\n              ref={(el) => (this.imgRef = el)}\n              src={this.src}\n              alt={this.alt}\n              class={{\n                \"blog-image\": true,\n                loaded: this.imageLoaded,\n                \"fit-contain\": this.objectFit === \"contain\",\n                \"fit-cover\": this.objectFit === \"cover\",\n              }}\n              onLoad={this.handleImageLoad}\n              onError={this.handleImageError}\n            />\n          </div>\n          {this.caption && <div class=\"image-caption\">{this.caption}</div>}\n        </div>\n      </Host>\n    );\n  }\n}\n"],"names":[],"mappings":"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"}