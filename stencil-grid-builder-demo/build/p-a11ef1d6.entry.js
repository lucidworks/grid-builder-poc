import{r as i,h as t}from"./p-4Z_c7dK2.js";import{s,g as e}from"./p-B5eO_qMn.js";import{a as n}from"./p-BL_TKl2v.js";import"./p-Dn6kA53k.js";const a='@charset "UTF-8";.canvas-section-viewer{display:block;width:100%;margin:0;padding:0;}.canvas-section-viewer .grid-container{position:relative;width:100%;background-color:#ffffff;background-image:none !important;overflow:visible}';const r=class{constructor(t){i(this,t);this.renderVersion=0;this.calculatedHeight=400;this.updateCanvasHeight=()=>{if(!this.items||!this.currentViewport){return}this.calculatedHeight=n(this.items,this.currentViewport,this.config)};this.setupResizeObserver=()=>{if(!this.gridContainerRef||this.resizeObserver){return}this.resizeObserver=new ResizeObserver((i=>{requestAnimationFrame((()=>{for(const t of i){const i=t.contentRect.width;if(i>100){s(this.canvasId,i,this.config);this.updateCanvasHeight();this.renderVersion++}}}))}));this.resizeObserver.observe(this.gridContainerRef)}}componentDidLoad(){this.updateCanvasHeight();this.setupResizeObserver()}componentDidUpdate(){if(!this.resizeObserver&&this.gridContainerRef){this.setupResizeObserver()}}disconnectedCallback(){if(this.resizeObserver){this.resizeObserver.disconnect()}}handleItemsChange(){this.updateCanvasHeight()}handleViewportChange(){this.updateCanvasHeight()}render(){var i,s,n;const a=(s=(i=this.config)===null||i===void 0?void 0:i.canvasMinHeight)!==null&&s!==void 0?s:20;const r=e(a,this.config);return t("div",{key:"42c6a5cad32b2b0f3fe7bc0a7f3ee62137bd9a28",class:"canvas-section-viewer","data-canvas-id":this.canvasId},t("div",{key:"de4248d7853c9d6b8a54351a696a4a02fd821f28",class:"grid-container",id:this.canvasId,"data-canvas-id":this.canvasId,style:{backgroundColor:this.backgroundColor||"#ffffff",minHeight:`${r}px`,height:this.calculatedHeight>0?`${this.calculatedHeight}px`:undefined},ref:i=>this.gridContainerRef=i},(n=this.items)===null||n===void 0?void 0:n.map((i=>t("grid-item-wrapper",{key:i.id,item:i,renderVersion:this.renderVersion,config:this.config,componentRegistry:this.componentRegistry,viewerMode:true,currentViewport:this.currentViewport,canvasItems:this.items})))))}static get watchers(){return{items:["handleItemsChange"],currentViewport:["handleViewportChange"]}}};r.style=a;export{r as canvas_section_viewer};
//# sourceMappingURL=p-a11ef1d6.entry.js.map