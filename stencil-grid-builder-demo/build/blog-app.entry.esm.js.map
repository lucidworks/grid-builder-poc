{"version":3,"file":"blog-app.entry.esm.js","sources":["src/demo/components/blog-app/blog-app.scss?tag=blog-app","src/demo/components/blog-app/blog-app.tsx"],"sourcesContent":["blog-app {\n  .blog-app-container {\n    min-height: 100vh;\n    padding: 24px;\n    background: #f8f9fa;\n    box-sizing: border-box; /* Ensure padding is included in width */\n\n    /* Hide canvas headers in preview mode */\n    &.preview-mode {\n      .canvas-header {\n        display: none;\n      }\n    }\n\n\n    .app-header {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 16px 20px;\n      border-radius: 8px;\n      margin-bottom: 24px;\n      background: white;\n      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n\n      .app-header-content {\n        flex: 1;\n\n        .app-title {\n          margin: 0 0 4px 0;\n          color: #212529;\n          font-size: 24px;\n          font-weight: 700;\n        }\n\n        .app-subtitle {\n          margin: 0;\n          color: #6c757d;\n          font-size: 14px;\n        }\n      }\n\n      .global-controls {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n\n        .preview-toggle-btn {\n          padding: 8px 16px;\n          border: 1px solid #10b981;\n          border-radius: 6px;\n          background: white;\n          color: #10b981;\n          cursor: pointer;\n          font-size: 14px;\n          font-weight: 500;\n          transition: all 0.15s;\n\n          &:hover {\n            background: #10b981;\n            color: white;\n          }\n\n          &:active {\n            transform: translateY(1px);\n          }\n        }\n\n        .metadata-undo-redo {\n          display: flex;\n          gap: 6px;\n\n          button {\n            padding: 8px 14px;\n            border: 1px solid #dee2e6;\n            border-radius: 6px;\n            background: #e9ecef;\n            color: #495057;\n            cursor: pointer;\n            font-size: 13px;\n            font-weight: 500;\n            transition: all 0.15s;\n\n            &:hover:not(:disabled) {\n              border-color: #adb5bd;\n              background: #dee2e6;\n            }\n\n            &:active:not(:disabled) {\n              transform: translateY(1px);\n            }\n\n            &:disabled {\n              cursor: not-allowed;\n              opacity: 0.4;\n            }\n          }\n        }\n\n        .add-section-btn {\n          padding: 8px 16px;\n          border: none;\n          border-radius: 6px;\n          background: #4a90e2;\n          color: white;\n          cursor: pointer;\n          font-size: 14px;\n          font-weight: 500;\n          transition: background 0.15s;\n\n          &:hover {\n            background: #357abd;\n          }\n\n          &:active {\n            transform: translateY(1px);\n          }\n        }\n      }\n    }\n\n    /* Canvas header styles moved to canvas-header component */\n\n    /* Demo Layout - Categorized Palettes + Grid Builder */\n    .demo-layout {\n      display: flex;\n      width: 100%;\n      gap: 0; /* No gap - sidebar has border-right */\n    }\n\n    /* Categorized Palette Sidebar */\n    .categorized-palette-sidebar {\n      width: 280px;\n      flex-shrink: 0; /* Don't shrink below 280px */\n      border-right: 1px solid #ddd;\n      background: white;\n      overflow-y: auto;\n      max-height: calc(100vh - 120px); /* Account for header */\n\n      .palette-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: 20px 20px 16px;\n        border-bottom: 1px solid #f0f0f0;\n\n        .palette-title {\n          padding: 0;\n          margin: 0;\n          color: #333;\n          font-size: 18px;\n          font-weight: 600;\n        }\n\n        .sidebar-collapse-btn {\n          display: flex;\n          width: 28px;\n          height: 28px;\n          align-items: center;\n          justify-content: center;\n          padding: 0;\n          border: 1px solid #dee2e6;\n          border-radius: 4px;\n          background: white;\n          color: #495057;\n          cursor: pointer;\n          font-size: 14px;\n          transition: all 0.15s;\n\n          &:hover {\n            border-color: #4a90e2;\n            background: #f8f9fa;\n            color: #4a90e2;\n          }\n\n          &:active {\n            transform: scale(0.95);\n          }\n        }\n      }\n    }\n\n    /* Floating expand button (when sidebar collapsed) */\n    .sidebar-expand-btn {\n      position: fixed;\n      top: 200px;\n      left: 24px;\n      z-index: 1000;\n      display: flex;\n      width: 40px;\n      height: 40px;\n      align-items: center;\n      justify-content: center;\n      padding: 0;\n      border: 1px solid #4a90e2;\n      border-radius: 6px;\n      background: white;\n      box-shadow: 0 2px 8px rgba(74, 144, 226, 0.2);\n      color: #4a90e2;\n      cursor: pointer;\n      font-size: 16px;\n      transition: all 0.15s;\n\n      &:hover {\n        background: #4a90e2;\n        box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);\n        color: white;\n        transform: translateX(2px);\n      }\n\n      &:active {\n        transform: translateX(2px) scale(0.95);\n      }\n    }\n\n    /* Category Sections */\n    .palette-category {\n      border-bottom: 1px solid #f0f0f0;\n\n      .category-header {\n        display: flex;\n        align-items: center;\n        padding: 12px 20px;\n        background: #f8f9fa;\n        cursor: pointer;\n        transition: background 0.15s;\n        user-select: none;\n\n        &:hover {\n          background: #e9ecef;\n        }\n\n        .category-icon {\n          width: 16px;\n          color: #6c757d;\n          font-size: 12px;\n          font-weight: bold;\n        }\n\n        .category-name {\n          margin-left: 8px;\n          color: #495057;\n          font-size: 14px;\n          font-weight: 500;\n        }\n      }\n\n      /* Override palette default styles for chromeless mode */\n      component-palette {\n        .palette {\n          width: 100%;\n          padding: 12px 20px;\n          border: none;\n          background: white;\n        }\n\n        /* Remove blue background from palette items with custom components */\n        .palette-item:has(custom-palette-item) {\n          background: transparent;\n          padding: 0;\n          margin-bottom: 12px;\n        }\n\n        .palette-item {\n          margin-bottom: 8px;\n          font-size: 13px;\n        }\n      }\n    }\n\n    /* Layer Panel Section */\n    .palette-section {\n      border-top: 2px solid #e0e0e0;\n      background: #fafafa;\n\n      .palette-section-header {\n        padding: 12px 20px;\n        background: #f8f9fa;\n        border-bottom: 1px solid #e0e0e0;\n\n        .palette-section-title {\n          margin: 0;\n          color: #495057;\n          font-size: 14px;\n          font-weight: 600;\n        }\n      }\n\n      .layer-panel-container {\n        height: 400px; // Fixed height for layer panel\n        overflow: hidden;\n\n        layer-panel {\n          display: block;\n          height: 100%;\n        }\n      }\n    }\n\n    /* Grid Builder Area */\n    .grid-builder-area {\n      flex: 1; /* Take remaining space */\n      min-width: 0; /* Allow flex shrinking - critical for preventing overflow */\n      overflow-x: auto; /* Allow scrolling if content is too wide */\n\n      /* Grid Builder - canvas area styling */\n      grid-builder {\n        display: block;\n        width: 100%;\n        min-height: 600px;\n        box-sizing: border-box;\n\n        /* Ensure main area uses available width */\n        .main-area {\n          width: 100%;\n          box-sizing: border-box;\n        }\n\n        /* Ensure canvas area constrains width */\n        .canvas-area {\n          width: 100%;\n          min-width: 0; /* Allow shrinking */\n          overflow-x: hidden; /* Prevent horizontal scroll */\n          box-sizing: border-box;\n        }\n\n        /* Ensure canvases fit within container */\n        .canvases-container {\n          width: 100%;\n          max-width: 100%;\n          box-sizing: border-box;\n        }\n\n        /* Ensure individual canvas sections fit */\n        canvas-section {\n          display: block;\n          width: 100%;\n          max-width: 100%;\n          box-sizing: border-box;\n\n          /* Ensure grid container inside canvas-section takes full width */\n          .grid-container {\n            width: 100%;\n            box-sizing: border-box;\n          }\n        }\n      }\n\n      /* Grid Viewer - same sizing constraints as grid-builder */\n      grid-viewer {\n        display: block;\n        width: 100%;\n        min-height: 600px;\n        box-sizing: border-box;\n\n        /* Override grid-viewer's height: 100% to prevent layout issues */\n        .grid-viewer-container {\n          height: auto;\n          min-height: 600px;\n          width: 100%;\n          box-sizing: border-box;\n        }\n\n        /* Ensure canvas area uses full width */\n        .canvas-area {\n          width: 100%;\n          min-width: 0;\n          overflow-x: hidden;\n          box-sizing: border-box;\n          height: auto;\n        }\n\n        /* Ensure canvases fit within container */\n        .canvases-container {\n          width: 100%;\n          max-width: 100%;\n          box-sizing: border-box;\n        }\n\n        /* Ensure individual canvas sections fit */\n        canvas-section-viewer {\n          display: block;\n          width: 100%;\n          max-width: 100%;\n          box-sizing: border-box;\n\n          /* Ensure grid container inside canvas-section-viewer takes full width */\n          .grid-container {\n            width: 100%;\n            box-sizing: border-box;\n          }\n        }\n      }\n    }\n  }\n}\n","import { Component, h, State, Watch } from \"@stencil/core\";\nimport {\n  blogComponentDefinitions,\n  contentComponents,\n  interactiveComponents,\n  mediaComponents,\n} from \"../../component-definitions\";\nimport { GridBuilderAPI, CanvasHeaderProps } from \"../../../types/api\";\nimport { SectionEditorData } from \"../../types/section-editor-data\";\nimport { ConfirmationModalData } from \"../../types/confirmation-modal-data\";\nimport { DeletionHookContext } from \"../../../types/deletion-hook\";\nimport {\n  getGridSizeVertical,\n  clearGridSizeCache,\n} from \"../../../utils/grid-calculations\";\nimport { domCache } from \"../../../utils/dom-cache\";\nimport { setActiveCanvas } from \"../../../services/state-manager\";\n\n// Pre-import drag clone components to ensure they're eagerly loaded (not lazy)\nimport \"../blog-header-drag-clone/blog-header-drag-clone\";\nimport \"../blog-article-drag-clone/blog-article-drag-clone\";\nimport \"../blog-button-drag-clone/blog-button-drag-clone\";\nimport \"../blog-image-drag-clone/blog-image-drag-clone\";\nimport \"../image-gallery-drag-clone/image-gallery-drag-clone\";\nimport \"../dashboard-widget-drag-clone/dashboard-widget-drag-clone\";\nimport \"../live-data-drag-clone/live-data-drag-clone\";\n\n/**\n * Blog App Demo - Host Application for grid-builder Library\n * ==========================================================\n *\n * This component demonstrates how to build a complete page builder application\n * using the @lucidworks/stencil-grid-builder library.\n *\n * Key Library Features Demonstrated:\n * ----------------------------------\n *\n * 1. **Component Registry** (components prop)\n *    - Pass array of ComponentDefinition objects to grid-builder\n *    - Library uses these to render palette and components\n *    - See: blogComponentDefinitions in component-definitions.tsx\n *\n * 2. **Initial State** (initialState prop)\n *    - Pre-populate canvases with components\n *    - Define layouts for desktop and mobile viewports\n *    - Library manages state updates via internal store\n *\n * 3. **Canvas Metadata** (canvasMetadata prop)\n *    - Host app owns presentation metadata (titles, colors, settings)\n *    - Library owns placement state (items, layouts, zIndex)\n *    - Separation of concerns pattern\n *\n * 4. **Deletion Hook** (onBeforeDelete prop)\n *    - Intercept component deletion requests\n *    - Show confirmation modals before deletion\n *    - Make API calls or run custom validation\n *    - Return Promise<boolean> to approve/cancel deletion\n *\n * 5. **Grid Builder API** (configurable storage via api-ref prop)\n *    - Programmatic control of grid state\n *    - Methods: addCanvas, removeCanvas, undo, redo, etc.\n *    - Event system: canvasAdded, canvasRemoved, etc.\n *    - **Demo uses custom storage**: api-ref={{ target: this, key: 'api' }}\n *    - API stored on component instance (this.api) instead of window\n *\n * 6. **Event System** (canvas-click, custom events)\n *    - Listen to library events for state synchronization\n *    - React to user interactions (canvas clicks, etc.)\n *\n * 7. **Multiple Palettes Pattern** (Demonstrated in this demo)\n *    - Multiple `<component-palette>` instances with different components\n *    - Categorized/grouped components (Content, Interactive, etc.)\n *    - Collapsible category sections\n *    - All palettes drag to the same canvases\n *\n * 8. **Custom Config Panel** (Demonstrated with custom-config-panel component)\n *    - Replace library's default config panel with custom UI\n *    - Access grid state via API (this.api in this demo)\n *    - Implement live preview for real-time updates\n *    - Support cancel/revert functionality\n *    - Subscribe to componentDeleted events for auto-close\n *    - See: src/demo/components/custom-config-panel/\n *\n * Architecture Pattern:\n * --------------------\n * - Library: Manages component placement, drag/drop, resize, undo/redo\n * - Host App: Manages canvas metadata, custom UI (headers, modals), business logic\n *\n * ## Multiple Palettes Pattern (Featured in this Demo)\n *\n * **Why use multiple palettes:**\n * - Better component organization (group by category, purpose, or feature)\n * - Collapsible sections save screen space\n * - Easier to find components in large libraries\n * - Matches common UI patterns (like the example mockup)\n *\n * **How it works:**\n * 1. Create categorized component arrays:\n *    ```typescript\n *    const contentComponents = [header, article, ...];\n *    const interactiveComponents = [button, link, ...];\n *    ```\n *\n * 2. Render multiple `<component-palette>` instances:\n *    ```typescript\n *    <component-palette components={contentComponents} showHeader={false} />\n *    <component-palette components={interactiveComponents} showHeader={false} />\n *    ```\n *\n * 3. All palettes work with the same canvases:\n *    - Each palette initializes its own drag handlers\n *    - All drag to the same `<canvas-section>` dropzones\n *    - Component type (not palette source) determines behavior\n *    - grid-builder registers ALL components for rendering\n *\n * **Key Points:**\n * - Pass all components to grid-builder (for type registration)\n * - Use chromeless mode (`showHeader={false}`) for custom headers\n * - Each palette manages its own drag/drop independently\n * - Canvases accept drops from any palette\n * - No coordination needed between palettes\n *\n * **Implementation in this demo:**\n * - Content category: Headers, Articles (text-based components)\n * - Interactive category: Buttons, CTAs (action components)\n * - Collapsible sections with expand/collapse state\n * - Clean categorized UI matching modern design patterns\n *\n * ## Custom Config Panel Pattern (Featured in this Demo)\n *\n * **Why use a custom config panel:**\n * - Match your application's design system and branding\n * - Add custom validation or business logic\n * - Integrate with other parts of your application\n * - Control the user experience and workflow\n *\n * **How it works:**\n * 1. Disable the library's default config panel using the showConfigPanel prop:\n *    ```typescript\n *    <grid-builder\n *      components={components}\n *      showConfigPanel={false}  // Hide default config panel\n *      ...\n *    />\n *    ```\n \n \n \n \n \n \n \n *\n * 2. Access the Grid Builder API:\n *    ```typescript\n *    const api = (window as any).gridBuilderAPI;\n *    ```\n *\n * 3. Listen for item-click events:\n *    ```typescript\n *    document.addEventListener('item-click', (event: CustomEvent) => {\n *      const { itemId, canvasId } = event.detail;\n *      // Open your custom panel\n *    });\n *    ```\n *\n * 4. Implement live preview by directly updating state:\n *    ```typescript\n *    const state = api.getState();\n *    const canvas = state.canvases[canvasId];\n *    canvas.items[itemIndex] = {\n *      ...canvas.items[itemIndex],\n *      name: newValue\n *    };\n *    // Trigger reactivity\n *    state.canvases = { ...state.canvases };\n *    ```\n *\n * 5. Implement cancel/revert by storing original state:\n *    ```typescript\n *    // On panel open, store original values\n *    this.originalState = {\n *      name: item.name,\n *      config: { ...item.config }\n *    };\n *\n *    // On cancel, restore original values\n *    api.updateConfig(itemId, this.originalState.config);\n *    // Restore name using same pattern as live preview\n *    ```\n *\n * 6. Subscribe to componentDeleted for auto-close:\n *    ```typescript\n *    api.on('componentDeleted', (event) => {\n *      if (event.itemId === this.selectedItemId) {\n *        this.closePanel();\n *      }\n *    });\n *    ```\n *\n * **Key Library APIs Used:**\n * - `window.gridBuilderAPI` - Global API instance\n * - `api.getState()` - Get current grid state for direct manipulation\n * - `api.getItem(itemId)` - Find item across all canvases\n * - `api.updateConfig(itemId, config)` - Update item configuration\n * - `api.on(event, handler)` - Subscribe to library events\n * - `api.off(event, handler)` - Unsubscribe from library events\n *\n * **Event-driven Integration:**\n * - `item-click` - Fired when user clicks a component (use document.addEventListener)\n * - `componentDeleted` - Fired when a component is deleted (use api.on)\n * - Manual event listeners required for custom events on document\n *\n * **Implementation in this demo:**\n * - See `custom-config-panel.tsx` for complete implementation\n * - Purple gradient styling matching blog theme\n * - Live preview for component name and config fields\n * - Cancel button reverts all changes\n * - Save button persists changes\n * - Auto-closes when selected component is deleted\n */\n\n@Component({\n  tag: \"blog-app\",\n  styleUrl: \"blog-app.scss\",\n  shadow: false,\n})\nexport class BlogApp {\n  /**\n   * Grid Builder API instance (accessed from window.gridBuilderAPI)\n   * Must be @State to trigger re-render when API becomes available\n   */\n  @State() private api!: GridBuilderAPI;\n\n  /**\n   * Watch API Property for Changes\n   * --------------------------------\n   *\n   * StencilJS Pattern: Use @Watch decorator for reactive initialization\n   *\n   * When API is assigned from window.gridBuilderAPI, this watcher automatically\n   * triggers setupGridBuilderIntegration(). This replaces polling pattern with\n   * reactive state management.\n   *\n   * Fires when: componentDidLoad assigns this.api = window.gridBuilderAPI\n   */\n  @Watch(\"api\")\n  handleApiChange(newApi: GridBuilderAPI) {\n    if (newApi) {\n      console.log(\"ðŸ”§ blog-app API watcher triggered, initializing...\");\n      this.setupGridBuilderIntegration();\n    }\n  }\n\n  /**\n   * Local undo/redo state (synced from API)\n   * ------------------------------------\n   *\n   * Why local state instead of imported undoRedoState:\n   * - Stencil reactivity doesn't work across module boundaries\n   * - When demo is built separately from library, imported store is different instance\n   * - Local @State() properties trigger re-renders reliably\n   *\n   * Synchronization:\n   * - Updated via API events in setupGridBuilderIntegration()\n   * - Listens to stateChanged event to update button states\n   */\n  @State() private canUndo: boolean = false;\n  @State() private canRedo: boolean = false;\n\n  private sectionCounter = 1;\n\n  /**\n   * Grid Configuration\n   * ------------------\n   *\n   * Configuration for grid-builder component.\n   * Stored as class property so it can be reused in render calculations.\n   */\n  private gridConfig = {\n    enableAnimations: true,\n    animationDuration: 100,\n  };\n\n  /**\n   * Event Handler References for Cleanup\n   * -------------------------------------\n   *\n   * Store references to event handlers so they can be removed in disconnectedCallback.\n   * This prevents memory leaks when the component is unmounted.\n   */\n  private gridBuilder: HTMLElement | null = null;\n  private eventsToWatch = [\n    \"componentAdded\",\n    \"componentDeleted\",\n    \"componentDragged\",\n    \"componentResized\",\n    \"componentsBatchAdded\",\n    \"componentsBatchDeleted\",\n    \"canvasAdded\",\n    \"canvasRemoved\",\n    \"undoExecuted\",\n    \"redoExecuted\",\n  ];\n\n  /**\n   * Canvas Metadata State\n   * ---------------------\n   *\n   * Library Feature: canvasMetadata prop (optional)\n   *\n   * Purpose:\n   * - Host app owns presentation metadata (titles, colors, custom settings)\n   * - Library owns placement state (items, layouts, zIndex)\n   * - This separation allows library to focus on grid logic\n   *\n   * Pattern:\n   * - Library fires canvasAdded/canvasRemoved events\n   * - Host app syncs metadata when canvases are added/removed\n   * - Host app passes metadata to library via canvasMetadata prop\n   * - Library passes backgroundColor to canvas-section components\n   *\n   * Note on Undo/Redo:\n   * - Canvas add/remove operations support undo/redo (handled by library)\n   * - Color changes are immediate (no undo for now - could be added)\n   */\n  @State() canvasMetadata: Record<\n    string,\n    { title: string; backgroundColor: string }\n  > = {\n    \"hero-section\": {\n      title: \"Hero Section\",\n      backgroundColor: \"#f0f4f8\",\n    },\n    \"articles-grid\": {\n      title: \"Articles Grid\",\n      backgroundColor: \"#ffffff\",\n    },\n    \"footer-section\": {\n      title: \"Footer Section\",\n      backgroundColor: \"#e8f0f2\",\n    },\n  };\n\n  /**\n   * Section Editor Panel State\n   * ---------------------------\n   *\n   * Demo-specific state for section editing UI.\n   * This is NOT part of the library - it's custom host app UI.\n   */\n  @State() isPanelOpen: boolean = false;\n  @State() editingSection: SectionEditorData | null = null;\n\n  /**\n   * Confirmation Modal State\n   * -------------------------\n   *\n   * Library Feature: Deletion Hook System\n   *\n   * This state demonstrates how to use the library's onBeforeDelete hook\n   * to show a confirmation modal before component deletion.\n   *\n   * Pattern:\n   * 1. Library calls onBeforeDelete with deletion context\n   * 2. Host app returns Promise<boolean>\n   * 3. Host app shows modal and stores Promise resolve function\n   * 4. User confirms/cancels modal\n   * 5. Host app calls resolve(true/false)\n   * 6. Library proceeds with or cancels deletion\n   *\n   * Note: The modal component itself is NOT part of the library.\n   * This allows you to use any modal library (Material, Bootstrap, etc.)\n   */\n  @State() isConfirmModalOpen: boolean = false;\n  @State() confirmModalData: ConfirmationModalData | null = null;\n  private deleteResolve: ((value: boolean) => void) | null = null;\n\n  /**\n   * Categorized Palette State\n   * --------------------------\n   *\n   * Demonstrates multiple palette pattern:\n   * - Each category has its own expanded/collapsed state\n   * - Multiple palettes render independently\n   * - All palettes drag to the same canvases\n   * - Enables better component organization\n   */\n  @State() categoryStates: Record<string, boolean> = {\n    content: true, // Content category expanded by default\n    interactive: true, // Interactive category expanded by default\n    media: true, // Media category expanded by default\n  };\n\n  /**\n   * View Mode State\n   * ----------------\n   *\n   * Toggle between edit mode (grid builder) and preview mode (viewer).\n   * - Edit mode: Shows grid, palette, resize handles, config panel\n   * - Preview mode: Shows only the final rendered components\n   */\n  @State() isPreviewMode: boolean = false;\n\n  /**\n   * Current Grid State (for viewer mode)\n   * -------------------------------------\n   *\n   * Stores the current grid state when switching to preview mode.\n   * This ensures the viewer has the latest state from the builder.\n   */\n  @State() currentGridState: any = null;\n\n  /**\n   * Sidebar Collapsed State\n   * ------------------------\n   *\n   * Toggle component palette sidebar visibility.\n   * - Collapsed: Hides sidebar, gives more space to canvas\n   * - Expanded: Shows sidebar with components (default)\n   */\n  @State() isSidebarCollapsed: boolean = false;\n\n  /**\n   * Preview Metadata State\n   * -----------------------\n   *\n   * Temporary preview values for live preview (replaces DOM manipulation).\n   * - Stores title/backgroundColor during section editing\n   * - Merged with canvasMetadata for rendering\n   * - Cleared when panel closes\n   */\n  @State() previewMetadata: Record<\n    string,\n    { title?: string; backgroundColor?: string }\n  > = {};\n\n  componentDidLoad() {\n    // Grid-builder exposes API on window after componentDidLoad\n    // Use requestAnimationFrame to wait for next render cycle\n    requestAnimationFrame(() => {\n      if ((window as any).gridBuilderAPI) {\n        console.log(\"ðŸ”§ blog-app found API on window, assigning...\");\n        this.api = (window as any).gridBuilderAPI;\n      } else {\n        console.warn(\"âš ï¸ API not available on window.gridBuilderAPI\");\n      }\n    });\n\n    // Listen for palette-item-click events from external palettes\n    // Note: External palettes are siblings to grid-builder, so @Listen decorator\n    // in grid-builder can't catch these events. We need to listen on document.\n    document.addEventListener(\n      \"palette-item-click\",\n      this.handleExternalPaletteClick as EventListener,\n    );\n  }\n\n  /**\n   * Lifecycle: Component Disconnected\n   * ----------------------------------\n   *\n   * StencilJS Pattern: Clean up event listeners in disconnectedCallback\n   *\n   * This lifecycle method is called when the component is removed from the DOM.\n   * Clean up all event listeners to prevent memory leaks.\n   *\n   * Event Listeners to Clean Up:\n   * - DOM event listener on grid-builder element (canvas-click)\n   * - API event listeners (canvasAdded, canvasRemoved, undo/redo events)\n   */\n  disconnectedCallback() {\n    console.log(\n      \"ðŸ”§ blog-app disconnectedCallback - cleaning up event listeners\",\n    );\n\n    // Remove DOM event listener\n    if (this.gridBuilder) {\n      this.gridBuilder.removeEventListener(\n        \"canvas-click\",\n        this.handleCanvasClick as EventListener,\n      );\n      this.gridBuilder = null;\n    }\n\n    // Remove palette-item-click listener\n    document.removeEventListener(\n      \"palette-item-click\",\n      this.handleExternalPaletteClick as EventListener,\n    );\n\n    // Remove API event listeners\n    if (this.api) {\n      this.api.off(\"canvasAdded\", this.handleCanvasAdded);\n      this.api.off(\"canvasRemoved\", this.handleCanvasRemoved);\n\n      // Remove undo/redo event listeners\n      this.eventsToWatch.forEach((eventName) => {\n        this.api.off(eventName, this.syncUndoRedoState);\n      });\n    }\n\n    console.log(\"  âœ… Event listeners cleaned up\");\n  }\n\n  private setupGridBuilderIntegration() {\n    console.log(\"ðŸ”§ blog-app setupGridBuilderIntegration called\");\n\n    /**\n     * Listen to canvas-click Events\n     * ------------------------------\n     *\n     * Library Feature: Custom Events\n     *\n     * The library fires custom events when users interact with the grid:\n     * - canvas-click: When user clicks canvas background\n     * - component-added: When component is added to grid\n     * - component-removed: When component is removed from grid\n     * - etc.\n     *\n     * These events allow host apps to respond to user interactions.\n     *\n     * Note: Store grid-builder reference for cleanup in disconnectedCallback.\n     */\n    this.gridBuilder = document.querySelector(\"grid-builder\");\n    if (this.gridBuilder) {\n      this.gridBuilder.addEventListener(\n        \"canvas-click\",\n        this.handleCanvasClick as EventListener,\n      );\n    }\n\n    /**\n     * Subscribe to Library Events\n     * ----------------------------\n     *\n     * Library Feature: Event System (GridBuilderAPI.on)\n     *\n     * The API provides an event system for state change notifications:\n     * - canvasAdded: Fired when canvas is added (including via undo/redo)\n     * - canvasRemoved: Fired when canvas is removed (including via undo/redo)\n     * - stateChanged: Fired on any state change\n     *\n     * This allows host apps to sync their metadata with library state.\n     *\n     * Pattern:\n     * - Library manages placement state (items, layouts, zIndex)\n     * - Library fires events when canvases are added/removed\n     * - Host app adds/removes metadata in response to events\n     * - This keeps host app metadata in sync with library state\n     *\n     * Note: Use class method handlers for cleanup in disconnectedCallback.\n     */\n    this.api.on(\"canvasAdded\", this.handleCanvasAdded);\n    this.api.on(\"canvasRemoved\", this.handleCanvasRemoved);\n\n    /**\n     * Sync undo/redo button state\n     * -----------------------------\n     *\n     * Since Stencil reactivity doesn't work across module boundaries,\n     * we listen to library events that indicate undo/redo state changes.\n     *\n     * Events that change undo/redo state:\n     * - componentAdded, componentDeleted (modify history)\n     * - componentDragged, componentResized (modify history)\n     * - componentsBatchAdded, componentsBatchDeleted (modify history)\n     * - canvasAdded, canvasRemoved (modify history)\n     *\n     * This ensures undo/redo buttons update correctly in the demo.\n     *\n     * Note: Use class method handler for cleanup in disconnectedCallback.\n     */\n    // Initial sync\n    this.syncUndoRedoState();\n\n    // Listen to all events that modify history\n    this.eventsToWatch.forEach((eventName) => {\n      this.api.on(eventName, this.syncUndoRedoState);\n    });\n  }\n\n  private syncUndoRedoState = () => {\n    if (!this.api) return;\n\n    const newCanUndo = this.api.canUndo();\n    const newCanRedo = this.api.canRedo();\n\n    // Only update if changed (avoid unnecessary re-renders)\n    if (this.canUndo !== newCanUndo) {\n      this.canUndo = newCanUndo;\n    }\n    if (this.canRedo !== newCanRedo) {\n      this.canRedo = newCanRedo;\n    }\n  };\n\n  /**\n   * Canvas Click Event Handler\n   * ----------------------------\n   *\n   * Handles canvas-click events from grid-builder.\n   * Stored as class method for cleanup in disconnectedCallback.\n   */\n  private handleCanvasClick = (event: CustomEvent) => {\n    const { canvasId } = event.detail;\n    console.log(\"Canvas clicked:\", canvasId);\n    // In a real app, this would show a canvas settings panel\n    // For now, we just log it to demonstrate the event\n  };\n\n  /**\n   * External Palette Click Handler\n   * --------------------------------\n   *\n   * Handles palette-item-click events from external component-palette instances.\n   * These palettes are siblings to grid-builder (not children), so we need\n   * to listen on document instead of relying on grid-builder's @Listen decorator.\n   *\n   * This demonstrates the pattern for using multiple external palettes with\n   * grid-builder in custom layouts.\n   */\n  private handleExternalPaletteClick = async (\n    event: CustomEvent<{ componentType: string }>,\n  ) => {\n    if (!this.api) {\n      console.warn(\"API not ready for palette click\");\n      return;\n    }\n\n    const { componentType } = event.detail;\n    console.log(\"ðŸ–±ï¸ External palette click:\", componentType);\n\n    // The grid-builder's internal logic will handle:\n    // - Finding/creating active canvas\n    // - Finding free space\n    // - Adding component via API\n    // - Visual feedback (pulse, ghost outline, fade-in)\n    //\n    // We just need to ensure the event reaches grid-builder.\n    // Since we're listening on document, we need to manually trigger\n    // grid-builder's handler by dispatching to it directly.\n\n    const gridBuilderElement = document.querySelector(\"grid-builder\");\n    if (gridBuilderElement) {\n      // Re-dispatch event to grid-builder so its @Listen decorator catches it\n      // IMPORTANT: bubbles: false prevents infinite loop (event bubbling back to document)\n      const newEvent = new CustomEvent(\"palette-item-click\", {\n        detail: { componentType },\n        bubbles: false, // Don't bubble - prevents infinite loop\n        composed: true,\n      });\n      gridBuilderElement.dispatchEvent(newEvent);\n    }\n  };\n\n  /**\n   * Canvas Added Event Handler\n   * ---------------------------\n   *\n   * Handles canvasAdded events from API.\n   * Adds metadata for newly created canvases.\n   */\n  private handleCanvasAdded = (event: any) => {\n    const { canvasId } = event;\n    // Add metadata for new canvas if it doesn't exist\n    if (!this.canvasMetadata[canvasId]) {\n      const title = `Custom Section ${this.sectionCounter++}`;\n      this.canvasMetadata = {\n        ...this.canvasMetadata,\n        [canvasId]: {\n          title,\n          backgroundColor: \"#f5f5f5\",\n        },\n      };\n    }\n  };\n\n  /**\n   * Canvas Removed Event Handler\n   * -----------------------------\n   *\n   * Handles canvasRemoved events from API.\n   * Removes metadata when canvases are deleted.\n   */\n  private handleCanvasRemoved = (event: any) => {\n    const { canvasId } = event;\n    console.log(\"ðŸ—‘ï¸ canvasRemoved event received:\", canvasId);\n\n    // Remove metadata when canvas is removed\n    // This keeps metadata in sync with library state\n    // Headers automatically update via reactive rendering\n    const updated = { ...this.canvasMetadata };\n    delete updated[canvasId];\n    this.canvasMetadata = updated;\n    console.log(\"  âœ… Metadata removed for:\", canvasId);\n  };\n\n  private handleOpenSectionEditor = (canvasId: string) => {\n    const metadata = this.canvasMetadata[canvasId];\n    if (metadata) {\n      this.editingSection = {\n        canvasId,\n        title: metadata.title,\n        backgroundColor: metadata.backgroundColor,\n      };\n      this.isPanelOpen = true;\n    }\n  };\n\n  private handleClosePanel = () => {\n    this.isPanelOpen = false;\n    this.editingSection = null;\n    // Clear preview state when closing panel\n    this.previewMetadata = {};\n  };\n\n  private handleUpdateSection = (\n    event: CustomEvent<{\n      canvasId: string;\n      title: string;\n      backgroundColor: string;\n    }>,\n  ) => {\n    const { canvasId, title, backgroundColor } = event.detail;\n    this.canvasMetadata = {\n      ...this.canvasMetadata,\n      [canvasId]: {\n        title,\n        backgroundColor,\n      },\n    };\n    // Clear preview state for this canvas after saving\n    const { [canvasId]: _, ...rest } = this.previewMetadata;\n    this.previewMetadata = rest;\n  };\n\n  /**\n   * Preview Color Change Handler\n   * ------------------------------\n   *\n   * Handles live preview of background color changes using reactive state.\n   * Updates preview state which triggers re-render with new color.\n   * Allows real-time preview while editing, with revert on cancel.\n   */\n  private handlePreviewColorChange = (\n    event: CustomEvent<{ canvasId: string; backgroundColor: string }>,\n  ) => {\n    const { canvasId, backgroundColor } = event.detail;\n    // Update preview state (triggers re-render)\n    this.previewMetadata = {\n      ...this.previewMetadata,\n      [canvasId]: {\n        ...this.previewMetadata[canvasId],\n        backgroundColor,\n      },\n    };\n  };\n\n  /**\n   * Preview Title Change Handler\n   * -----------------------------\n   *\n   * Handles live preview of section title changes using reactive state.\n   * Updates preview state which triggers re-render with new title.\n   * Allows real-time preview while editing, with revert on cancel.\n   */\n  private handlePreviewTitleChange = (\n    event: CustomEvent<{ canvasId: string; title: string }>,\n  ) => {\n    const { canvasId, title } = event.detail;\n    // Update preview state (triggers re-render)\n    this.previewMetadata = {\n      ...this.previewMetadata,\n      [canvasId]: {\n        ...this.previewMetadata[canvasId],\n        title,\n      },\n    };\n  };\n\n  /**\n   * Deletion Hook Handler\n   * ----------------------\n   *\n   * Library Feature: onBeforeDelete Hook (grid-builder prop)\n   *\n   * This is the most important demonstration in this demo. It shows how to use\n   * the library's deletion hook system to implement custom deletion workflows.\n   *\n   * What the Library Provides:\n   * - onBeforeDelete prop on grid-builder component\n   * - Hook receives DeletionHookContext with item data\n   * - Hook returns boolean or Promise<boolean>\n   * - Library waits for hook approval before deleting\n   * - If hook returns false, deletion is cancelled\n   * - If hook returns true, deletion proceeds\n   *\n   * What the Host App Provides:\n   * - This hook handler function\n   * - Confirmation modal component (any modal library works)\n   * - Custom deletion logic (API calls, validation, etc.)\n   *\n   * How It Works:\n   * 1. User clicks delete button on component\n   * 2. Library calls this hook with deletion context\n   * 3. Hook returns a Promise (doesn't resolve immediately)\n   * 4. Hook shows confirmation modal\n   * 5. User confirms or cancels\n   * 6. Hook resolves Promise with true/false\n   * 7. Library proceeds with or cancels deletion\n   *\n   * Why This Pattern:\n   * - Keeps modal UI out of library (use any modal you want)\n   * - Supports async operations (API calls, confirmations)\n   * - Gives host app full control over deletion workflow\n   * - Backward compatible (no hook = immediate deletion)\n   *\n   * Example Use Cases:\n   * - Confirmation modals (this demo)\n   * - API calls before deletion\n   * - Permission checks\n   * - Validation logic\n   * - Analytics tracking\n   */\n  private handleBeforeDelete = (\n    context: DeletionHookContext,\n  ): Promise<boolean> => {\n    return new Promise((resolve) => {\n      // Store the Promise resolve function\n      // We'll call this from the modal confirm/cancel handlers\n      this.deleteResolve = resolve;\n\n      // Extract component info from deletion context\n      // Context provides: item (GridItem), canvasId, itemId\n      const componentType = context.item.type;\n      const componentName = context.item.name || componentType;\n\n      // Show confirmation modal with component info\n      // This is demo-specific - you can use any modal library\n      this.confirmModalData = {\n        title: \"Delete Component?\",\n        message: `Are you sure you want to delete \"${componentName}\"? This action cannot be undone.`,\n      };\n      this.isConfirmModalOpen = true;\n\n      // Promise won't resolve until user confirms/cancels\n      // The library will wait for this Promise before proceeding\n    });\n  };\n\n  /**\n   * Confirm Deletion Handler\n   * -------------------------\n   *\n   * Called when user clicks \"Delete\" button in confirmation modal.\n   * Resolves the deletion hook Promise with `true` to proceed with deletion.\n   */\n  private handleConfirmDelete = () => {\n    this.isConfirmModalOpen = false;\n    this.confirmModalData = null;\n    if (this.deleteResolve) {\n      this.deleteResolve(true); // Tell library to proceed with deletion\n      this.deleteResolve = null;\n    }\n  };\n\n  /**\n   * Cancel Deletion Handler\n   * ------------------------\n   *\n   * Called when user clicks \"Cancel\" button in confirmation modal.\n   * Resolves the deletion hook Promise with `false` to cancel deletion.\n   */\n  private handleCancelDelete = () => {\n    this.isConfirmModalOpen = false;\n    this.confirmModalData = null;\n    if (this.deleteResolve) {\n      this.deleteResolve(false); // Tell library to cancel deletion\n      this.deleteResolve = null;\n    }\n  };\n\n  private handleAddSection = () => {\n    if (!this.api) {\n      console.error(\"API not ready\");\n      return;\n    }\n\n    const newCanvasId = `custom-section-${this.sectionCounter}`;\n\n    // Add canvas via library API (includes undo/redo)\n    this.api.addCanvas(newCanvasId);\n\n    // Metadata will be added automatically via canvasAdded event listener\n  };\n\n  private handleDeleteSection = (canvasId: string) => {\n    if (!this.api) {\n      console.error(\"API not ready\");\n      return;\n    }\n\n    // Prevent deleting initial sections\n    if (\n      [\"hero-section\", \"articles-grid\", \"footer-section\"].includes(canvasId)\n    ) {\n      alert(\"Cannot delete initial sections\");\n      return;\n    }\n\n    // Remove canvas via library API (includes undo/redo)\n    this.api.removeCanvas(canvasId);\n\n    // Metadata will be removed automatically via canvasRemoved event listener\n    // Header will also be removed in the canvasRemoved event listener\n  };\n\n  /**\n   * Handle section deletion from editor panel\n   */\n  private handleDeleteSectionFromPanel = (\n    event: CustomEvent<{ canvasId: string }>,\n  ) => {\n    const { canvasId } = event.detail;\n    this.handleDeleteSection(canvasId);\n    // Close the panel (already handled in section-editor-panel, but ensure it's closed)\n    this.isPanelOpen = false;\n  };\n\n  /**\n   * Toggle Category Collapse/Expand\n   * --------------------------------\n   *\n   * Demonstrates state management for collapsible categories.\n   * Each category (content, interactive) can be independently toggled.\n   */\n  private toggleCategory = (category: string) => {\n    this.categoryStates = {\n      ...this.categoryStates,\n      [category]: !this.categoryStates[category],\n    };\n  };\n\n  /**\n   * Handle Category Header Keyboard Events\n   * ----------------------------------------\n   *\n   * Accessibility: Support keyboard navigation for category headers.\n   * - Enter key: Toggle category expand/collapse\n   * - Space key: Toggle category expand/collapse\n   * - Prevents default behavior to avoid page scrolling on Space\n   */\n  private handleCategoryKeyDown = (event: KeyboardEvent, category: string) => {\n    if (event.key === \"Enter\" || event.key === \" \") {\n      event.preventDefault();\n      this.toggleCategory(category);\n    }\n  };\n\n  /**\n   * Toggle Preview Mode\n   * -------------------\n   *\n   * Switches between edit mode and preview mode:\n   * - Edit mode: Shows palette, grid, resize handles, editing UI\n   * - Preview mode: Shows only rendered components (final output)\n   *\n   * Also clears both grid size cache and DOM cache to ensure fresh calculations when switching.\n   */\n  private togglePreviewMode = () => {\n    // Capture current state from API before switching to preview mode\n    if (!this.isPreviewMode && this.api) {\n      this.currentGridState = this.api.getState();\n    }\n\n    this.isPreviewMode = !this.isPreviewMode;\n\n    // Clear both caches to force fresh calculations\n    // Grid size cache: Clears cached grid unit sizes\n    // DOM cache: Clears cached canvas element references (prevents stale DOM references)\n    clearGridSizeCache();\n    domCache.clear();\n\n    // This ensures items render at correct positions when switching modes\n  };\n\n  /**\n   * Toggle Sidebar Collapsed\n   * -------------------------\n   *\n   * Collapses/expands the component palette sidebar:\n   * - Collapsed: Hides sidebar, gives more canvas space\n   * - Expanded: Shows sidebar with categorized components\n   */\n  private toggleSidebarCollapsed = () => {\n    this.isSidebarCollapsed = !this.isSidebarCollapsed;\n  };\n\n  /**\n   * Palette Config\n   * ---------------\n   *\n   * Configuration shared across all component palettes.\n   * Enables click-to-add functionality for all palette instances.\n   */\n  private paletteConfig = {\n    enableClickToAdd: true,\n  };\n\n  @State() initialState = {\n    canvases: {\n      \"hero-section\": {\n        zIndexCounter: 2,\n        items: [\n          {\n            id: \"hero-header\",\n            canvasId: \"hero-section\",\n            type: \"blog-header\",\n            name: \"Hero Header\",\n            layouts: {\n              desktop: { x: 0, y: 0, width: 50, height: 6 },\n              mobile: {\n                x: null,\n                y: null,\n                width: null,\n                height: null,\n                customized: false,\n              },\n            },\n            zIndex: 1,\n            config: {\n              title: \"Welcome to My Blog\",\n              subtitle: \"Exploring technology, design, and development\",\n            },\n          },\n          {\n            id: \"hero-button\",\n            canvasId: \"hero-section\",\n            type: \"blog-button\",\n            name: \"Hero CTA\",\n            layouts: {\n              desktop: { x: 15, y: 7, width: 20, height: 4 }, // 4 units Ã— 20px = 80px (matches CSS min-height)\n              mobile: {\n                x: null,\n                y: null,\n                width: null,\n                height: null,\n                customized: false,\n              },\n            },\n            zIndex: 2,\n            config: {\n              label: \"Start Reading\",\n              variant: \"primary\",\n            },\n          },\n        ],\n      },\n      \"articles-grid\": {\n        zIndexCounter: 4,\n        items: [\n          {\n            id: \"article-1\",\n            canvasId: \"articles-grid\",\n            type: \"blog-article\",\n            name: \"First Article\",\n            layouts: {\n              desktop: { x: 0, y: 0, width: 25, height: 12 },\n              mobile: {\n                x: null,\n                y: null,\n                width: null,\n                height: null,\n                customized: false,\n              },\n            },\n            zIndex: 1,\n            config: {\n              content:\n                \"This is my first blog post about using the grid-builder library!\",\n              author: \"Jane Doe\",\n              date: \"2025-01-15\",\n            },\n          },\n          {\n            id: \"article-2\",\n            canvasId: \"articles-grid\",\n            type: \"blog-article\",\n            name: \"Second Article\",\n            layouts: {\n              desktop: { x: 25, y: 0, width: 25, height: 12 },\n              mobile: {\n                x: null,\n                y: null,\n                width: null,\n                height: null,\n                customized: false,\n              },\n            },\n            zIndex: 2,\n            config: {\n              content:\n                \"Another interesting post about custom Stencil components.\",\n              author: \"John Smith\",\n              date: \"2025-01-14\",\n            },\n          },\n          {\n            id: \"featured-image\",\n            canvasId: \"articles-grid\",\n            type: \"blog-image\",\n            name: \"Featured Image\",\n            layouts: {\n              desktop: { x: 0, y: 13, width: 12, height: 15 },\n              mobile: {\n                x: null,\n                y: null,\n                width: null,\n                height: null,\n                customized: false,\n              },\n            },\n            zIndex: 3,\n            config: {\n              src: \"https://images.unsplash.com/photo-1498050108023-c5249f4df085?w=800&h=600&fit=crop\",\n              alt: \"Developer workspace with laptop and code\",\n              caption: \"A modern development environment\",\n              objectFit: \"cover\",\n            },\n          },\n          {\n            id: \"article-3\",\n            canvasId: \"articles-grid\",\n            type: \"blog-article\",\n            name: \"Third Article\",\n            layouts: {\n              desktop: { x: 12, y: 13, width: 26, height: 12 },\n              mobile: {\n                x: null,\n                y: null,\n                width: null,\n                height: null,\n                customized: false,\n              },\n            },\n            zIndex: 4,\n            config: {\n              content:\n                \"Learn how to build amazing layouts with drag-and-drop functionality.\",\n              author: \"Alex Chen\",\n              date: \"2025-01-13\",\n            },\n          },\n        ],\n      },\n      \"footer-section\": {\n        zIndexCounter: 2,\n        items: [\n          {\n            id: \"footer-header\",\n            canvasId: \"footer-section\",\n            type: \"blog-header\",\n            name: \"Footer Header\",\n            layouts: {\n              desktop: { x: 0, y: 0, width: 50, height: 4 },\n              mobile: {\n                x: null,\n                y: null,\n                width: null,\n                height: null,\n                customized: false,\n              },\n            },\n            zIndex: 1,\n            config: {\n              title: \"Stay Connected\",\n              subtitle: \"Subscribe for updates\",\n            },\n          },\n          {\n            id: \"footer-button\",\n            canvasId: \"footer-section\",\n            type: \"blog-button\",\n            name: \"Subscribe Button\",\n            layouts: {\n              desktop: { x: 15, y: 5, width: 20, height: 4 }, // 4 units Ã— 20px = 80px (matches CSS min-height)\n              mobile: {\n                x: null,\n                y: null,\n                width: null,\n                height: null,\n                customized: false,\n              },\n            },\n            zIndex: 2,\n            config: {\n              label: \"Subscribe Now\",\n              variant: \"primary\",\n            },\n          },\n        ],\n      },\n    },\n  };\n\n  /**\n   * Get Merged Canvas Metadata\n   * ---------------------------\n   *\n   * Merges canvas metadata with preview state for rendering.\n   * Preview state takes precedence over saved metadata for live preview.\n   * @param canvasId - Canvas ID to get metadata for\n   * @returns Merged metadata object with title and backgroundColor\n   */\n  private getMergedMetadata(canvasId: string) {\n    const baseMetadata = this.canvasMetadata[canvasId] || {\n      title: canvasId,\n      backgroundColor: \"#ffffff\",\n    };\n    const preview = this.previewMetadata[canvasId] || {};\n\n    return {\n      title: preview.title !== undefined ? preview.title : baseMetadata.title,\n      backgroundColor:\n        preview.backgroundColor !== undefined\n          ? preview.backgroundColor\n          : baseMetadata.backgroundColor,\n    };\n  }\n\n  render() {\n    // Calculate canvas header overlay margin from grid size (1.4 grid units)\n    const verticalGridSize = getGridSizeVertical(this.gridConfig);\n    const canvasHeaderOverlayMargin = -(verticalGridSize * 1.4);\n\n    // Build merged metadata (canvas metadata + preview state) for all canvases\n    const canvasIds = Object.keys(this.canvasMetadata);\n    const mergedCanvasMetadata = canvasIds.reduce(\n      (acc, canvasId) => {\n        acc[canvasId] = this.getMergedMetadata(canvasId);\n        return acc;\n      },\n      {} as Record<string, { title: string; backgroundColor: string }>,\n    );\n\n    return (\n      <div\n        class={`blog-app-container ${this.isPreviewMode ? \"preview-mode\" : \"\"}`}\n        style={\n          {\n            \"--canvas-header-overlay-margin\": `${canvasHeaderOverlayMargin}px`,\n          } as any\n        }\n      >\n        <div class=\"app-header\">\n          <div class=\"app-header-content\">\n            <h1 class=\"app-title\">Blog Layout Builder Demo</h1>\n            <p class=\"app-subtitle\">\n              Using custom Stencil components with\n              @lucidworks/stencil-grid-builder\n            </p>\n          </div>\n          <div class=\"global-controls\">\n            <button\n              class=\"preview-toggle-btn\"\n              onClick={this.togglePreviewMode}\n              title={\n                this.isPreviewMode\n                  ? \"Switch to Edit Mode\"\n                  : \"Switch to Preview Mode\"\n              }\n            >\n              {this.isPreviewMode ? \"âœï¸ Edit Mode\" : \"ðŸ‘ï¸ Preview\"}\n            </button>\n            {!this.isPreviewMode && (\n              <div class=\"metadata-undo-redo\">\n                <button\n                  class=\"undo-btn\"\n                  onClick={() => this.api?.undo()}\n                  disabled={!this.api || !this.canUndo}\n                  title=\"Undo (components and sections)\"\n                >\n                  â†¶ Undo\n                </button>\n                <button\n                  class=\"redo-btn\"\n                  onClick={() => this.api?.redo()}\n                  disabled={!this.api || !this.canRedo}\n                  title=\"Redo (components and sections)\"\n                >\n                  â†· Redo\n                </button>\n              </div>\n            )}\n            {!this.isPreviewMode && (\n              <button class=\"add-section-btn\" onClick={this.handleAddSection}>\n                âž• Add Section\n              </button>\n            )}\n          </div>\n        </div>\n\n        {/* Main content area with categorized palettes */}\n        <div class=\"demo-layout\">\n          {/* Categorized Component Palettes - Hidden in preview mode */}\n          {!this.isPreviewMode && !this.isSidebarCollapsed && (\n            <div class=\"categorized-palette-sidebar\">\n              <div class=\"palette-header\">\n                <h2 class=\"palette-title\">Components</h2>\n                <button\n                  class=\"sidebar-collapse-btn\"\n                  onClick={this.toggleSidebarCollapsed}\n                  title=\"Collapse sidebar\"\n                >\n                  â—€\n                </button>\n              </div>\n\n              {/* Content Category */}\n              <div class=\"palette-category\">\n                <div\n                  class=\"category-header\"\n                  role=\"button\"\n                  tabindex={0}\n                  aria-expanded={this.categoryStates.content ? \"true\" : \"false\"}\n                  aria-controls=\"content-palette-panel\"\n                  aria-label=\"Content components category\"\n                  onClick={() => this.toggleCategory(\"content\")}\n                  onKeyDown={(e) => this.handleCategoryKeyDown(e, \"content\")}\n                >\n                  <span class=\"category-icon\" aria-hidden=\"true\">\n                    {this.categoryStates.content ? \"â–¼\" : \"â–¶\"}\n                  </span>\n                  <span class=\"category-name\">Content</span>\n                </div>\n                <div\n                  id=\"content-palette-panel\"\n                  role=\"region\"\n                  aria-labelledby=\"content-category-header\"\n                >\n                  {this.categoryStates.content && (\n                    <component-palette\n                      components={contentComponents}\n                      showHeader={false}\n                      config={this.paletteConfig}\n                    />\n                  )}\n                </div>\n              </div>\n\n              {/* Interactive Category */}\n              <div class=\"palette-category\">\n                <div\n                  class=\"category-header\"\n                  role=\"button\"\n                  tabindex={0}\n                  aria-expanded={\n                    this.categoryStates.interactive ? \"true\" : \"false\"\n                  }\n                  aria-controls=\"interactive-palette-panel\"\n                  aria-label=\"Interactive components category\"\n                  onClick={() => this.toggleCategory(\"interactive\")}\n                  onKeyDown={(e) =>\n                    this.handleCategoryKeyDown(e, \"interactive\")\n                  }\n                >\n                  <span class=\"category-icon\" aria-hidden=\"true\">\n                    {this.categoryStates.interactive ? \"â–¼\" : \"â–¶\"}\n                  </span>\n                  <span class=\"category-name\">Interactive</span>\n                </div>\n                <div\n                  id=\"interactive-palette-panel\"\n                  role=\"region\"\n                  aria-labelledby=\"interactive-category-header\"\n                >\n                  {this.categoryStates.interactive && (\n                    <component-palette\n                      components={interactiveComponents}\n                      showHeader={false}\n                      config={this.paletteConfig}\n                    />\n                  )}\n                </div>\n              </div>\n\n              {/* Media Category */}\n              <div class=\"palette-category\">\n                <div\n                  class=\"category-header\"\n                  role=\"button\"\n                  tabindex={0}\n                  aria-expanded={this.categoryStates.media ? \"true\" : \"false\"}\n                  aria-controls=\"media-palette-panel\"\n                  aria-label=\"Media components category\"\n                  onClick={() => this.toggleCategory(\"media\")}\n                  onKeyDown={(e) => this.handleCategoryKeyDown(e, \"media\")}\n                >\n                  <span class=\"category-icon\" aria-hidden=\"true\">\n                    {this.categoryStates.media ? \"â–¼\" : \"â–¶\"}\n                  </span>\n                  <span class=\"category-name\">Media</span>\n                </div>\n                <div\n                  id=\"media-palette-panel\"\n                  role=\"region\"\n                  aria-labelledby=\"media-category-header\"\n                >\n                  {this.categoryStates.media && (\n                    <component-palette\n                      components={mediaComponents}\n                      showHeader={false}\n                      config={this.paletteConfig}\n                    />\n                  )}\n                </div>\n              </div>\n\n              {/* Layer Panel - shows z-index stacking order */}\n              <div class=\"palette-section\">\n                <div class=\"palette-section-header\">\n                  <h3 class=\"palette-section-title\">Layers</h3>\n                </div>\n                <div class=\"layer-panel-container\">\n                  <layer-panel canvasMetadata={mergedCanvasMetadata} />\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Floating expand button when sidebar is collapsed */}\n          {!this.isPreviewMode && this.isSidebarCollapsed && (\n            <button\n              class=\"sidebar-expand-btn\"\n              onClick={this.toggleSidebarCollapsed}\n              title=\"Expand sidebar\"\n            >\n              â–¶\n            </button>\n          )}\n\n          {/* Grid Builder / Viewer - all components for registration */}\n          <div class=\"grid-builder-area\">\n            {this.isPreviewMode ? (\n              <grid-viewer\n                key=\"viewer\"\n                components={blogComponentDefinitions}\n                initialState={this.currentGridState || this.initialState}\n                canvasMetadata={mergedCanvasMetadata}\n              />\n            ) : (\n              <grid-builder\n                key=\"builder\"\n                components={blogComponentDefinitions}\n                config={this.gridConfig}\n                initialState={this.initialState}\n                canvasMetadata={mergedCanvasMetadata}\n                onBeforeDelete={this.handleBeforeDelete}\n                uiOverrides={{\n                  CanvasHeader: ({\n                    canvasId,\n                    metadata,\n                    isActive,\n                  }: CanvasHeaderProps) => {\n                    const isDeletable = ![\n                      \"hero-section\",\n                      \"articles-grid\",\n                      \"footer-section\",\n                    ].includes(canvasId);\n\n                    return (\n                      <canvas-header\n                        canvasId={canvasId}\n                        sectionTitle={metadata.title}\n                        isDeletable={isDeletable}\n                        isActive={isActive}\n                        onHeaderClick={() => {\n                          setActiveCanvas(canvasId);\n                          this.handleOpenSectionEditor(canvasId);\n                        }}\n                        onDeleteClick={() => this.handleDeleteSection(canvasId)}\n                      />\n                    );\n                  },\n                }}\n              />\n            )}\n          </div>\n        </div>\n\n        <section-editor-panel\n          isOpen={this.isPanelOpen}\n          sectionData={this.editingSection}\n          onClosePanel={this.handleClosePanel}\n          onUpdateSection={this.handleUpdateSection}\n          onPreviewColorChange={this.handlePreviewColorChange}\n          onPreviewTitleChange={this.handlePreviewTitleChange}\n          onDeleteSection={this.handleDeleteSectionFromPanel}\n        />\n\n        <confirmation-modal\n          isOpen={this.isConfirmModalOpen}\n          data={this.confirmModalData}\n          onConfirm={this.handleConfirmDelete}\n          onCancel={this.handleCancelDelete}\n        />\n\n        {/* Custom Config Panel (demo-specific) */}\n        <custom-config-panel api={this.api} />\n      </div>\n    );\n  }\n}\n"],"names":[],"mappings":"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"}