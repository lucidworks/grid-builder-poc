<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
    <title>Grid Viewer Demo - Display-Only Mode</title>

    <script type="module" src="/build/grid-builder.esm.js"></script>
    <script nomodule src="/build/grid-builder.js"></script>

    <style>
      body {
        margin: 0;
        padding: 20px;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
          'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
          sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        background: #f5f7fa;
      }

      .demo-container {
        max-width: 1400px;
        margin: 0 auto;
      }

      h1 {
        color: #333;
        margin-top: 0;
      }

      .description {
        color: #666;
        margin-bottom: 30px;
        line-height: 1.6;
      }

      .demo-section {
        margin-bottom: 40px;
      }

      .demo-section h2 {
        color: #007bff;
        margin-bottom: 15px;
      }

      .viewer-wrapper {
        border: 3px solid #28a745;
        border-radius: 8px;
        overflow: hidden;
        background: white;
      }

      .info-box {
        padding: 15px;
        background: #e7f3ff;
        border-left: 4px solid #007bff;
        border-radius: 4px;
        margin-bottom: 20px;
      }

      .info-box h3 {
        margin-top: 0;
        color: #007bff;
      }

      .info-box ul {
        margin-bottom: 0;
        padding-left: 20px;
      }

      .info-box li {
        margin-bottom: 8px;
      }

      .responsive-demo {
        display: flex;
        gap: 30px;
        flex-wrap: wrap;
      }

      .responsive-viewer {
        flex: 1;
        min-width: 300px;
      }

      .responsive-viewer h3 {
        margin-top: 0;
        font-size: 16px;
        color: #333;
      }

      .responsive-viewer .viewer-wrapper {
        height: 400px;
      }
    </style>
  </head>
  <body>
    <div class="demo-container">
      <h1>ðŸŽ¨ Grid Viewer Demo</h1>
      <p class="description">
        This demo showcases the <strong>grid-viewer</strong> component - a lightweight, display-only version of the grid builder.
        Unlike the full builder (~150KB), the viewer is only ~30KB and perfect for rendering pre-built layouts without editing features.
      </p>

      <div class="info-box">
        <h3>ðŸ“¦ What's Different in the Viewer?</h3>
        <ul>
          <li><strong>No drag-and-drop</strong> - No interact.js dependency (saves ~45KB)</li>
          <li><strong>No editing UI</strong> - No palette, config panel, resize handles, or delete buttons</li>
          <li><strong>No grid lines</strong> - Clean backgrounds for production display</li>
          <li><strong>No selection states</strong> - Components are purely for viewing</li>
          <li><strong>80% smaller</strong> - Perfect for content delivery and viewer apps</li>
        </ul>
      </div>

      <!-- Single Section Demo -->
      <div class="demo-section">
        <h2>ðŸ“„ Single Section Viewer</h2>
        <div class="viewer-wrapper" style="height: 500px;">
          <grid-viewer id="single-section-viewer"></grid-viewer>
        </div>
      </div>

      <!-- Multi-Section Demo -->
      <div class="demo-section">
        <h2>ðŸ“‘ Multi-Section Landing Page</h2>
        <p class="description">
          The viewer can render multiple canvas sections vertically, each with its own background color.
          Perfect for building landing pages with hero, features, and CTA sections.
        </p>
        <div class="viewer-wrapper" style="height: 700px;">
          <grid-viewer id="multi-section-viewer"></grid-viewer>
        </div>
      </div>

      <!-- Responsive Demo -->
      <div class="demo-section">
        <h2>ðŸ“± Responsive Container-Based Viewports</h2>
        <p class="description">
          The viewer automatically switches between desktop and mobile layouts based on <strong>container width</strong> (not window width).
          Resize your browser to see the mobile viewport activate below 768px.
        </p>
        <div class="responsive-demo">
          <div class="responsive-viewer">
            <h3>âœ… Desktop Container (900px)</h3>
            <div class="viewer-wrapper" style="width: 900px;">
              <grid-viewer id="responsive-desktop-viewer"></grid-viewer>
            </div>
          </div>
          <div class="responsive-viewer">
            <h3>ðŸ“± Mobile Container (600px)</h3>
            <div class="viewer-wrapper" style="width: 600px;">
              <grid-viewer id="responsive-mobile-viewer"></grid-viewer>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Component definitions (same as in Storybook)
      const components = [
        {
          type: 'header',
          name: 'Header',
          icon: 'ðŸ“„',
          defaultSize: { width: 30, height: 4 },
          minSize: { width: 15, height: 3 },
          render: ({ config }) => {
            const div = document.createElement('div');
            div.style.cssText = 'padding: 12px; background: #f0f0f0; border-radius: 4px; height: 100%;';
            const h3 = document.createElement('h3');
            h3.style.cssText = 'margin: 0; font-size: 16px;';
            h3.textContent = config?.title || 'Header';
            div.appendChild(h3);
            return div;
          },
        },
        {
          type: 'text',
          name: 'Text Block',
          icon: 'ðŸ“',
          defaultSize: { width: 20, height: 6 },
          minSize: { width: 10, height: 4 },
          render: ({ config }) => {
            const div = document.createElement('div');
            div.style.cssText = 'padding: 10px; background: #fff; border: 1px solid #ddd; border-radius: 4px; height: 100%;';
            const p = document.createElement('p');
            p.style.cssText = 'margin: 0; font-size: 13px; line-height: 1.4;';
            p.textContent = config?.text || 'Sample text content.';
            div.appendChild(p);
            return div;
          },
        },
        {
          type: 'button',
          name: 'Button',
          icon: 'ðŸ”˜',
          defaultSize: { width: 12, height: 4 },
          minSize: { width: 8, height: 3 },
          render: ({ config }) => {
            const button = document.createElement('button');
            button.style.cssText = 'padding: 8px 16px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; width: 100%; height: 100%;';
            button.textContent = config?.label || 'Click Me';
            return button;
          },
        },
      ];

      // Sample layout data for single section
      const singleSectionLayout = {
        version: '1.0.0',
        canvases: {
          'canvas1': {
            items: [
              {
                id: 'item-1',
                canvasId: 'canvas1',
                type: 'header',
                name: 'Header',
                layouts: {
                  desktop: { x: 0, y: 0, width: 30, height: 4 },
                  mobile: { x: null, y: null, width: null, height: null, customized: false },
                },
                zIndex: 1,
                config: { title: 'Welcome to Grid Viewer Demo!' },
              },
              {
                id: 'item-2',
                canvasId: 'canvas1',
                type: 'text',
                name: 'Text Block',
                layouts: {
                  desktop: { x: 0, y: 5, width: 20, height: 6 },
                  mobile: { x: null, y: null, width: null, height: null, customized: false },
                },
                zIndex: 2,
                config: { text: 'This is a lightweight, display-only viewer perfect for rendering grid layouts without editing features. Notice there are no drag handles, resize handles, or delete buttons!' },
              },
              {
                id: 'item-3',
                canvasId: 'canvas1',
                type: 'button',
                name: 'Button',
                layouts: {
                  desktop: { x: 21, y: 5, width: 12, height: 4 },
                  mobile: { x: null, y: null, width: null, height: null, customized: false },
                },
                zIndex: 3,
                config: { label: 'Learn More' },
              },
            ],
          },
        },
        viewport: 'desktop',
      };

      // Multi-section layout data
      const multiSectionLayout = {
        version: '1.0.0',
        canvases: {
          'hero': {
            items: [
              {
                id: 'hero-title',
                canvasId: 'hero',
                type: 'header',
                layouts: { desktop: { x: 5, y: 2, width: 40, height: 6 }, mobile: { x: null, y: null, width: null, height: null, customized: false } },
                zIndex: 1,
                config: { title: 'ðŸš€ Multi-Section Landing Page' },
              },
              {
                id: 'hero-text',
                canvasId: 'hero',
                type: 'text',
                layouts: { desktop: { x: 5, y: 9, width: 40, height: 6 }, mobile: { x: null, y: null, width: null, height: null, customized: false } },
                zIndex: 2,
                config: { text: 'Each section can have its own background color and components.' },
              },
            ],
          },
          'features': {
            items: [
              {
                id: 'features-title',
                canvasId: 'features',
                type: 'header',
                layouts: { desktop: { x: 0, y: 0, width: 50, height: 4 }, mobile: { x: null, y: null, width: null, height: null, customized: false } },
                zIndex: 1,
                config: { title: 'âœ¨ Key Features' },
              },
              {
                id: 'feature-1',
                canvasId: 'features',
                type: 'text',
                layouts: { desktop: { x: 0, y: 5, width: 15, height: 8 }, mobile: { x: null, y: null, width: null, height: null, customized: false } },
                zIndex: 2,
                config: { text: 'ðŸ“¦ Only 30KB bundle size' },
              },
              {
                id: 'feature-2',
                canvasId: 'features',
                type: 'text',
                layouts: { desktop: { x: 17, y: 5, width: 15, height: 8 }, mobile: { x: null, y: null, width: null, height: null, customized: false } },
                zIndex: 3,
                config: { text: 'ðŸ“± Responsive layouts with auto-stacking' },
              },
              {
                id: 'feature-3',
                canvasId: 'features',
                type: 'text',
                layouts: { desktop: { x: 34, y: 5, width: 15, height: 8 }, mobile: { x: null, y: null, width: null, height: null, customized: false } },
                zIndex: 4,
                config: { text: 'ðŸŽ¨ Custom section backgrounds' },
              },
            ],
          },
          'cta': {
            items: [
              {
                id: 'cta-text',
                canvasId: 'cta',
                type: 'text',
                layouts: { desktop: { x: 10, y: 2, width: 20, height: 4 }, mobile: { x: null, y: null, width: null, height: null, customized: false } },
                zIndex: 1,
                config: { text: 'Ready to get started?' },
              },
              {
                id: 'cta-button',
                canvasId: 'cta',
                type: 'button',
                layouts: { desktop: { x: 32, y: 2, width: 12, height: 4 }, mobile: { x: null, y: null, width: null, height: null, customized: false } },
                zIndex: 2,
                config: { label: 'Try It Now' },
              },
            ],
          },
        },
        viewport: 'desktop',
      };

      // Canvas metadata for multi-section
      const canvasMetadata = {
        'hero': { backgroundColor: '#e0f2fe' },
        'features': { backgroundColor: '#f0fdf4' },
        'cta': { backgroundColor: '#fef3c7' },
      };

      // Initialize viewers when DOM is ready
      window.addEventListener('DOMContentLoaded', () => {
        // Single section viewer
        const singleViewer = document.getElementById('single-section-viewer');
        singleViewer.components = components;
        singleViewer.initialState = singleSectionLayout;

        // Multi-section viewer
        const multiViewer = document.getElementById('multi-section-viewer');
        multiViewer.components = components;
        multiViewer.initialState = multiSectionLayout;
        multiViewer.canvasMetadata = canvasMetadata;

        // Responsive desktop viewer
        const responsiveDesktop = document.getElementById('responsive-desktop-viewer');
        responsiveDesktop.components = components;
        responsiveDesktop.initialState = singleSectionLayout;

        // Responsive mobile viewer
        const responsiveMobile = document.getElementById('responsive-mobile-viewer');
        responsiveMobile.components = components;
        responsiveMobile.initialState = singleSectionLayout;

        console.log('âœ… Grid Viewer Demo Initialized');
        console.log('ðŸ“± Resize your browser to see responsive viewport switching!');
      });
    </script>
  </body>
</html>
