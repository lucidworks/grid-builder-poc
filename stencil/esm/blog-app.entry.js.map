{"version":3,"file":"blog-app.entry.js","sources":["src/demo/components/blog-app/blog-app.scss?tag=blog-app","src/demo/components/blog-app/blog-app.tsx"],"sourcesContent":["blog-app {\n  .blog-app-container {\n    min-height: 100vh;\n    padding: 24px;\n    background: #f8f9fa;\n    box-sizing: border-box; /* Ensure padding is included in width */\n\n    /* Hide canvas headers in preview mode */\n    &.preview-mode {\n      .canvas-header {\n        display: none;\n      }\n    }\n\n\n    .app-header {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 16px 20px;\n      border-radius: 8px;\n      margin-bottom: 24px;\n      background: white;\n      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n\n      .app-header-content {\n        flex: 1;\n\n        .app-title {\n          margin: 0 0 4px 0;\n          color: #212529;\n          font-size: 24px;\n          font-weight: 700;\n        }\n\n        .app-subtitle {\n          margin: 0;\n          color: #6c757d;\n          font-size: 14px;\n        }\n      }\n\n      .global-controls {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n\n        .preview-toggle-btn {\n          padding: 8px 16px;\n          border: 1px solid #10b981;\n          border-radius: 6px;\n          background: white;\n          color: #10b981;\n          cursor: pointer;\n          font-size: 14px;\n          font-weight: 500;\n          transition: all 0.15s;\n\n          &:hover {\n            background: #10b981;\n            color: white;\n          }\n\n          &:active {\n            transform: translateY(1px);\n          }\n        }\n\n        .metadata-undo-redo {\n          display: flex;\n          gap: 6px;\n\n          button {\n            padding: 8px 14px;\n            border: 1px solid #dee2e6;\n            border-radius: 6px;\n            background: #e9ecef;\n            color: #495057;\n            cursor: pointer;\n            font-size: 13px;\n            font-weight: 500;\n            transition: all 0.15s;\n\n            &:hover:not(:disabled) {\n              border-color: #adb5bd;\n              background: #dee2e6;\n            }\n\n            &:active:not(:disabled) {\n              transform: translateY(1px);\n            }\n\n            &:disabled {\n              cursor: not-allowed;\n              opacity: 0.4;\n            }\n          }\n        }\n\n        .add-section-btn {\n          padding: 8px 16px;\n          border: none;\n          border-radius: 6px;\n          background: #4a90e2;\n          color: white;\n          cursor: pointer;\n          font-size: 14px;\n          font-weight: 500;\n          transition: background 0.15s;\n\n          &:hover {\n            background: #357abd;\n          }\n\n          &:active {\n            transform: translateY(1px);\n          }\n        }\n      }\n    }\n\n    /* Canvas header styles moved to canvas-header component */\n\n    /* Demo Layout - Categorized Palettes + Grid Builder */\n    .demo-layout {\n      display: flex;\n      width: 100%;\n      gap: 0; /* No gap - sidebar has border-right */\n    }\n\n    /* Categorized Palette Sidebar */\n    .categorized-palette-sidebar {\n      width: 280px;\n      flex-shrink: 0; /* Don't shrink below 280px */\n      border-right: 1px solid #ddd;\n      background: white;\n      overflow-y: auto;\n      max-height: calc(100vh - 120px); /* Account for header */\n\n      .palette-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: 20px 20px 16px;\n        border-bottom: 1px solid #f0f0f0;\n\n        .palette-title {\n          padding: 0;\n          margin: 0;\n          color: #333;\n          font-size: 18px;\n          font-weight: 600;\n        }\n\n        .sidebar-collapse-btn {\n          display: flex;\n          width: 28px;\n          height: 28px;\n          align-items: center;\n          justify-content: center;\n          padding: 0;\n          border: 1px solid #dee2e6;\n          border-radius: 4px;\n          background: white;\n          color: #495057;\n          cursor: pointer;\n          font-size: 14px;\n          transition: all 0.15s;\n\n          &:hover {\n            border-color: #4a90e2;\n            background: #f8f9fa;\n            color: #4a90e2;\n          }\n\n          &:active {\n            transform: scale(0.95);\n          }\n        }\n      }\n    }\n\n    /* Floating expand button (when sidebar collapsed) */\n    .sidebar-expand-btn {\n      position: fixed;\n      top: 200px;\n      left: 24px;\n      z-index: 1000;\n      display: flex;\n      width: 40px;\n      height: 40px;\n      align-items: center;\n      justify-content: center;\n      padding: 0;\n      border: 1px solid #4a90e2;\n      border-radius: 6px;\n      background: white;\n      box-shadow: 0 2px 8px rgba(74, 144, 226, 0.2);\n      color: #4a90e2;\n      cursor: pointer;\n      font-size: 16px;\n      transition: all 0.15s;\n\n      &:hover {\n        background: #4a90e2;\n        box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);\n        color: white;\n        transform: translateX(2px);\n      }\n\n      &:active {\n        transform: translateX(2px) scale(0.95);\n      }\n    }\n\n    /* Category Sections */\n    .palette-category {\n      border-bottom: 1px solid #f0f0f0;\n\n      .category-header {\n        display: flex;\n        align-items: center;\n        padding: 12px 20px;\n        background: #f8f9fa;\n        cursor: pointer;\n        transition: background 0.15s;\n        user-select: none;\n\n        &:hover {\n          background: #e9ecef;\n        }\n\n        .category-icon {\n          width: 16px;\n          color: #6c757d;\n          font-size: 12px;\n          font-weight: bold;\n        }\n\n        .category-name {\n          margin-left: 8px;\n          color: #495057;\n          font-size: 14px;\n          font-weight: 500;\n        }\n      }\n\n      /* Override palette default styles for chromeless mode */\n      component-palette {\n        .palette {\n          width: 100%;\n          padding: 12px 20px;\n          border: none;\n          background: white;\n        }\n\n        /* Remove blue background from palette items with custom components */\n        .palette-item:has(custom-palette-item) {\n          background: transparent;\n          padding: 0;\n          margin-bottom: 12px;\n        }\n\n        .palette-item {\n          margin-bottom: 8px;\n          font-size: 13px;\n        }\n      }\n    }\n\n    /* Grid Builder Area */\n    .grid-builder-area {\n      flex: 1; /* Take remaining space */\n      min-width: 0; /* Allow flex shrinking - critical for preventing overflow */\n      overflow-x: auto; /* Allow scrolling if content is too wide */\n\n      /* Hide grid-builder's default palette */\n      grid-builder {\n        display: block;\n        width: 100%;\n        min-height: 600px;\n        box-sizing: border-box;\n\n        /* Hide the built-in palette since we're using custom categorized ones */\n        .palette-area {\n          display: none;\n        }\n\n        /* Ensure main area uses available width */\n        .main-area {\n          width: 100%;\n          box-sizing: border-box;\n        }\n\n        /* Ensure canvas area constrains width */\n        .canvas-area {\n          width: 100%;\n          min-width: 0; /* Allow shrinking */\n          overflow-x: hidden; /* Prevent horizontal scroll */\n          box-sizing: border-box;\n        }\n\n        /* Ensure canvases fit within container */\n        .canvases-container {\n          width: 100%;\n          max-width: 100%;\n          box-sizing: border-box;\n        }\n\n        /* Ensure individual canvas sections fit */\n        canvas-section {\n          display: block;\n          width: 100%;\n          max-width: 100%;\n          box-sizing: border-box;\n\n          /* Ensure grid container inside canvas-section takes full width */\n          .grid-container {\n            width: 100%;\n            box-sizing: border-box;\n          }\n        }\n      }\n\n      /* Grid Viewer - same sizing constraints as grid-builder */\n      grid-viewer {\n        display: block;\n        width: 100%;\n        min-height: 600px;\n        box-sizing: border-box;\n\n        /* Override grid-viewer's height: 100% to prevent layout issues */\n        .grid-viewer-container {\n          height: auto;\n          min-height: 600px;\n          width: 100%;\n          box-sizing: border-box;\n        }\n\n        /* Ensure canvas area uses full width */\n        .canvas-area {\n          width: 100%;\n          min-width: 0;\n          overflow-x: hidden;\n          box-sizing: border-box;\n          height: auto;\n        }\n\n        /* Ensure canvases fit within container */\n        .canvases-container {\n          width: 100%;\n          max-width: 100%;\n          box-sizing: border-box;\n        }\n\n        /* Ensure individual canvas sections fit */\n        canvas-section-viewer {\n          display: block;\n          width: 100%;\n          max-width: 100%;\n          box-sizing: border-box;\n\n          /* Ensure grid container inside canvas-section-viewer takes full width */\n          .grid-container {\n            width: 100%;\n            box-sizing: border-box;\n          }\n        }\n      }\n    }\n  }\n}\n","import { Component, h, State } from '@stencil/core';\nimport { blogComponentDefinitions, contentComponents, interactiveComponents, mediaComponents } from '../../component-definitions';\nimport { GridBuilderAPI } from '../../../types/api';\nimport { SectionEditorData } from '../../types/section-editor-data';\nimport { ConfirmationModalData } from '../../types/confirmation-modal-data';\nimport { DeletionHookContext } from '../../../types/deletion-hook';\nimport { getGridSizeVertical, clearGridSizeCache } from '../../../utils/grid-calculations';\nimport { domCache } from '../../../utils/dom-cache';\nimport { setActiveCanvas } from '../../../services/state-manager';\n\n/**\n * Blog App Demo - Host Application for grid-builder Library\n * ==========================================================\n *\n * This component demonstrates how to build a complete page builder application\n * using the @lucidworks/stencil-grid-builder library.\n *\n * Key Library Features Demonstrated:\n * ----------------------------------\n *\n * 1. **Component Registry** (components prop)\n *    - Pass array of ComponentDefinition objects to grid-builder\n *    - Library uses these to render palette and components\n *    - See: blogComponentDefinitions in component-definitions.tsx\n *\n * 2. **Initial State** (initialState prop)\n *    - Pre-populate canvases with components\n *    - Define layouts for desktop and mobile viewports\n *    - Library manages state updates via internal store\n *\n * 3. **Canvas Metadata** (canvasMetadata prop)\n *    - Host app owns presentation metadata (titles, colors, settings)\n *    - Library owns placement state (items, layouts, zIndex)\n *    - Separation of concerns pattern\n *\n * 4. **Deletion Hook** (onBeforeDelete prop)\n *    - Intercept component deletion requests\n *    - Show confirmation modals before deletion\n *    - Make API calls or run custom validation\n *    - Return Promise<boolean> to approve/cancel deletion\n *\n * 5. **Grid Builder API** (configurable storage via api-ref prop)\n *    - Programmatic control of grid state\n *    - Methods: addCanvas, removeCanvas, undo, redo, etc.\n *    - Event system: canvasAdded, canvasRemoved, etc.\n *    - **Demo uses custom storage**: api-ref={{ target: this, key: 'api' }}\n *    - API stored on component instance (this.api) instead of window\n *\n * 6. **Event System** (canvas-click, custom events)\n *    - Listen to library events for state synchronization\n *    - React to user interactions (canvas clicks, etc.)\n *\n * 7. **Multiple Palettes Pattern** (Demonstrated in this demo)\n *    - Multiple `<component-palette>` instances with different components\n *    - Categorized/grouped components (Content, Interactive, etc.)\n *    - Collapsible category sections\n *    - All palettes drag to the same canvases\n *\n * 8. **Custom Config Panel** (Demonstrated with custom-config-panel component)\n *    - Replace library's default config panel with custom UI\n *    - Access grid state via API (this.api in this demo)\n *    - Implement live preview for real-time updates\n *    - Support cancel/revert functionality\n *    - Subscribe to componentDeleted events for auto-close\n *    - See: src/demo/components/custom-config-panel/\n *\n * Architecture Pattern:\n * --------------------\n * - Library: Manages component placement, drag/drop, resize, undo/redo\n * - Host App: Manages canvas metadata, custom UI (headers, modals), business logic\n *\n * ## Multiple Palettes Pattern (Featured in this Demo)\n *\n * **Why use multiple palettes:**\n * - Better component organization (group by category, purpose, or feature)\n * - Collapsible sections save screen space\n * - Easier to find components in large libraries\n * - Matches common UI patterns (like the example mockup)\n *\n * **How it works:**\n * 1. Create categorized component arrays:\n *    ```typescript\n *    const contentComponents = [header, article, ...];\n *    const interactiveComponents = [button, link, ...];\n *    ```\n *\n * 2. Render multiple `<component-palette>` instances:\n *    ```typescript\n *    <component-palette components={contentComponents} showHeader={false} />\n *    <component-palette components={interactiveComponents} showHeader={false} />\n *    ```\n *\n * 3. All palettes work with the same canvases:\n *    - Each palette initializes its own drag handlers\n *    - All drag to the same `<canvas-section>` dropzones\n *    - Component type (not palette source) determines behavior\n *    - grid-builder registers ALL components for rendering\n *\n * **Key Points:**\n * - Pass all components to grid-builder (for type registration)\n * - Use chromeless mode (`showHeader={false}`) for custom headers\n * - Each palette manages its own drag/drop independently\n * - Canvases accept drops from any palette\n * - No coordination needed between palettes\n *\n * **Implementation in this demo:**\n * - Content category: Headers, Articles (text-based components)\n * - Interactive category: Buttons, CTAs (action components)\n * - Collapsible sections with expand/collapse state\n * - Clean categorized UI matching modern design patterns\n *\n * ## Custom Config Panel Pattern (Featured in this Demo)\n *\n * **Why use a custom config panel:**\n * - Match your application's design system and branding\n * - Add custom validation or business logic\n * - Integrate with other parts of your application\n * - Control the user experience and workflow\n *\n * **How it works:**\n * 1. Disable the library's default config panel using the showConfigPanel prop:\n *    ```typescript\n *    <grid-builder\n *      components={components}\n *      showConfigPanel={false}  // Hide default config panel\n *      ...\n *    />\n *    ```\n\n\n\n\n\n\n\n *\n * 2. Access the Grid Builder API:\n *    ```typescript\n *    const api = (window as any).gridBuilderAPI;\n *    ```\n *\n * 3. Listen for item-click events:\n *    ```typescript\n *    document.addEventListener('item-click', (event: CustomEvent) => {\n *      const { itemId, canvasId } = event.detail;\n *      // Open your custom panel\n *    });\n *    ```\n *\n * 4. Implement live preview by directly updating state:\n *    ```typescript\n *    const state = api.getState();\n *    const canvas = state.canvases[canvasId];\n *    canvas.items[itemIndex] = {\n *      ...canvas.items[itemIndex],\n *      name: newValue\n *    };\n *    // Trigger reactivity\n *    state.canvases = { ...state.canvases };\n *    ```\n *\n * 5. Implement cancel/revert by storing original state:\n *    ```typescript\n *    // On panel open, store original values\n *    this.originalState = {\n *      name: item.name,\n *      config: { ...item.config }\n *    };\n *\n *    // On cancel, restore original values\n *    api.updateConfig(itemId, this.originalState.config);\n *    // Restore name using same pattern as live preview\n *    ```\n *\n * 6. Subscribe to componentDeleted for auto-close:\n *    ```typescript\n *    api.on('componentDeleted', (event) => {\n *      if (event.itemId === this.selectedItemId) {\n *        this.closePanel();\n *      }\n *    });\n *    ```\n *\n * **Key Library APIs Used:**\n * - `window.gridBuilderAPI` - Global API instance\n * - `api.getState()` - Get current grid state for direct manipulation\n * - `api.getItem(itemId)` - Find item across all canvases\n * - `api.updateConfig(itemId, config)` - Update item configuration\n * - `api.on(event, handler)` - Subscribe to library events\n * - `api.off(event, handler)` - Unsubscribe from library events\n *\n * **Event-driven Integration:**\n * - `item-click` - Fired when user clicks a component (use document.addEventListener)\n * - `componentDeleted` - Fired when a component is deleted (use api.on)\n * - Manual event listeners required for custom events on document\n *\n * **Implementation in this demo:**\n * - See `custom-config-panel.tsx` for complete implementation\n * - Purple gradient styling matching blog theme\n * - Live preview for component name and config fields\n * - Cancel button reverts all changes\n * - Save button persists changes\n * - Auto-closes when selected component is deleted\n */\n\n@Component({\n  tag: 'blog-app',\n  styleUrl: 'blog-app.scss',\n  shadow: false,\n})\nexport class BlogApp {\n  /**\n   * Grid Builder API instance (accessed from window.gridBuilderAPI)\n   * Must be @State to trigger re-render when API becomes available\n   */\n  @State() private api!: GridBuilderAPI;\n\n  /**\n   * Local undo/redo state (synced from API)\n   * ------------------------------------\n   *\n   * Why local state instead of imported undoRedoState:\n   * - Stencil reactivity doesn't work across module boundaries\n   * - When demo is built separately from library, imported store is different instance\n   * - Local @State() properties trigger re-renders reliably\n   *\n   * Synchronization:\n   * - Updated via API events in setupGridBuilderIntegration()\n   * - Listens to stateChanged event to update button states\n   */\n  @State() private canUndo: boolean = false;\n  @State() private canRedo: boolean = false;\n\n  private sectionCounter = 1;\n\n  /**\n   * Canvas Metadata State\n   * ---------------------\n   *\n   * Library Feature: canvasMetadata prop (optional)\n   *\n   * Purpose:\n   * - Host app owns presentation metadata (titles, colors, custom settings)\n   * - Library owns placement state (items, layouts, zIndex)\n   * - This separation allows library to focus on grid logic\n   *\n   * Pattern:\n   * - Library fires canvasAdded/canvasRemoved events\n   * - Host app syncs metadata when canvases are added/removed\n   * - Host app passes metadata to library via canvasMetadata prop\n   * - Library passes backgroundColor to canvas-section components\n   *\n   * Note on Undo/Redo:\n   * - Canvas add/remove operations support undo/redo (handled by library)\n   * - Color changes are immediate (no undo for now - could be added)\n   */\n  @State() canvasMetadata: Record<string, { title: string; backgroundColor: string }> = {\n    'hero-section': {\n      title: 'Hero Section',\n      backgroundColor: '#f0f4f8',\n    },\n    'articles-grid': {\n      title: 'Articles Grid',\n      backgroundColor: '#ffffff',\n    },\n    'footer-section': {\n      title: 'Footer Section',\n      backgroundColor: '#e8f0f2',\n    },\n  };\n\n  /**\n   * Section Editor Panel State\n   * ---------------------------\n   *\n   * Demo-specific state for section editing UI.\n   * This is NOT part of the library - it's custom host app UI.\n   */\n  @State() isPanelOpen: boolean = false;\n  @State() editingSection: SectionEditorData | null = null;\n\n  /**\n   * Confirmation Modal State\n   * -------------------------\n   *\n   * Library Feature: Deletion Hook System\n   *\n   * This state demonstrates how to use the library's onBeforeDelete hook\n   * to show a confirmation modal before component deletion.\n   *\n   * Pattern:\n   * 1. Library calls onBeforeDelete with deletion context\n   * 2. Host app returns Promise<boolean>\n   * 3. Host app shows modal and stores Promise resolve function\n   * 4. User confirms/cancels modal\n   * 5. Host app calls resolve(true/false)\n   * 6. Library proceeds with or cancels deletion\n   *\n   * Note: The modal component itself is NOT part of the library.\n   * This allows you to use any modal library (Material, Bootstrap, etc.)\n   */\n  @State() isConfirmModalOpen: boolean = false;\n  @State() confirmModalData: ConfirmationModalData | null = null;\n  private deleteResolve: ((value: boolean) => void) | null = null;\n\n  /**\n   * Categorized Palette State\n   * --------------------------\n   *\n   * Demonstrates multiple palette pattern:\n   * - Each category has its own expanded/collapsed state\n   * - Multiple palettes render independently\n   * - All palettes drag to the same canvases\n   * - Enables better component organization\n   */\n  @State() categoryStates: Record<string, boolean> = {\n    content: true, // Content category expanded by default\n    interactive: true, // Interactive category expanded by default\n    media: true, // Media category expanded by default\n  };\n\n  /**\n   * View Mode State\n   * ----------------\n   *\n   * Toggle between edit mode (grid builder) and preview mode (viewer).\n   * - Edit mode: Shows grid, palette, resize handles, config panel\n   * - Preview mode: Shows only the final rendered components\n   */\n  @State() isPreviewMode: boolean = false;\n\n  /**\n   * Current Grid State (for viewer mode)\n   * -------------------------------------\n   *\n   * Stores the current grid state when switching to preview mode.\n   * This ensures the viewer has the latest state from the builder.\n   */\n  @State() currentGridState: any = null;\n\n  /**\n   * Sidebar Collapsed State\n   * ------------------------\n   *\n   * Toggle component palette sidebar visibility.\n   * - Collapsed: Hides sidebar, gives more space to canvas\n   * - Expanded: Shows sidebar with components (default)\n   */\n  @State() isSidebarCollapsed: boolean = false;\n\n  componentWillLoad() {\n    // Grid-builder components are built alongside the demo\n    this.updateCanvasStyles();\n  }\n\n  componentDidLoad() {\n    // Wait for grid-builder to initialize and expose API on window\n    // Check every 50ms for up to 2 seconds\n    let attempts = 0;\n    const maxAttempts = 40; // 2 seconds / 50ms\n\n    const checkForAPI = () => {\n      attempts++;\n\n      if ((window as any).gridBuilderAPI) {\n        console.log('üîß blog-app found API on window, initializing...');\n        this.api = (window as any).gridBuilderAPI;\n        this.setupGridBuilderIntegration();\n      } else if (attempts < maxAttempts) {\n        setTimeout(checkForAPI, 50);\n      } else {\n        console.warn('‚ö†Ô∏è blog-app timeout waiting for API');\n      }\n    };\n\n    checkForAPI();\n  }\n\n  /**\n   * Track whether we've initialized the API integration\n   */\n  private apiInitialized = false;\n\n  private setupGridBuilderIntegration() {\n    console.log('üîß blog-app setupGridBuilderIntegration called', {\n      apiInitialized: this.apiInitialized,\n      hasApi: !!this.api,\n      apiType: typeof this.api,\n    });\n\n    // Only initialize once, and only when API is available\n    if (this.apiInitialized || !this.api) {\n      console.log('  ‚è≠Ô∏è Skipping setup -', {\n        alreadyInitialized: this.apiInitialized,\n        noApi: !this.api,\n      });\n      return;\n    }\n\n    console.log('  ‚úÖ Proceeding with API setup');\n    this.apiInitialized = true;\n\n    // Inject canvas headers after initial render\n    // This is demo-specific UI (not part of library)\n    setTimeout(() => {\n      this.injectCanvasHeaders();\n    }, 100);\n\n    /**\n     * Listen to canvas-click Events\n     * ------------------------------\n     *\n     * Library Feature: Custom Events\n     *\n     * The library fires custom events when users interact with the grid:\n     * - canvas-click: When user clicks canvas background\n     * - component-added: When component is added to grid\n     * - component-removed: When component is removed from grid\n     * - etc.\n     *\n     * These events allow host apps to respond to user interactions.\n     */\n    const gridBuilder = document.querySelector('grid-builder');\n    if (gridBuilder) {\n      gridBuilder.addEventListener('canvas-click', ((event: CustomEvent) => {\n        const { canvasId } = event.detail;\n        console.log('Canvas clicked:', canvasId);\n        // In a real app, this would show a canvas settings panel\n        // For now, we just log it to demonstrate the event\n      }) as EventListener);\n    }\n\n    /**\n     * Subscribe to Library Events\n     * ----------------------------\n     *\n     * Library Feature: Event System (GridBuilderAPI.on)\n     *\n     * The API provides an event system for state change notifications:\n     * - canvasAdded: Fired when canvas is added (including via undo/redo)\n     * - canvasRemoved: Fired when canvas is removed (including via undo/redo)\n     * - stateChanged: Fired on any state change\n     *\n     * This allows host apps to sync their metadata with library state.\n     *\n     * Pattern:\n     * - Library manages placement state (items, layouts, zIndex)\n     * - Library fires events when canvases are added/removed\n     * - Host app adds/removes metadata in response to events\n     * - This keeps host app metadata in sync with library state\n     */\n    this.api.on('canvasAdded', (event) => {\n      const { canvasId } = event;\n      // Add metadata for new canvas if it doesn't exist\n      if (!this.canvasMetadata[canvasId]) {\n        const title = `Custom Section ${this.sectionCounter++}`;\n        this.canvasMetadata = {\n          ...this.canvasMetadata,\n          [canvasId]: {\n            title,\n            backgroundColor: '#f5f5f5',\n          },\n        };\n      }\n    });\n\n    this.api.on('canvasRemoved', (event) => {\n      const { canvasId } = event;\n      console.log('üóëÔ∏è canvasRemoved event received:', canvasId);\n\n      // Remove metadata when canvas is removed\n      // This keeps metadata in sync with library state\n      const updated = { ...this.canvasMetadata };\n      delete updated[canvasId];\n      this.canvasMetadata = updated;\n      console.log('  ‚úÖ Metadata removed for:', canvasId);\n\n      // Remove injected header (demo-specific UI)\n      this.removeCanvasHeader(canvasId);\n      console.log('  ‚úÖ Header removal attempted for:', canvasId);\n    });\n\n    /**\n     * Sync undo/redo button state\n     * -----------------------------\n     *\n     * Since Stencil reactivity doesn't work across module boundaries,\n     * we listen to library events that indicate undo/redo state changes.\n     *\n     * Events that change undo/redo state:\n     * - componentAdded, componentDeleted (modify history)\n     * - componentDragged, componentResized (modify history)\n     * - componentsBatchAdded, componentsBatchDeleted (modify history)\n     * - canvasAdded, canvasRemoved (modify history)\n     *\n     * This ensures undo/redo buttons update correctly in the demo.\n     */\n\n    // Initial sync\n    this.syncUndoRedoState();\n\n    // Listen to all events that modify history\n    const eventsToWatch = [\n      'componentAdded',\n      'componentDeleted',\n      'componentDragged',\n      'componentResized',\n      'componentsBatchAdded',\n      'componentsBatchDeleted',\n      'canvasAdded',\n      'canvasRemoved',\n      'undoExecuted',  // Library emits this when undo() is called\n      'redoExecuted'   // Library emits this when redo() is called\n    ];\n\n    eventsToWatch.forEach(eventName => {\n      this.api.on(eventName, this.syncUndoRedoState);\n    });\n  }\n\n  private syncUndoRedoState = () => {\n    if (!this.api) return;\n\n    const newCanUndo = this.api.canUndo();\n    const newCanRedo = this.api.canRedo();\n\n    // Only update if changed (avoid unnecessary re-renders)\n    if (this.canUndo !== newCanUndo) {\n      this.canUndo = newCanUndo;\n    }\n    if (this.canRedo !== newCanRedo) {\n      this.canRedo = newCanRedo;\n    }\n  };\n\n  componentDidUpdate() {\n    // Update canvas styles whenever metadata changes\n    this.updateCanvasStyles();\n    // Inject canvas headers\n    this.injectCanvasHeaders();\n  }\n\n  private updateCanvasStyles = () => {\n    // Apply canvas background colors via CSS custom properties\n    Object.keys(this.canvasMetadata).forEach((canvasId) => {\n      const canvas = document.querySelector(`[data-canvas-id=\"${canvasId}\"] .grid-container`) as HTMLElement;\n      if (canvas) {\n        canvas.style.backgroundColor = this.canvasMetadata[canvasId].backgroundColor;\n      }\n    });\n  };\n\n  private removeCanvasHeader = (canvasId: string) => {\n    console.log('üîç removeCanvasHeader called for:', canvasId);\n    // Find and remove the header for this canvas\n    const headers = document.querySelectorAll('.canvas-header');\n    console.log('  üìã Total headers found:', headers.length);\n\n    let removed = false;\n    headers.forEach((header) => {\n      const headerCanvasId = header.getAttribute('data-canvas-id');\n      console.log('  üîé Checking header with data-canvas-id:', headerCanvasId);\n\n      if (headerCanvasId === canvasId) {\n        console.log('  ‚úÖ Match found! Removing header for:', canvasId);\n        header.remove();\n        removed = true;\n      }\n    });\n\n    if (!removed) {\n      console.warn('  ‚ö†Ô∏è No matching header found for:', canvasId);\n    }\n  };\n\n  private injectCanvasHeaders = () => {\n    // Inject section headers before each canvas-section\n    Object.keys(this.canvasMetadata).forEach((canvasId) => {\n      // Find canvas-section by looking for the inner div with data-canvas-id\n      const innerDiv = document.querySelector(`[data-canvas-id=\"${canvasId}\"]`) as HTMLElement;\n      if (!innerDiv) return;\n\n      const canvasSection = innerDiv.closest('canvas-section') as HTMLElement;\n      if (!canvasSection) return;\n\n      // Check if header already exists\n      let header = canvasSection.previousElementSibling as HTMLElement;\n      if (header && header.tagName.toLowerCase() === 'canvas-header') {\n        // Update existing header component - update sectionTitle prop\n        (header as any).sectionTitle = this.canvasMetadata[canvasId]?.title || canvasId;\n      } else {\n        // Create new header component\n        header = this.createCanvasHeader(canvasId);\n        canvasSection.parentElement?.insertBefore(header, canvasSection);\n      }\n    });\n  };\n\n  private createCanvasHeader = (canvasId: string): HTMLElement => {\n    // Create canvas-header component element\n    const header = document.createElement('canvas-header') as any;\n\n    // Set component properties\n    header.canvasId = canvasId;\n    header.sectionTitle = this.canvasMetadata[canvasId]?.title || canvasId;\n    header.isDeletable = !['hero-section', 'articles-grid', 'footer-section'].includes(canvasId);\n\n    // Add event listeners\n    header.addEventListener('headerClick', () => {\n      // Activate the canvas (adds visual highlight)\n      setActiveCanvas(canvasId);\n      // Open section editor panel\n      this.handleOpenSectionEditor(canvasId);\n    });\n\n    header.addEventListener('deleteClick', () => {\n      this.handleDeleteSection(canvasId);\n    });\n\n    return header;\n  };\n\n  private handleOpenSectionEditor = (canvasId: string) => {\n    const metadata = this.canvasMetadata[canvasId];\n    if (metadata) {\n      this.editingSection = {\n        canvasId,\n        title: metadata.title,\n        backgroundColor: metadata.backgroundColor,\n      };\n      this.isPanelOpen = true;\n    }\n  };\n\n  private handleClosePanel = () => {\n    this.isPanelOpen = false;\n    this.editingSection = null;\n  };\n\n  private handleUpdateSection = (event: CustomEvent<{ canvasId: string; title: string; backgroundColor: string }>) => {\n    const { canvasId, title, backgroundColor } = event.detail;\n    this.canvasMetadata = {\n      ...this.canvasMetadata,\n      [canvasId]: {\n        title,\n        backgroundColor,\n      },\n    };\n  };\n\n  /**\n   * Preview Color Change Handler\n   * ------------------------------\n   *\n   * Handles live preview of background color changes.\n   * Updates canvas background immediately without saving to metadata.\n   * This allows real-time preview while editing, with revert on cancel.\n   */\n  private handlePreviewColorChange = (event: CustomEvent<{ canvasId: string; backgroundColor: string }>) => {\n    const { canvasId, backgroundColor } = event.detail;\n    // Directly update canvas background color (don't update metadata yet)\n    const canvas = document.querySelector(`[data-canvas-id=\"${canvasId}\"] .grid-container`) as HTMLElement;\n    if (canvas) {\n      canvas.style.backgroundColor = backgroundColor;\n    }\n  };\n\n  /**\n   * Preview Title Change Handler\n   * -----------------------------\n   *\n   * Handles live preview of section title changes.\n   * Updates canvas title immediately without saving to metadata.\n   * This allows real-time preview while editing, with revert on cancel.\n   */\n  private handlePreviewTitleChange = (event: CustomEvent<{ canvasId: string; title: string }>) => {\n    const { canvasId, title } = event.detail;\n    // Find the canvas header for this canvas\n    const header = document.querySelector(`.canvas-header[data-canvas-id=\"${canvasId}\"]`) as HTMLElement;\n    if (header) {\n      const titleEl = header.querySelector('.canvas-title') as HTMLElement;\n      if (titleEl) {\n        // Directly update title text (don't update metadata yet)\n        titleEl.textContent = title;\n      }\n    }\n  };\n\n  /**\n   * Deletion Hook Handler\n   * ----------------------\n   *\n   * Library Feature: onBeforeDelete Hook (grid-builder prop)\n   *\n   * This is the most important demonstration in this demo. It shows how to use\n   * the library's deletion hook system to implement custom deletion workflows.\n   *\n   * What the Library Provides:\n   * - onBeforeDelete prop on grid-builder component\n   * - Hook receives DeletionHookContext with item data\n   * - Hook returns boolean or Promise<boolean>\n   * - Library waits for hook approval before deleting\n   * - If hook returns false, deletion is cancelled\n   * - If hook returns true, deletion proceeds\n   *\n   * What the Host App Provides:\n   * - This hook handler function\n   * - Confirmation modal component (any modal library works)\n   * - Custom deletion logic (API calls, validation, etc.)\n   *\n   * How It Works:\n   * 1. User clicks delete button on component\n   * 2. Library calls this hook with deletion context\n   * 3. Hook returns a Promise (doesn't resolve immediately)\n   * 4. Hook shows confirmation modal\n   * 5. User confirms or cancels\n   * 6. Hook resolves Promise with true/false\n   * 7. Library proceeds with or cancels deletion\n   *\n   * Why This Pattern:\n   * - Keeps modal UI out of library (use any modal you want)\n   * - Supports async operations (API calls, confirmations)\n   * - Gives host app full control over deletion workflow\n   * - Backward compatible (no hook = immediate deletion)\n   *\n   * Example Use Cases:\n   * - Confirmation modals (this demo)\n   * - API calls before deletion\n   * - Permission checks\n   * - Validation logic\n   * - Analytics tracking\n   */\n  private handleBeforeDelete = (context: DeletionHookContext): Promise<boolean> => {\n    return new Promise((resolve) => {\n      // Store the Promise resolve function\n      // We'll call this from the modal confirm/cancel handlers\n      this.deleteResolve = resolve;\n\n      // Extract component info from deletion context\n      // Context provides: item (GridItem), canvasId, itemId\n      const componentType = context.item.type;\n      const componentName = context.item.name || componentType;\n\n      // Show confirmation modal with component info\n      // This is demo-specific - you can use any modal library\n      this.confirmModalData = {\n        title: 'Delete Component?',\n        message: `Are you sure you want to delete \"${componentName}\"? This action cannot be undone.`,\n      };\n      this.isConfirmModalOpen = true;\n\n      // Promise won't resolve until user confirms/cancels\n      // The library will wait for this Promise before proceeding\n    });\n  };\n\n  /**\n   * Confirm Deletion Handler\n   * -------------------------\n   *\n   * Called when user clicks \"Delete\" button in confirmation modal.\n   * Resolves the deletion hook Promise with `true` to proceed with deletion.\n   */\n  private handleConfirmDelete = () => {\n    this.isConfirmModalOpen = false;\n    this.confirmModalData = null;\n    if (this.deleteResolve) {\n      this.deleteResolve(true); // Tell library to proceed with deletion\n      this.deleteResolve = null;\n    }\n  };\n\n  /**\n   * Cancel Deletion Handler\n   * ------------------------\n   *\n   * Called when user clicks \"Cancel\" button in confirmation modal.\n   * Resolves the deletion hook Promise with `false` to cancel deletion.\n   */\n  private handleCancelDelete = () => {\n    this.isConfirmModalOpen = false;\n    this.confirmModalData = null;\n    if (this.deleteResolve) {\n      this.deleteResolve(false); // Tell library to cancel deletion\n      this.deleteResolve = null;\n    }\n  };\n\n  private handleAddSection = () => {\n    if (!this.api) {\n      console.error('API not ready');\n      return;\n    }\n\n    const newCanvasId = `custom-section-${this.sectionCounter}`;\n\n    // Add canvas via library API (includes undo/redo)\n    this.api.addCanvas(newCanvasId);\n\n    // Metadata will be added automatically via canvasAdded event listener\n  };\n\n  private handleDeleteSection = (canvasId: string) => {\n    if (!this.api) {\n      console.error('API not ready');\n      return;\n    }\n\n    // Prevent deleting initial sections\n    if (['hero-section', 'articles-grid', 'footer-section'].includes(canvasId)) {\n      alert('Cannot delete initial sections');\n      return;\n    }\n\n    // Remove canvas via library API (includes undo/redo)\n    this.api.removeCanvas(canvasId);\n\n    // Metadata will be removed automatically via canvasRemoved event listener\n    // Header will also be removed in the canvasRemoved event listener\n  };\n\n  /**\n   * Handle section deletion from editor panel\n   */\n  private handleDeleteSectionFromPanel = (event: CustomEvent<{ canvasId: string }>) => {\n    const { canvasId } = event.detail;\n    this.handleDeleteSection(canvasId);\n    // Close the panel (already handled in section-editor-panel, but ensure it's closed)\n    this.isPanelOpen = false;\n  };\n\n  /**\n   * Toggle Category Collapse/Expand\n   * --------------------------------\n   *\n   * Demonstrates state management for collapsible categories.\n   * Each category (content, interactive) can be independently toggled.\n   */\n  private toggleCategory = (category: string) => {\n    this.categoryStates = {\n      ...this.categoryStates,\n      [category]: !this.categoryStates[category],\n    };\n  };\n\n  /**\n   * Toggle Preview Mode\n   * -------------------\n   *\n   * Switches between edit mode and preview mode:\n   * - Edit mode: Shows palette, grid, resize handles, editing UI\n   * - Preview mode: Shows only rendered components (final output)\n   *\n   * Also clears both grid size cache and DOM cache to ensure fresh calculations when switching.\n   */\n  private togglePreviewMode = () => {\n    // Capture current state from API before switching to preview mode\n    if (!this.isPreviewMode && this.api) {\n      this.currentGridState = this.api.getState();\n    }\n\n    this.isPreviewMode = !this.isPreviewMode;\n\n    // Clear both caches to force fresh calculations\n    // Grid size cache: Clears cached grid unit sizes\n    // DOM cache: Clears cached canvas element references (prevents stale DOM references)\n    clearGridSizeCache();\n    domCache.clear();\n\n    // This ensures items render at correct positions when switching modes\n  };\n\n  /**\n   * Toggle Sidebar Collapsed\n   * -------------------------\n   *\n   * Collapses/expands the component palette sidebar:\n   * - Collapsed: Hides sidebar, gives more canvas space\n   * - Expanded: Shows sidebar with categorized components\n   */\n  private toggleSidebarCollapsed = () => {\n    this.isSidebarCollapsed = !this.isSidebarCollapsed;\n  };\n\n  @State() initialState = {\n    canvases: {\n      'hero-section': {\n        zIndexCounter: 2,\n        items: [\n          {\n            id: 'hero-header',\n            canvasId: 'hero-section',\n            type: 'blog-header',\n            name: 'Hero Header',\n            layouts: {\n              desktop: { x: 0, y: 0, width: 50, height: 6 },\n              mobile: { x: null, y: null, width: null, height: null, customized: false },\n            },\n            zIndex: 1,\n            config: {\n              title: 'Welcome to My Blog',\n              subtitle: 'Exploring technology, design, and development',\n            },\n          },\n          {\n            id: 'hero-button',\n            canvasId: 'hero-section',\n            type: 'blog-button',\n            name: 'Hero CTA',\n            layouts: {\n              desktop: { x: 15, y: 7, width: 20, height: 3 },\n              mobile: { x: null, y: null, width: null, height: null, customized: false },\n            },\n            zIndex: 2,\n            config: {\n              label: 'Start Reading',\n              variant: 'primary',\n            },\n          },\n        ],\n      },\n      'articles-grid': {\n        zIndexCounter: 4,\n        items: [\n          {\n            id: 'article-1',\n            canvasId: 'articles-grid',\n            type: 'blog-article',\n            name: 'First Article',\n            layouts: {\n              desktop: { x: 0, y: 0, width: 25, height: 12 },\n              mobile: { x: null, y: null, width: null, height: null, customized: false },\n            },\n            zIndex: 1,\n            config: {\n              content: 'This is my first blog post about using the grid-builder library!',\n              author: 'Jane Doe',\n              date: '2025-01-15',\n            },\n          },\n          {\n            id: 'article-2',\n            canvasId: 'articles-grid',\n            type: 'blog-article',\n            name: 'Second Article',\n            layouts: {\n              desktop: { x: 25, y: 0, width: 25, height: 12 },\n              mobile: { x: null, y: null, width: null, height: null, customized: false },\n            },\n            zIndex: 2,\n            config: {\n              content: 'Another interesting post about custom Stencil components.',\n              author: 'John Smith',\n              date: '2025-01-14',\n            },\n          },\n          {\n            id: 'featured-image',\n            canvasId: 'articles-grid',\n            type: 'blog-image',\n            name: 'Featured Image',\n            layouts: {\n              desktop: { x: 0, y: 13, width: 12, height: 15 },\n              mobile: { x: null, y: null, width: null, height: null, customized: false },\n            },\n            zIndex: 3,\n            config: {\n              src: 'https://images.unsplash.com/photo-1498050108023-c5249f4df085?w=800&h=600&fit=crop',\n              alt: 'Developer workspace with laptop and code',\n              caption: 'A modern development environment',\n              objectFit: 'cover',\n            },\n          },\n          {\n            id: 'article-3',\n            canvasId: 'articles-grid',\n            type: 'blog-article',\n            name: 'Third Article',\n            layouts: {\n              desktop: { x: 12, y: 13, width: 26, height: 12 },\n              mobile: { x: null, y: null, width: null, height: null, customized: false },\n            },\n            zIndex: 4,\n            config: {\n              content: 'Learn how to build amazing layouts with drag-and-drop functionality.',\n              author: 'Alex Chen',\n              date: '2025-01-13',\n            },\n          },\n        ],\n      },\n      'footer-section': {\n        zIndexCounter: 2,\n        items: [\n          {\n            id: 'footer-header',\n            canvasId: 'footer-section',\n            type: 'blog-header',\n            name: 'Footer Header',\n            layouts: {\n              desktop: { x: 0, y: 0, width: 50, height: 4 },\n              mobile: { x: null, y: null, width: null, height: null, customized: false },\n            },\n            zIndex: 1,\n            config: {\n              title: 'Stay Connected',\n              subtitle: 'Subscribe for updates',\n            },\n          },\n          {\n            id: 'footer-button',\n            canvasId: 'footer-section',\n            type: 'blog-button',\n            name: 'Subscribe Button',\n            layouts: {\n              desktop: { x: 15, y: 5, width: 20, height: 3 },\n              mobile: { x: null, y: null, width: null, height: null, customized: false },\n            },\n            zIndex: 2,\n            config: {\n              label: 'Subscribe Now',\n              variant: 'primary',\n            },\n          },\n        ],\n      },\n    },\n  };\n\n  render() {\n    // Calculate canvas header overlay margin from grid size (1.4 grid units)\n    const verticalGridSize = getGridSizeVertical();\n    const canvasHeaderOverlayMargin = -(verticalGridSize * 1.4);\n\n    return (\n      <div\n        class={`blog-app-container ${this.isPreviewMode ? 'preview-mode' : ''}`}\n        style={{\n          '--canvas-header-overlay-margin': `${canvasHeaderOverlayMargin}px`,\n        } as any}\n      >\n        <div class=\"app-header\">\n          <div class=\"app-header-content\">\n            <h1 class=\"app-title\">Blog Layout Builder Demo</h1>\n            <p class=\"app-subtitle\">\n              Using custom Stencil components with @lucidworks/stencil-grid-builder\n            </p>\n          </div>\n          <div class=\"global-controls\">\n            <button\n              class=\"preview-toggle-btn\"\n              onClick={this.togglePreviewMode}\n              title={this.isPreviewMode ? 'Switch to Edit Mode' : 'Switch to Preview Mode'}\n            >\n              {this.isPreviewMode ? '‚úèÔ∏è Edit Mode' : 'üëÅÔ∏è Preview'}\n            </button>\n            {!this.isPreviewMode && (\n              <div class=\"metadata-undo-redo\">\n                <button\n                  class=\"undo-btn\"\n                  onClick={() => this.api?.undo()}\n                  disabled={!this.api || !this.canUndo}\n                  title=\"Undo (components and sections)\"\n                >\n                  ‚Ü∂ Undo\n                </button>\n                <button\n                  class=\"redo-btn\"\n                  onClick={() => this.api?.redo()}\n                  disabled={!this.api || !this.canRedo}\n                  title=\"Redo (components and sections)\"\n                >\n                  ‚Ü∑ Redo\n                </button>\n              </div>\n            )}\n            {!this.isPreviewMode && (\n              <button class=\"add-section-btn\" onClick={this.handleAddSection}>\n                ‚ûï Add Section\n              </button>\n            )}\n          </div>\n        </div>\n\n        {/* Main content area with categorized palettes */}\n        <div class=\"demo-layout\">\n          {/* Categorized Component Palettes - Hidden in preview mode */}\n          {!this.isPreviewMode && !this.isSidebarCollapsed && (\n            <div class=\"categorized-palette-sidebar\">\n              <div class=\"palette-header\">\n                <h2 class=\"palette-title\">Components</h2>\n                <button\n                  class=\"sidebar-collapse-btn\"\n                  onClick={this.toggleSidebarCollapsed}\n                  title=\"Collapse sidebar\"\n                >\n                  ‚óÄ\n                </button>\n              </div>\n\n              {/* Content Category */}\n              <div class=\"palette-category\">\n                <div\n                  class=\"category-header\"\n                  onClick={() => this.toggleCategory('content')}\n                >\n                  <span class=\"category-icon\">{this.categoryStates.content ? '‚ñº' : '‚ñ∂'}</span>\n                  <span class=\"category-name\">Content</span>\n                </div>\n                {this.categoryStates.content && (\n                  <component-palette\n                    components={contentComponents}\n                    showHeader={false}\n                  />\n                )}\n              </div>\n\n              {/* Interactive Category */}\n              <div class=\"palette-category\">\n                <div\n                  class=\"category-header\"\n                  onClick={() => this.toggleCategory('interactive')}\n                >\n                  <span class=\"category-icon\">{this.categoryStates.interactive ? '‚ñº' : '‚ñ∂'}</span>\n                  <span class=\"category-name\">Interactive</span>\n                </div>\n                {this.categoryStates.interactive && (\n                  <component-palette\n                    components={interactiveComponents}\n                    showHeader={false}\n                  />\n                )}\n              </div>\n\n              {/* Media Category */}\n              <div class=\"palette-category\">\n                <div\n                  class=\"category-header\"\n                  onClick={() => this.toggleCategory('media')}\n                >\n                  <span class=\"category-icon\">{this.categoryStates.media ? '‚ñº' : '‚ñ∂'}</span>\n                  <span class=\"category-name\">Media</span>\n                </div>\n                {this.categoryStates.media && (\n                  <component-palette\n                    components={mediaComponents}\n                    showHeader={false}\n                  />\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Floating expand button when sidebar is collapsed */}\n          {!this.isPreviewMode && this.isSidebarCollapsed && (\n            <button\n              class=\"sidebar-expand-btn\"\n              onClick={this.toggleSidebarCollapsed}\n              title=\"Expand sidebar\"\n            >\n              ‚ñ∂\n            </button>\n          )}\n\n          {/* Grid Builder / Viewer - all components for registration */}\n          <div class=\"grid-builder-area\">\n            {this.isPreviewMode ? (\n              <grid-viewer\n                key=\"viewer\"\n                components={blogComponentDefinitions}\n                initialState={this.currentGridState || this.initialState}\n                canvasMetadata={this.canvasMetadata}\n              />\n            ) : (\n              <grid-builder\n                key=\"builder\"\n                components={blogComponentDefinitions}\n                config={{\n                  enableAnimations: true,\n                  animationDuration: 100,\n                }}\n                initialState={this.initialState}\n                canvasMetadata={this.canvasMetadata}\n                onBeforeDelete={this.handleBeforeDelete}\n              />\n            )}\n          </div>\n        </div>\n\n        <section-editor-panel\n          isOpen={this.isPanelOpen}\n          sectionData={this.editingSection}\n          onClosePanel={this.handleClosePanel}\n          onUpdateSection={this.handleUpdateSection}\n          onPreviewColorChange={this.handlePreviewColorChange}\n          onPreviewTitleChange={this.handlePreviewTitleChange}\n          onDeleteSection={this.handleDeleteSectionFromPanel}\n        />\n\n        <confirmation-modal\n          isOpen={this.isConfirmModalOpen}\n          data={this.confirmModalData}\n          onConfirm={this.handleConfirmDelete}\n          onCancel={this.handleCancelDelete}\n        />\n\n        {/* Custom Config Panel (demo-specific) */}\n        <custom-config-panel api={this.api} />\n      </div>\n    );\n  }\n}\n"],"names":[],"mappings":"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"}