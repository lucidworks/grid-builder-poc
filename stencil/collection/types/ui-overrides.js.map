{"version":3,"file":"ui-overrides.js","sourceRoot":"","sources":["../../src/types/ui-overrides.ts"],"names":[],"mappings":"AAAA;;;;;;GAMG","sourcesContent":["/**\n * UI Override Types\n * ==================\n *\n * Type definitions for pluggable UI components that consumers can override\n * to customize the grid builder's appearance and behavior.\n */\n\nimport { GridItem } from '../services/state-manager';\nimport { ComponentDefinition } from './component-definition';\n\n/**\n * Config Panel Props\n * ===================\n *\n * Props passed to custom config panel components.\n * Used when consumer overrides the default config panel UI.\n *\n * **When to override**:\n * - Custom visual design (match your app's theme)\n * - Different layout/structure\n * - Additional validation UI\n * - Multi-step wizard\n * - Conditional field visibility\n *\n * **Example: Custom Config Panel**\n * ```typescript\n * const CustomConfigPanel = ({ item, config, onChange, onSave, onCancel }: ConfigPanelProps) => {\n *   return (\n *     <div class=\"my-custom-config-panel\">\n *       <h3>Configure {item.name}</h3>\n *       {config && Object.keys(config).map(key => (\n *         <div class=\"field\" key={key}>\n *           <label>{key}</label>\n *           <input\n *             value={config[key]}\n *             onChange={(e) => onChange(key, e.target.value)}\n *           />\n *         </div>\n *       ))}\n *       <div class=\"actions\">\n *         <button onClick={onCancel}>Cancel</button>\n *         <button class=\"primary\" onClick={onSave}>Save</button>\n *       </div>\n *     </div>\n *   );\n * };\n * ```\n */\nexport interface ConfigPanelProps {\n  /**\n   * The grid item being configured\n   *\n   * **Contains**:\n   * - item.id - Unique item ID\n   * - item.type - Component type (e.g., 'header', 'text')\n   * - item.name - Display name\n   * - item.layouts - Desktop/mobile layouts\n   *\n   * **Use cases**:\n   * - Display item name in panel header\n   * - Show item type icon\n   * - Display current position/size\n   * - Conditional UI based on item type\n   */\n  item: GridItem;\n\n  /**\n   * Component definition for this item type\n   *\n   * **Contains**:\n   * - definition.configSchema - Field definitions (if auto-generated)\n   * - definition.renderConfigPanel - Custom panel renderer (if custom)\n   * - definition.name - Display name\n   * - definition.icon - Icon/emoji\n   *\n   * **Use cases**:\n   * - Render fields from configSchema\n   * - Show component type info\n   * - Delegate to definition's renderConfigPanel\n   * - Type-specific config UI\n   */\n  definition: ComponentDefinition;\n\n  /**\n   * Current configuration values (temporary state during editing)\n   *\n   * **Important**: This is NOT the saved config, but temporary edit state\n   * **Structure**: Record<string, any> matching configSchema field names\n   *\n   * **Use cases**:\n   * - Populate form inputs\n   * - Live preview of changes\n   * - Validation checks\n   *\n   * @example\n   * ```typescript\n   * // For header component:\n   * config = {\n   *   text: 'Welcome!',\n   *   level: 'H1',\n   *   color: '#000000',\n   *   alignment: 'center'\n   * }\n   * ```\n   */\n  config: Record<string, any>;\n\n  /**\n   * Update single config field (live preview)\n   *\n   * **When to call**: On every input change for live preview\n   * **What it does**: Updates temporary config state, triggers component re-render\n   * **Does NOT save**: Changes only committed when onSave() called\n   *\n   * **Pattern**: Call on onChange/onInput handlers\n   *\n   * @param fieldName - Config field name (must match configSchema)\n   * @param value - New value for field\n   *\n   * @example\n   * ```typescript\n   * // Text input with live preview\n   * <input\n   *   value={config.text}\n   *   onChange={(e) => onChange('text', e.target.value)}\n   * />\n   *\n   * // Color picker with live preview\n   * <input\n   *   type=\"color\"\n   *   value={config.color}\n   *   onChange={(e) => onChange('color', e.target.value)}\n   * />\n   *\n   * // Select with live preview\n   * <select\n   *   value={config.level}\n   *   onChange={(e) => onChange('level', e.target.value)}\n   * >\n   *   <option value=\"H1\">H1</option>\n   *   <option value=\"H2\">H2</option>\n   * </select>\n   * ```\n   */\n  onChange: (fieldName: string, value: any) => void;\n\n  /**\n   * Save all config changes\n   *\n   * **When to call**: When user clicks \"Save\" or \"Apply\" button\n   * **What it does**:\n   * - Commits temporary config to item\n   * - Triggers 'configChanged' event\n   * - Closes config panel\n   * - Adds undo command\n   *\n   * **Pattern**: Attach to primary action button\n   *\n   * @example\n   * ```typescript\n   * <div class=\"actions\">\n   *   <button onClick={onCancel}>Cancel</button>\n   *   <button class=\"primary\" onClick={onSave}>\n   *     Apply Changes\n   *   </button>\n   * </div>\n   * ```\n   */\n  onSave: () => void;\n\n  /**\n   * Cancel config changes\n   *\n   * **When to call**: When user clicks \"Cancel\" or closes panel\n   * **What it does**:\n   * - Discards temporary config changes\n   * - Reverts component to previous config\n   * - Closes config panel\n   * - No undo command added\n   *\n   * **Pattern**: Attach to cancel button or close icon\n   *\n   * @example\n   * ```typescript\n   * <div class=\"panel-header\">\n   *   <h3>Configure Component</h3>\n   *   <button class=\"close\" onClick={onCancel}>‚úï</button>\n   * </div>\n   * ```\n   */\n  onCancel: () => void;\n}\n\n/**\n * Component Palette Props\n * ========================\n *\n * Props passed to custom component palette components.\n * Used when consumer overrides the default palette UI.\n *\n * **When to override**:\n * - Custom visual design (match your app's theme)\n * - Different layout (grid vs list, collapsible categories)\n * - Search/filter functionality\n * - Drag preview customization\n * - Tooltips/help text\n *\n * **Example: Custom Palette**\n * ```typescript\n * const CustomPalette = ({ components, onDragStart }: ComponentPaletteProps) => (\n *   <div class=\"my-custom-palette\">\n *     <h3>Components</h3>\n *     <div class=\"components-grid\">\n *       {components.map(comp => (\n *         <div\n *           class=\"palette-item\"\n *           draggable\n *           onDragStart={(e) => onDragStart(comp, e)}\n *         >\n *           <span class=\"icon\">{comp.icon}</span>\n *           <span class=\"name\">{comp.name}</span>\n *         </div>\n *       ))}\n *     </div>\n *   </div>\n * );\n * ```\n */\nexport interface ComponentPaletteProps {\n  /**\n   * Array of available component definitions\n   *\n   * **Contents**: All registered ComponentDefinition objects\n   * **Sorted**: By registration order (or consumer can sort)\n   *\n   * **Use cases**:\n   * - Render palette items\n   * - Group by category\n   * - Filter/search\n   * - Display component info\n   *\n   * @example\n   * ```typescript\n   * // Group by category\n   * const grouped = components.reduce((acc, comp) => {\n   *   const category = comp.type.split('-')[0]; // 'component-header' -> 'component'\n   *   if (!acc[category]) acc[category] = [];\n   *   acc[category].push(comp);\n   *   return acc;\n   * }, {});\n   * ```\n   */\n  components: ComponentDefinition[];\n\n  /**\n   * Callback to initiate drag operation\n   *\n   * **When to call**: On dragstart event of palette item\n   * **What it does**:\n   * - Sets up drag data transfer\n   * - Initializes drag state\n   * - Shows drag ghost/preview\n   *\n   * **Pattern**: Attach to draggable palette items\n   *\n   * @param component - Component definition being dragged\n   * @param event - Native drag event\n   *\n   * @example\n   * ```typescript\n   * <div\n   *   draggable\n   *   onDragStart={(e) => onDragStart(component, e)}\n   * >\n   *   {component.icon} {component.name}\n   * </div>\n   * ```\n   */\n  onDragStart: (component: ComponentDefinition, event: DragEvent) => void;\n}\n\n/**\n * Toolbar Props\n * ==============\n *\n * Props passed to custom toolbar components.\n * Used when consumer overrides the default toolbar UI.\n *\n * **When to override**:\n * - Custom visual design (match your app's theme)\n * - Different button layout\n * - Additional actions\n * - Custom keyboard shortcuts display\n * - Integration with app navigation\n *\n * **Example: Custom Toolbar**\n * ```typescript\n * const CustomToolbar = ({\n *   canUndo,\n *   canRedo,\n *   viewport,\n *   showGrid,\n *   onUndo,\n *   onRedo,\n *   onToggleViewport,\n *   onToggleGrid,\n *   onExport,\n *   onImport\n * }: ToolbarProps) => (\n *   <div class=\"my-custom-toolbar\">\n *     <div class=\"toolbar-section\">\n *       <button onClick={onUndo} disabled={!canUndo} title=\"Undo (Ctrl+Z)\">\n *         ‚Ü∂\n *       </button>\n *       <button onClick={onRedo} disabled={!canRedo} title=\"Redo (Ctrl+Shift+Z)\">\n *         ‚Ü∑\n *       </button>\n *     </div>\n *\n *     <div class=\"toolbar-section\">\n *       <button\n *         onClick={onToggleViewport}\n *         class={viewport === 'mobile' ? 'active' : ''}\n *       >\n *         {viewport === 'desktop' ? 'üñ•Ô∏è' : 'üì±'}\n *       </button>\n *       <button\n *         onClick={onToggleGrid}\n *         class={showGrid ? 'active' : ''}\n *       >\n *         Grid {showGrid ? 'On' : 'Off'}\n *       </button>\n *     </div>\n *\n *     <div class=\"toolbar-section\">\n *       <button onClick={onExport}>Export</button>\n *       <button onClick={onImport}>Import</button>\n *     </div>\n *   </div>\n * );\n * ```\n */\nexport interface ToolbarProps {\n  /**\n   * Whether undo is available\n   *\n   * **true**: Undo stack has commands\n   * **false**: No commands to undo\n   *\n   * **Use**: Disable undo button when false\n   */\n  canUndo: boolean;\n\n  /**\n   * Whether redo is available\n   *\n   * **true**: Redo stack has commands\n   * **false**: No commands to redo\n   *\n   * **Use**: Disable redo button when false\n   */\n  canRedo: boolean;\n\n  /**\n   * Current viewport mode\n   *\n   * **'desktop'**: Showing desktop layout\n   * **'mobile'**: Showing mobile layout\n   *\n   * **Use**: Toggle button active state\n   */\n  viewport: 'desktop' | 'mobile';\n\n  /**\n   * Whether grid lines are visible\n   *\n   * **true**: Grid lines showing\n   * **false**: Grid lines hidden\n   *\n   * **Use**: Toggle button active state\n   */\n  showGrid: boolean;\n\n  /**\n   * Perform undo operation\n   *\n   * **What it does**:\n   * - Reverts last command\n   * - Updates state\n   * - Triggers 'undo' event\n   *\n   * **Pattern**: Attach to undo button\n   */\n  onUndo: () => void;\n\n  /**\n   * Perform redo operation\n   *\n   * **What it does**:\n   * - Re-applies last undone command\n   * - Updates state\n   * - Triggers 'redo' event\n   *\n   * **Pattern**: Attach to redo button\n   */\n  onRedo: () => void;\n\n  /**\n   * Toggle viewport mode (desktop ‚Üî mobile)\n   *\n   * **What it does**:\n   * - Switches viewport mode\n   * - Re-renders with new layout\n   * - Triggers 'viewportChanged' event\n   *\n   * **Pattern**: Attach to viewport toggle button\n   */\n  onToggleViewport: () => void;\n\n  /**\n   * Toggle grid line visibility\n   *\n   * **What it does**:\n   * - Shows/hides grid lines\n   * - Updates state\n   *\n   * **Pattern**: Attach to grid toggle button\n   */\n  onToggleGrid: () => void;\n\n  /**\n   * Export current state to JSON\n   *\n   * **What it does**:\n   * - Serializes current state\n   * - Downloads JSON file\n   * - Or returns JSON for consumer handling\n   *\n   * **Pattern**: Attach to export button\n   */\n  onExport: () => void;\n\n  /**\n   * Import state from JSON\n   *\n   * **What it does**:\n   * - Opens file picker\n   * - Loads and validates JSON\n   * - Replaces current state\n   *\n   * **Pattern**: Attach to import button\n   */\n  onImport: () => void;\n}\n\n/**\n * UI Component Overrides\n * =======================\n *\n * Collection of custom UI components that can override default grid builder UI.\n * Pass to `<grid-builder uiOverrides={...} />` to customize appearance.\n *\n * **All overrides are optional**: Only override what you need.\n * Default components used for any undefined overrides.\n *\n * **Example: Override Config Panel and Toolbar**\n * ```typescript\n * const uiOverrides: UIComponentOverrides = {\n *   ConfigPanel: CustomConfigPanel,\n *   Toolbar: CustomToolbar\n *   // ComponentPalette uses default (not overridden)\n * };\n *\n * <grid-builder\n *   components={componentDefinitions}\n *   uiOverrides={uiOverrides}\n * />\n * ```\n *\n * **Example: Override All UI Components**\n * ```typescript\n * const uiOverrides: UIComponentOverrides = {\n *   ConfigPanel: MyConfigPanel,\n *   ComponentPalette: MyPalette,\n *   Toolbar: MyToolbar\n * };\n * ```\n */\nexport interface UIComponentOverrides {\n  /**\n   * Custom config panel component\n   *\n   * **When to override**:\n   * - Custom visual design\n   * - Multi-step wizard\n   * - Advanced validation\n   * - Different layout\n   *\n   * **Receives**: ConfigPanelProps\n   * **Must call**: onChange, onSave, onCancel appropriately\n   *\n   * **Auto-close on deletion**: Custom config panels should listen\n   * to the `componentDeleted` event via the EventManager and close\n   * themselves when the associated component is deleted:\n   * ```typescript\n   * // In your custom config panel component\n   * componentDidLoad() {\n   *   eventManager.on('componentDeleted', this.handleComponentDeleted);\n   * }\n   *\n   * private handleComponentDeleted = (event: { itemId: string }) => {\n   *   if (this.selectedItemId === event.itemId) {\n   *     this.closePanel();\n   *   }\n   * };\n   *\n   * disconnectedCallback() {\n   *   eventManager.off('componentDeleted', this.handleComponentDeleted);\n   * }\n   * ```\n   *\n   * **Default**: Auto-generated form from configSchema or component's renderConfigPanel\n   */\n  ConfigPanel?: (props: ConfigPanelProps) => any;\n\n  /**\n   * Custom component palette component\n   *\n   * **When to override**:\n   * - Custom visual design\n   * - Grid vs list layout\n   * - Search/filter functionality\n   * - Category grouping\n   *\n   * **Receives**: ComponentPaletteProps\n   * **Must call**: onDragStart when dragging palette items\n   *\n   * **Default**: Vertical list with icon + name\n   */\n  ComponentPalette?: (props: ComponentPaletteProps) => any;\n\n  /**\n   * Custom toolbar component\n   *\n   * **When to override**:\n   * - Custom visual design\n   * - Different button layout\n   * - Additional actions\n   * - App navigation integration\n   *\n   * **Receives**: ToolbarProps\n   * **Must call**: onUndo, onRedo, etc. when user interacts\n   *\n   * **Default**: Horizontal toolbar with undo/redo, viewport toggle, grid toggle\n   */\n  Toolbar?: (props: ToolbarProps) => any;\n}\n"]}