{"version":3,"file":"grid-config.js","sourceRoot":"","sources":["../../src/types/grid-config.ts"],"names":[],"mappings":"AAAA;;;;;;GAMG","sourcesContent":["/**\n * Grid Configuration Types\n * =========================\n *\n * Configuration options for the grid builder's grid system, snapping behavior,\n * and virtual rendering performance.\n */\n\n/**\n * Grid Configuration Interface\n * ==============================\n *\n * Configures the grid builder's grid system, snapping behavior, and rendering optimizations.\n *\n * **Example: Default configuration**\n * ```typescript\n * const defaultConfig: GridConfig = {\n *   gridSizePercent: 2,\n *   minGridSize: 10,\n *   maxGridSize: 50,\n *   snapToGrid: true,\n *   showGridLines: true,\n *   minItemSize: { width: 5, height: 4 },\n *   virtualRenderMargin: '20%'\n * };\n * ```\n *\n * **Example: Custom configuration**\n * ```typescript\n * const customConfig: GridConfig = {\n *   gridSizePercent: 3,           // Larger grid (3% instead of 2%)\n *   snapToGrid: false,            // Free positioning\n *   showGridLines: false,         // Hide grid\n *   virtualRenderMargin: '30%'    // Aggressive pre-rendering\n * };\n * ```\n */\nexport interface GridConfig {\n  /**\n   * Grid size as percentage of canvas width\n   *\n   * **Default**: 2 (2% of canvas width per grid unit)\n   * **Calculation**: Canvas width = 100% = 50 grid units (at 2%)\n   * **Typical values**:\n   * - 1: Fine grid (100 units = 100% width)\n   * - 2: Standard grid (50 units = 100% width) ✅ Recommended\n   * - 3: Coarse grid (33 units = 100% width)\n   * - 5: Very coarse grid (20 units = 100% width)\n   *\n   * **Impact**:\n   * - Smaller % = more granular positioning\n   * - Larger % = less granular, easier alignment\n   *\n   * @default 2\n   */\n  gridSizePercent?: number;\n\n  /**\n   * Vertical grid size in pixels\n   *\n   * **Default**: 20px\n   * **Purpose**: Fixed vertical spacing for grid rows\n   * **Used for**: Y-axis positioning, height calculations, grid background\n   *\n   * **Typical values**:\n   * - 15: Compact vertical spacing\n   * - 20: Standard vertical spacing ✅ Recommended\n   * - 25: Spacious vertical spacing\n   * - 30: Very spacious vertical spacing\n   *\n   * **Impact**:\n   * - Smaller value = more granular vertical positioning\n   * - Larger value = less granular, larger minimum heights\n   *\n   * @default 20\n   */\n  verticalGridSize?: number;\n\n  /**\n   * Minimum grid size in pixels\n   *\n   * **Default**: 10px\n   * **Purpose**: Prevents grid from becoming too small on tiny screens\n   * **Calculation**: `Math.max(minGridSize, canvasWidth * gridSizePercent / 100)`\n   *\n   * **Typical values**:\n   * - 5: Allow very small grids (mobile)\n   * - 10: Standard minimum ✅ Recommended\n   * - 20: Larger minimum (desktop-only)\n   *\n   * @default 10\n   */\n  minGridSize?: number;\n\n  /**\n   * Maximum grid size in pixels\n   *\n   * **Default**: 50px\n   * **Purpose**: Prevents grid from becoming too large on huge screens\n   * **Calculation**: `Math.min(maxGridSize, canvasWidth * gridSizePercent / 100)`\n   *\n   * **Typical values**:\n   * - 30: Smaller maximum (fine positioning)\n   * - 50: Standard maximum ✅ Recommended\n   * - 100: Larger maximum (coarse positioning)\n   *\n   * @default 50\n   */\n  maxGridSize?: number;\n\n  /**\n   * Enable snap-to-grid behavior\n   *\n   * **Default**: true\n   * **When true**: Items snap to grid during drag/resize\n   * **When false**: Free-form positioning (pixel-perfect)\n   *\n   * **Use cases**:\n   * - true: Consistent alignment, easier UI building ✅ Recommended\n   * - false: Precise control, artistic freedom\n   *\n   * @default true\n   */\n  snapToGrid?: boolean;\n\n  /**\n   * Minimum item size (grid units)\n   *\n   * **Default**: { width: 5, height: 4 }\n   * **Purpose**: Prevents items from becoming too small to interact with\n   * **Applied**: During resize operations\n   *\n   * **Typical values**:\n   * - { width: 3, height: 3 }: Very small minimum\n   * - { width: 5, height: 4 }: Standard minimum ✅ Recommended\n   * - { width: 10, height: 8 }: Large minimum\n   *\n   * **Note**: Components can override with their own minSize in ComponentDefinition\n   *\n   * @default { width: 5, height: 4 }\n   */\n  minItemSize?: {\n    width: number;\n    height: number;\n  };\n\n  /**\n   * Show visual grid lines on canvases\n   *\n   * **Default**: true\n   * **Implementation**: CSS background-image with repeating grid pattern\n   * **Purpose**: Visual aid for alignment\n   *\n   * **Use cases**:\n   * - true: Helps users align items ✅ Recommended for building\n   * - false: Cleaner look for presentations/previews\n   *\n   * @default true\n   */\n  showGridLines?: boolean;\n\n  /**\n   * Virtual rendering pre-render margin\n   *\n   * **What it does**: Components start rendering this distance BEFORE entering viewport\n   * **Why**: Prevents \"pop-in\" flash as user scrolls - components load smoothly in advance\n   *\n   * **Accepts**: Pixels ('200px') or percentage of viewport ('20%')\n   *\n   * **Default**: '20%' (responsive - adapts to screen size)\n   *\n   * **Recommended (percentage - adapts to screen size):**\n   * - '20%' (default): Balanced - smooth loading on all devices ✅\n   *   - Mobile (667px): 133px margin\n   *   - Desktop (1080px): 216px margin\n   * - '30%': Aggressive - better for slow devices/connections, uses more memory\n   *   - Mobile: 200px margin\n   *   - Desktop: 324px margin\n   * - '10%': Conservative - less memory, might see brief pop-in\n   *   - Mobile: 67px margin\n   *   - Desktop: 108px margin\n   *\n   * **Alternative (pixels - fixed distance):**\n   * - '200px': Fixed 200px margin (good for desktop-only apps)\n   * - '400px': Larger fixed margin (desktop, aggressive pre-loading)\n   * - '100px': Smaller fixed margin (desktop, conservative)\n   *\n   * **Rule of thumb:**\n   * - Use % for responsive apps (mobile + desktop) ✅ Recommended\n   * - Use px for fixed-size apps (desktop-only)\n   * - Higher margin = smoother but uses more memory\n   *\n   * **Memory impact**:\n   * - 20% margin: ~34 KB overhead for 100 components\n   * - 30% margin: ~50 KB overhead for 100 components\n   * - Savings: 2-10 MB per 100 components (50-200× ROI)\n   *\n   * **Performance characteristics**:\n   * - Pre-render margin controls when components **start** rendering\n   * - Once rendered, components **stay** rendered (no de-rendering)\n   * - Virtual rendering is **always enabled** for all components\n   *\n   * @default '20%'\n   */\n  virtualRenderMargin?: string;\n\n  /**\n   * Event debounce delay in milliseconds\n   *\n   * **What it does**: Delays high-frequency events to reduce excessive calls\n   * **Why**: Drag/resize events fire on every pixel - debouncing groups them together\n   *\n   * **Default**: 300ms (good balance between responsiveness and performance)\n   *\n   * **Events that are debounced**:\n   * - `componentDragged` - fires during drag (every pixel)\n   * - `componentResized` - fires during resize (every pixel)\n   * - `stateChanged` - fires on any state update\n   *\n   * **Events that are NOT debounced** (fire immediately):\n   * - `componentSelected` - click selection\n   * - `componentDeleted` - delete action\n   * - `componentAdded` - add action\n   * - `canvasAdded` - canvas operations\n   * - `canvasRemoved` - canvas operations\n   *\n   * **Typical values**:\n   * - 0: No debouncing (fire immediately - may cause performance issues)\n   * - 150ms: Fast response (good for local state updates)\n   * - 300ms: Balanced (default) ✅ Recommended\n   * - 500ms: Slower response (good for API calls, reduces server load)\n   * - 1000ms: Very slow (use only for expensive operations)\n   *\n   * **Use cases**:\n   * - **Auto-save to API**: Use 500-1000ms to reduce server calls\n   * - **Local state sync**: Use 150-300ms for responsive feel\n   * - **Analytics tracking**: Use 300-500ms to batch events\n   *\n   * **Example - Auto-save with debouncing**:\n   * ```typescript\n   * const config: GridConfig = {\n   *   eventDebounceDelay: 500  // Wait 500ms after last change before saving\n   * };\n   *\n   * api.on('stateChanged', async () => {\n   *   // This only fires 500ms after user stops making changes\n   *   await fetch('/api/save', {\n   *     method: 'POST',\n   *     body: JSON.stringify(await api.exportState())\n   *   });\n   * });\n   * ```\n   *\n   * @default 300\n   */\n  eventDebounceDelay?: number;\n\n  /**\n   * Enable auto-scroll during drag operations\n   *\n   * **What it does**: Automatically scrolls the page when dragging an item near the edge of a scrollable container\n   * **Why**: Allows users to drag items to areas not currently visible without manually scrolling\n   *\n   * **Default**: true (enabled for better UX)\n   *\n   * **How it works**:\n   * - Detects when item is dragged within 60px of container edge\n   * - Automatically scrolls the nearest scrollable parent container\n   * - Scroll speed increases as item gets closer to edge\n   * - Works with both canvas scrolling and window scrolling\n   *\n   * **Use cases**:\n   * - **Long scrollable pages**: Essential for dragging items across long layouts\n   * - **Nested scrollable containers**: Works with canvas containers inside scrollable divs\n   * - **Constrained viewports**: Useful when grid-builder is in a fixed-height container\n   *\n   * **When to disable** (set to false):\n   * - Small grids that fit entirely in viewport (no scrolling needed)\n   * - Custom scroll handling implemented\n   * - Performance-critical scenarios (though auto-scroll is highly optimized)\n   *\n   * **Example - Disable auto-scroll**:\n   * ```typescript\n   * const config: GridConfig = {\n   *   enableAutoScroll: false  // Disable if grid fits in viewport\n   * };\n   * ```\n   *\n   * @default true\n   */\n  enableAutoScroll?: boolean;\n\n  /**\n   * Enable smooth CSS transitions for animations\n   *\n   * **What it does**: Adds smooth CSS transitions when items snap to grid or resize\n   * **Why**: Provides polished visual feedback for drag/resize operations\n   *\n   * **Default**: true (enabled for polished UX)\n   *\n   * **What gets animated** (when enabled):\n   * - Grid snapping at drag end (smooth snap to grid instead of instant)\n   * - Resize handle operations (smooth size changes)\n   * - Selection border appearance/disappearance\n   *\n   * **Performance considerations**:\n   * - Animations use GPU-accelerated CSS transforms\n   * - Very low performance impact (~0.1ms per frame)\n   * - May feel slightly less responsive than instant snapping\n   * - Some users prefer instant feedback (hence disabled by default)\n   *\n   * **Use cases**:\n   * - **Presentation/demo mode**: Polished animations for showcasing\n   * - **Public-facing apps**: Better visual appeal for end users\n   * - **Design-focused apps**: When aesthetics matter more than speed\n   *\n   * **When to disable** (default):\n   * - **Power users**: Prefer instant feedback without animation delay\n   * - **Performance-critical apps**: Eliminate any animation overhead\n   * - **Precise positioning**: Instant snapping shows exact final position\n   *\n   * **Example - Enable animations**:\n   * ```typescript\n   * const config: GridConfig = {\n   *   enableAnimations: true,       // Enable smooth transitions\n   *   animationDuration: 150        // Fast animations (150ms)\n   * };\n   * ```\n   *\n   * @default true\n   */\n  enableAnimations?: boolean;\n\n  /**\n   * Animation duration in milliseconds (only used if enableAnimations is true)\n   *\n   * **What it controls**: Duration of CSS transitions for drag/resize animations\n   * **Default**: 100ms (fast, responsive feel)\n   *\n   * **Typical values**:\n   * - 100ms: Very fast, subtle animation ✅ Default\n   * - 150ms: Fast, responsive feel\n   * - 200ms: Balanced\n   * - 300ms: Slower, more noticeable animation\n   * - 400ms+: Very slow, primarily for presentations\n   *\n   * **Rule of thumb**:\n   * - Shorter durations (100-150ms) feel more responsive\n   * - Longer durations (300-400ms) feel more polished but slower\n   * - Don't exceed 500ms (feels sluggish)\n   *\n   * **Example - Fast animations**:\n   * ```typescript\n   * const config: GridConfig = {\n   *   enableAnimations: true,\n   *   animationDuration: 150  // Fast, snappy animations\n   * };\n   * ```\n   *\n   * @default 100\n   */\n  animationDuration?: number;\n\n  /**\n   * Bottom margin for canvases in grid units\n   *\n   * **What it does**: Adds extra space below the bottommost item in each canvas\n   * **Why**: Provides breathing room and space for adding new items below\n   *\n   * **Default**: 5 grid units (~100px with 20px vertical grid)\n   *\n   * **How it works**:\n   * - Calculated canvas height = (bottommost item position + height) + canvasBottomMargin\n   * - Applied to all canvases in both edit and preview modes\n   * - Scales with grid size (responsive to verticalGridSize setting)\n   *\n   * **Typical values**:\n   * - 3: Compact spacing (60px with default grid)\n   * - 5: Standard spacing ✅ Recommended (~100px with default grid)\n   * - 10: Spacious spacing (200px with default grid)\n   * - 15: Very spacious (300px with default grid)\n   *\n   * **Use cases**:\n   * - **Tight layouts**: Use 3 for compact designs with minimal whitespace\n   * - **Standard layouts**: Use 5 for balanced spacing (default)\n   * - **Spacious layouts**: Use 10+ for more breathing room\n   * - **Drop zones**: Larger margins make it easier to drop new items at bottom\n   *\n   * **Example - Spacious canvas margins**:\n   * ```typescript\n   * const config: GridConfig = {\n   *   canvasBottomMargin: 10  // Extra space for new items\n   * };\n   * ```\n   *\n   * @default 5\n   */\n  canvasBottomMargin?: number;\n\n  /**\n   * Minimum canvas height in grid units\n   *\n   * **What it does**: Sets the minimum height for empty or small canvases\n   * **Why**: Prevents canvases from collapsing when empty, provides drop target area\n   *\n   * **Default**: 20 grid units (~400px with 20px vertical grid)\n   *\n   * **How it works**:\n   * - Applied as CSS min-height on all canvas containers\n   * - Only takes effect when calculated height is smaller\n   * - Scales with grid size (responsive to verticalGridSize setting)\n   * - Ensures empty canvases are visible and usable\n   *\n   * **Typical values**:\n   * - 10: Compact minimum (200px with default grid)\n   * - 15: Small minimum (300px with default grid)\n   * - 20: Standard minimum ✅ Recommended (~400px with default grid)\n   * - 25: Large minimum (500px with default grid)\n   * - 30: Very large minimum (600px with default grid)\n   *\n   * **Use cases**:\n   * - **Mobile layouts**: Use 10-15 for smaller screens\n   * - **Desktop layouts**: Use 20-25 for comfortable drop targets\n   * - **Large displays**: Use 25-30 for spacious canvases\n   * - **Empty state UX**: Larger minimums make it clearer where to drop items\n   *\n   * **Example - Compact mobile canvas**:\n   * ```typescript\n   * const mobileConfig: GridConfig = {\n   *   canvasMinHeight: 15,     // Smaller minimum for mobile\n   *   verticalGridSize: 15     // Smaller grid for mobile\n   * };\n   * // Result: 15 × 15px = 225px minimum height\n   * ```\n   *\n   * **Example - Spacious desktop canvas**:\n   * ```typescript\n   * const desktopConfig: GridConfig = {\n   *   canvasMinHeight: 25,     // Larger minimum for desktop\n   *   verticalGridSize: 20     // Standard grid\n   * };\n   * // Result: 25 × 20px = 500px minimum height\n   * ```\n   *\n   * @default 20\n   */\n  canvasMinHeight?: number;\n}\n"]}