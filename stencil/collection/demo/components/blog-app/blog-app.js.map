{"version":3,"file":"blog-app.js","sourceRoot":"","sources":["../../../../src/demo/components/blog-app/blog-app.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, h, State } from '@stencil/core';\nimport { blogComponentDefinitions, contentComponents, interactiveComponents, mediaComponents } from '../../component-definitions';\nimport { GridBuilderAPI } from '../../../types/api';\nimport { SectionEditorData } from '../../types/section-editor-data';\nimport { ConfirmationModalData } from '../../types/confirmation-modal-data';\nimport { DeletionHookContext } from '../../../types/deletion-hook';\nimport { getGridSizeVertical, clearGridSizeCache } from '../../../utils/grid-calculations';\nimport { domCache } from '../../../utils/dom-cache';\nimport { setActiveCanvas } from '../../../services/state-manager';\n\n/**\n * Blog App Demo - Host Application for grid-builder Library\n * ==========================================================\n *\n * This component demonstrates how to build a complete page builder application\n * using the @lucidworks/stencil-grid-builder library.\n *\n * Key Library Features Demonstrated:\n * ----------------------------------\n *\n * 1. **Component Registry** (components prop)\n *    - Pass array of ComponentDefinition objects to grid-builder\n *    - Library uses these to render palette and components\n *    - See: blogComponentDefinitions in component-definitions.tsx\n *\n * 2. **Initial State** (initialState prop)\n *    - Pre-populate canvases with components\n *    - Define layouts for desktop and mobile viewports\n *    - Library manages state updates via internal store\n *\n * 3. **Canvas Metadata** (canvasMetadata prop)\n *    - Host app owns presentation metadata (titles, colors, settings)\n *    - Library owns placement state (items, layouts, zIndex)\n *    - Separation of concerns pattern\n *\n * 4. **Deletion Hook** (onBeforeDelete prop)\n *    - Intercept component deletion requests\n *    - Show confirmation modals before deletion\n *    - Make API calls or run custom validation\n *    - Return Promise<boolean> to approve/cancel deletion\n *\n * 5. **Grid Builder API** (configurable storage via api-ref prop)\n *    - Programmatic control of grid state\n *    - Methods: addCanvas, removeCanvas, undo, redo, etc.\n *    - Event system: canvasAdded, canvasRemoved, etc.\n *    - **Demo uses custom storage**: api-ref={{ target: this, key: 'api' }}\n *    - API stored on component instance (this.api) instead of window\n *\n * 6. **Event System** (canvas-click, custom events)\n *    - Listen to library events for state synchronization\n *    - React to user interactions (canvas clicks, etc.)\n *\n * 7. **Multiple Palettes Pattern** (Demonstrated in this demo)\n *    - Multiple `<component-palette>` instances with different components\n *    - Categorized/grouped components (Content, Interactive, etc.)\n *    - Collapsible category sections\n *    - All palettes drag to the same canvases\n *\n * 8. **Custom Config Panel** (Demonstrated with custom-config-panel component)\n *    - Replace library's default config panel with custom UI\n *    - Access grid state via API (this.api in this demo)\n *    - Implement live preview for real-time updates\n *    - Support cancel/revert functionality\n *    - Subscribe to componentDeleted events for auto-close\n *    - See: src/demo/components/custom-config-panel/\n *\n * Architecture Pattern:\n * --------------------\n * - Library: Manages component placement, drag/drop, resize, undo/redo\n * - Host App: Manages canvas metadata, custom UI (headers, modals), business logic\n *\n * ## Multiple Palettes Pattern (Featured in this Demo)\n *\n * **Why use multiple palettes:**\n * - Better component organization (group by category, purpose, or feature)\n * - Collapsible sections save screen space\n * - Easier to find components in large libraries\n * - Matches common UI patterns (like the example mockup)\n *\n * **How it works:**\n * 1. Create categorized component arrays:\n *    ```typescript\n *    const contentComponents = [header, article, ...];\n *    const interactiveComponents = [button, link, ...];\n *    ```\n *\n * 2. Render multiple `<component-palette>` instances:\n *    ```typescript\n *    <component-palette components={contentComponents} showHeader={false} />\n *    <component-palette components={interactiveComponents} showHeader={false} />\n *    ```\n *\n * 3. All palettes work with the same canvases:\n *    - Each palette initializes its own drag handlers\n *    - All drag to the same `<canvas-section>` dropzones\n *    - Component type (not palette source) determines behavior\n *    - grid-builder registers ALL components for rendering\n *\n * **Key Points:**\n * - Pass all components to grid-builder (for type registration)\n * - Use chromeless mode (`showHeader={false}`) for custom headers\n * - Each palette manages its own drag/drop independently\n * - Canvases accept drops from any palette\n * - No coordination needed between palettes\n *\n * **Implementation in this demo:**\n * - Content category: Headers, Articles (text-based components)\n * - Interactive category: Buttons, CTAs (action components)\n * - Collapsible sections with expand/collapse state\n * - Clean categorized UI matching modern design patterns\n *\n * ## Custom Config Panel Pattern (Featured in this Demo)\n *\n * **Why use a custom config panel:**\n * - Match your application's design system and branding\n * - Add custom validation or business logic\n * - Integrate with other parts of your application\n * - Control the user experience and workflow\n *\n * **How it works:**\n * 1. Disable the library's default config panel using the showConfigPanel prop:\n *    ```typescript\n *    <grid-builder\n *      components={components}\n *      showConfigPanel={false}  // Hide default config panel\n *      ...\n *    />\n *    ```\n\n\n\n\n\n\n\n *\n * 2. Access the Grid Builder API:\n *    ```typescript\n *    const api = (window as any).gridBuilderAPI;\n *    ```\n *\n * 3. Listen for item-click events:\n *    ```typescript\n *    document.addEventListener('item-click', (event: CustomEvent) => {\n *      const { itemId, canvasId } = event.detail;\n *      // Open your custom panel\n *    });\n *    ```\n *\n * 4. Implement live preview by directly updating state:\n *    ```typescript\n *    const state = api.getState();\n *    const canvas = state.canvases[canvasId];\n *    canvas.items[itemIndex] = {\n *      ...canvas.items[itemIndex],\n *      name: newValue\n *    };\n *    // Trigger reactivity\n *    state.canvases = { ...state.canvases };\n *    ```\n *\n * 5. Implement cancel/revert by storing original state:\n *    ```typescript\n *    // On panel open, store original values\n *    this.originalState = {\n *      name: item.name,\n *      config: { ...item.config }\n *    };\n *\n *    // On cancel, restore original values\n *    api.updateConfig(itemId, this.originalState.config);\n *    // Restore name using same pattern as live preview\n *    ```\n *\n * 6. Subscribe to componentDeleted for auto-close:\n *    ```typescript\n *    api.on('componentDeleted', (event) => {\n *      if (event.itemId === this.selectedItemId) {\n *        this.closePanel();\n *      }\n *    });\n *    ```\n *\n * **Key Library APIs Used:**\n * - `window.gridBuilderAPI` - Global API instance\n * - `api.getState()` - Get current grid state for direct manipulation\n * - `api.getItem(itemId)` - Find item across all canvases\n * - `api.updateConfig(itemId, config)` - Update item configuration\n * - `api.on(event, handler)` - Subscribe to library events\n * - `api.off(event, handler)` - Unsubscribe from library events\n *\n * **Event-driven Integration:**\n * - `item-click` - Fired when user clicks a component (use document.addEventListener)\n * - `componentDeleted` - Fired when a component is deleted (use api.on)\n * - Manual event listeners required for custom events on document\n *\n * **Implementation in this demo:**\n * - See `custom-config-panel.tsx` for complete implementation\n * - Purple gradient styling matching blog theme\n * - Live preview for component name and config fields\n * - Cancel button reverts all changes\n * - Save button persists changes\n * - Auto-closes when selected component is deleted\n */\n\n@Component({\n  tag: 'blog-app',\n  styleUrl: 'blog-app.scss',\n  shadow: false,\n})\nexport class BlogApp {\n  /**\n   * Grid Builder API instance (accessed from window.gridBuilderAPI)\n   * Must be @State to trigger re-render when API becomes available\n   */\n  @State() private api!: GridBuilderAPI;\n\n  /**\n   * Local undo/redo state (synced from API)\n   * ------------------------------------\n   *\n   * Why local state instead of imported undoRedoState:\n   * - Stencil reactivity doesn't work across module boundaries\n   * - When demo is built separately from library, imported store is different instance\n   * - Local @State() properties trigger re-renders reliably\n   *\n   * Synchronization:\n   * - Updated via API events in setupGridBuilderIntegration()\n   * - Listens to stateChanged event to update button states\n   */\n  @State() private canUndo: boolean = false;\n  @State() private canRedo: boolean = false;\n\n  private sectionCounter = 1;\n\n  /**\n   * Canvas Metadata State\n   * ---------------------\n   *\n   * Library Feature: canvasMetadata prop (optional)\n   *\n   * Purpose:\n   * - Host app owns presentation metadata (titles, colors, custom settings)\n   * - Library owns placement state (items, layouts, zIndex)\n   * - This separation allows library to focus on grid logic\n   *\n   * Pattern:\n   * - Library fires canvasAdded/canvasRemoved events\n   * - Host app syncs metadata when canvases are added/removed\n   * - Host app passes metadata to library via canvasMetadata prop\n   * - Library passes backgroundColor to canvas-section components\n   *\n   * Note on Undo/Redo:\n   * - Canvas add/remove operations support undo/redo (handled by library)\n   * - Color changes are immediate (no undo for now - could be added)\n   */\n  @State() canvasMetadata: Record<string, { title: string; backgroundColor: string }> = {\n    'hero-section': {\n      title: 'Hero Section',\n      backgroundColor: '#f0f4f8',\n    },\n    'articles-grid': {\n      title: 'Articles Grid',\n      backgroundColor: '#ffffff',\n    },\n    'footer-section': {\n      title: 'Footer Section',\n      backgroundColor: '#e8f0f2',\n    },\n  };\n\n  /**\n   * Section Editor Panel State\n   * ---------------------------\n   *\n   * Demo-specific state for section editing UI.\n   * This is NOT part of the library - it's custom host app UI.\n   */\n  @State() isPanelOpen: boolean = false;\n  @State() editingSection: SectionEditorData | null = null;\n\n  /**\n   * Confirmation Modal State\n   * -------------------------\n   *\n   * Library Feature: Deletion Hook System\n   *\n   * This state demonstrates how to use the library's onBeforeDelete hook\n   * to show a confirmation modal before component deletion.\n   *\n   * Pattern:\n   * 1. Library calls onBeforeDelete with deletion context\n   * 2. Host app returns Promise<boolean>\n   * 3. Host app shows modal and stores Promise resolve function\n   * 4. User confirms/cancels modal\n   * 5. Host app calls resolve(true/false)\n   * 6. Library proceeds with or cancels deletion\n   *\n   * Note: The modal component itself is NOT part of the library.\n   * This allows you to use any modal library (Material, Bootstrap, etc.)\n   */\n  @State() isConfirmModalOpen: boolean = false;\n  @State() confirmModalData: ConfirmationModalData | null = null;\n  private deleteResolve: ((value: boolean) => void) | null = null;\n\n  /**\n   * Categorized Palette State\n   * --------------------------\n   *\n   * Demonstrates multiple palette pattern:\n   * - Each category has its own expanded/collapsed state\n   * - Multiple palettes render independently\n   * - All palettes drag to the same canvases\n   * - Enables better component organization\n   */\n  @State() categoryStates: Record<string, boolean> = {\n    content: true, // Content category expanded by default\n    interactive: true, // Interactive category expanded by default\n    media: true, // Media category expanded by default\n  };\n\n  /**\n   * View Mode State\n   * ----------------\n   *\n   * Toggle between edit mode (grid builder) and preview mode (viewer).\n   * - Edit mode: Shows grid, palette, resize handles, config panel\n   * - Preview mode: Shows only the final rendered components\n   */\n  @State() isPreviewMode: boolean = false;\n\n  /**\n   * Current Grid State (for viewer mode)\n   * -------------------------------------\n   *\n   * Stores the current grid state when switching to preview mode.\n   * This ensures the viewer has the latest state from the builder.\n   */\n  @State() currentGridState: any = null;\n\n  /**\n   * Sidebar Collapsed State\n   * ------------------------\n   *\n   * Toggle component palette sidebar visibility.\n   * - Collapsed: Hides sidebar, gives more space to canvas\n   * - Expanded: Shows sidebar with components (default)\n   */\n  @State() isSidebarCollapsed: boolean = false;\n\n  componentWillLoad() {\n    // Grid-builder components are built alongside the demo\n    this.updateCanvasStyles();\n  }\n\n  componentDidLoad() {\n    // Wait for grid-builder to initialize and expose API on window\n    // Check every 50ms for up to 2 seconds\n    let attempts = 0;\n    const maxAttempts = 40; // 2 seconds / 50ms\n\n    const checkForAPI = () => {\n      attempts++;\n\n      if ((window as any).gridBuilderAPI) {\n        console.log('ðŸ”§ blog-app found API on window, initializing...');\n        this.api = (window as any).gridBuilderAPI;\n        this.setupGridBuilderIntegration();\n      } else if (attempts < maxAttempts) {\n        setTimeout(checkForAPI, 50);\n      } else {\n        console.warn('âš ï¸ blog-app timeout waiting for API');\n      }\n    };\n\n    checkForAPI();\n  }\n\n  /**\n   * Track whether we've initialized the API integration\n   */\n  private apiInitialized = false;\n\n  private setupGridBuilderIntegration() {\n    console.log('ðŸ”§ blog-app setupGridBuilderIntegration called', {\n      apiInitialized: this.apiInitialized,\n      hasApi: !!this.api,\n      apiType: typeof this.api,\n    });\n\n    // Only initialize once, and only when API is available\n    if (this.apiInitialized || !this.api) {\n      console.log('  â­ï¸ Skipping setup -', {\n        alreadyInitialized: this.apiInitialized,\n        noApi: !this.api,\n      });\n      return;\n    }\n\n    console.log('  âœ… Proceeding with API setup');\n    this.apiInitialized = true;\n\n    // Inject canvas headers after initial render\n    // This is demo-specific UI (not part of library)\n    setTimeout(() => {\n      this.injectCanvasHeaders();\n    }, 100);\n\n    /**\n     * Listen to canvas-click Events\n     * ------------------------------\n     *\n     * Library Feature: Custom Events\n     *\n     * The library fires custom events when users interact with the grid:\n     * - canvas-click: When user clicks canvas background\n     * - component-added: When component is added to grid\n     * - component-removed: When component is removed from grid\n     * - etc.\n     *\n     * These events allow host apps to respond to user interactions.\n     */\n    const gridBuilder = document.querySelector('grid-builder');\n    if (gridBuilder) {\n      gridBuilder.addEventListener('canvas-click', ((event: CustomEvent) => {\n        const { canvasId } = event.detail;\n        console.log('Canvas clicked:', canvasId);\n        // In a real app, this would show a canvas settings panel\n        // For now, we just log it to demonstrate the event\n      }) as EventListener);\n    }\n\n    /**\n     * Subscribe to Library Events\n     * ----------------------------\n     *\n     * Library Feature: Event System (GridBuilderAPI.on)\n     *\n     * The API provides an event system for state change notifications:\n     * - canvasAdded: Fired when canvas is added (including via undo/redo)\n     * - canvasRemoved: Fired when canvas is removed (including via undo/redo)\n     * - stateChanged: Fired on any state change\n     *\n     * This allows host apps to sync their metadata with library state.\n     *\n     * Pattern:\n     * - Library manages placement state (items, layouts, zIndex)\n     * - Library fires events when canvases are added/removed\n     * - Host app adds/removes metadata in response to events\n     * - This keeps host app metadata in sync with library state\n     */\n    this.api.on('canvasAdded', (event) => {\n      const { canvasId } = event;\n      // Add metadata for new canvas if it doesn't exist\n      if (!this.canvasMetadata[canvasId]) {\n        const title = `Custom Section ${this.sectionCounter++}`;\n        this.canvasMetadata = {\n          ...this.canvasMetadata,\n          [canvasId]: {\n            title,\n            backgroundColor: '#f5f5f5',\n          },\n        };\n      }\n    });\n\n    this.api.on('canvasRemoved', (event) => {\n      const { canvasId } = event;\n      console.log('ðŸ—‘ï¸ canvasRemoved event received:', canvasId);\n\n      // Remove metadata when canvas is removed\n      // This keeps metadata in sync with library state\n      const updated = { ...this.canvasMetadata };\n      delete updated[canvasId];\n      this.canvasMetadata = updated;\n      console.log('  âœ… Metadata removed for:', canvasId);\n\n      // Remove injected header (demo-specific UI)\n      this.removeCanvasHeader(canvasId);\n      console.log('  âœ… Header removal attempted for:', canvasId);\n    });\n\n    /**\n     * Sync undo/redo button state\n     * -----------------------------\n     *\n     * Since Stencil reactivity doesn't work across module boundaries,\n     * we listen to library events that indicate undo/redo state changes.\n     *\n     * Events that change undo/redo state:\n     * - componentAdded, componentDeleted (modify history)\n     * - componentDragged, componentResized (modify history)\n     * - componentsBatchAdded, componentsBatchDeleted (modify history)\n     * - canvasAdded, canvasRemoved (modify history)\n     *\n     * This ensures undo/redo buttons update correctly in the demo.\n     */\n\n    // Initial sync\n    this.syncUndoRedoState();\n\n    // Listen to all events that modify history\n    const eventsToWatch = [\n      'componentAdded',\n      'componentDeleted',\n      'componentDragged',\n      'componentResized',\n      'componentsBatchAdded',\n      'componentsBatchDeleted',\n      'canvasAdded',\n      'canvasRemoved',\n      'undoExecuted',  // Library emits this when undo() is called\n      'redoExecuted'   // Library emits this when redo() is called\n    ];\n\n    eventsToWatch.forEach(eventName => {\n      this.api.on(eventName, this.syncUndoRedoState);\n    });\n  }\n\n  private syncUndoRedoState = () => {\n    if (!this.api) return;\n\n    const newCanUndo = this.api.canUndo();\n    const newCanRedo = this.api.canRedo();\n\n    // Only update if changed (avoid unnecessary re-renders)\n    if (this.canUndo !== newCanUndo) {\n      this.canUndo = newCanUndo;\n    }\n    if (this.canRedo !== newCanRedo) {\n      this.canRedo = newCanRedo;\n    }\n  };\n\n  componentDidUpdate() {\n    // Update canvas styles whenever metadata changes\n    this.updateCanvasStyles();\n    // Inject canvas headers\n    this.injectCanvasHeaders();\n  }\n\n  private updateCanvasStyles = () => {\n    // Apply canvas background colors via CSS custom properties\n    Object.keys(this.canvasMetadata).forEach((canvasId) => {\n      const canvas = document.querySelector(`[data-canvas-id=\"${canvasId}\"] .grid-container`) as HTMLElement;\n      if (canvas) {\n        canvas.style.backgroundColor = this.canvasMetadata[canvasId].backgroundColor;\n      }\n    });\n  };\n\n  private removeCanvasHeader = (canvasId: string) => {\n    console.log('ðŸ” removeCanvasHeader called for:', canvasId);\n    // Find and remove the header for this canvas\n    const headers = document.querySelectorAll('.canvas-header');\n    console.log('  ðŸ“‹ Total headers found:', headers.length);\n\n    let removed = false;\n    headers.forEach((header) => {\n      const headerCanvasId = header.getAttribute('data-canvas-id');\n      console.log('  ðŸ”Ž Checking header with data-canvas-id:', headerCanvasId);\n\n      if (headerCanvasId === canvasId) {\n        console.log('  âœ… Match found! Removing header for:', canvasId);\n        header.remove();\n        removed = true;\n      }\n    });\n\n    if (!removed) {\n      console.warn('  âš ï¸ No matching header found for:', canvasId);\n    }\n  };\n\n  private injectCanvasHeaders = () => {\n    // Inject section headers before each canvas-section\n    Object.keys(this.canvasMetadata).forEach((canvasId) => {\n      // Find canvas-section by looking for the inner div with data-canvas-id\n      const innerDiv = document.querySelector(`[data-canvas-id=\"${canvasId}\"]`) as HTMLElement;\n      if (!innerDiv) return;\n\n      const canvasSection = innerDiv.closest('canvas-section') as HTMLElement;\n      if (!canvasSection) return;\n\n      // Check if header already exists\n      let header = canvasSection.previousElementSibling as HTMLElement;\n      if (header && header.tagName.toLowerCase() === 'canvas-header') {\n        // Update existing header component - update sectionTitle prop\n        (header as any).sectionTitle = this.canvasMetadata[canvasId]?.title || canvasId;\n      } else {\n        // Create new header component\n        header = this.createCanvasHeader(canvasId);\n        canvasSection.parentElement?.insertBefore(header, canvasSection);\n      }\n    });\n  };\n\n  private createCanvasHeader = (canvasId: string): HTMLElement => {\n    // Create canvas-header component element\n    const header = document.createElement('canvas-header') as any;\n\n    // Set component properties\n    header.canvasId = canvasId;\n    header.sectionTitle = this.canvasMetadata[canvasId]?.title || canvasId;\n    header.isDeletable = !['hero-section', 'articles-grid', 'footer-section'].includes(canvasId);\n\n    // Add event listeners\n    header.addEventListener('headerClick', () => {\n      // Activate the canvas (adds visual highlight)\n      setActiveCanvas(canvasId);\n      // Open section editor panel\n      this.handleOpenSectionEditor(canvasId);\n    });\n\n    header.addEventListener('deleteClick', () => {\n      this.handleDeleteSection(canvasId);\n    });\n\n    return header;\n  };\n\n  private handleOpenSectionEditor = (canvasId: string) => {\n    const metadata = this.canvasMetadata[canvasId];\n    if (metadata) {\n      this.editingSection = {\n        canvasId,\n        title: metadata.title,\n        backgroundColor: metadata.backgroundColor,\n      };\n      this.isPanelOpen = true;\n    }\n  };\n\n  private handleClosePanel = () => {\n    this.isPanelOpen = false;\n    this.editingSection = null;\n  };\n\n  private handleUpdateSection = (event: CustomEvent<{ canvasId: string; title: string; backgroundColor: string }>) => {\n    const { canvasId, title, backgroundColor } = event.detail;\n    this.canvasMetadata = {\n      ...this.canvasMetadata,\n      [canvasId]: {\n        title,\n        backgroundColor,\n      },\n    };\n  };\n\n  /**\n   * Preview Color Change Handler\n   * ------------------------------\n   *\n   * Handles live preview of background color changes.\n   * Updates canvas background immediately without saving to metadata.\n   * This allows real-time preview while editing, with revert on cancel.\n   */\n  private handlePreviewColorChange = (event: CustomEvent<{ canvasId: string; backgroundColor: string }>) => {\n    const { canvasId, backgroundColor } = event.detail;\n    // Directly update canvas background color (don't update metadata yet)\n    const canvas = document.querySelector(`[data-canvas-id=\"${canvasId}\"] .grid-container`) as HTMLElement;\n    if (canvas) {\n      canvas.style.backgroundColor = backgroundColor;\n    }\n  };\n\n  /**\n   * Preview Title Change Handler\n   * -----------------------------\n   *\n   * Handles live preview of section title changes.\n   * Updates canvas title immediately without saving to metadata.\n   * This allows real-time preview while editing, with revert on cancel.\n   */\n  private handlePreviewTitleChange = (event: CustomEvent<{ canvasId: string; title: string }>) => {\n    const { canvasId, title } = event.detail;\n    // Find the canvas header for this canvas\n    const header = document.querySelector(`.canvas-header[data-canvas-id=\"${canvasId}\"]`) as HTMLElement;\n    if (header) {\n      const titleEl = header.querySelector('.canvas-title') as HTMLElement;\n      if (titleEl) {\n        // Directly update title text (don't update metadata yet)\n        titleEl.textContent = title;\n      }\n    }\n  };\n\n  /**\n   * Deletion Hook Handler\n   * ----------------------\n   *\n   * Library Feature: onBeforeDelete Hook (grid-builder prop)\n   *\n   * This is the most important demonstration in this demo. It shows how to use\n   * the library's deletion hook system to implement custom deletion workflows.\n   *\n   * What the Library Provides:\n   * - onBeforeDelete prop on grid-builder component\n   * - Hook receives DeletionHookContext with item data\n   * - Hook returns boolean or Promise<boolean>\n   * - Library waits for hook approval before deleting\n   * - If hook returns false, deletion is cancelled\n   * - If hook returns true, deletion proceeds\n   *\n   * What the Host App Provides:\n   * - This hook handler function\n   * - Confirmation modal component (any modal library works)\n   * - Custom deletion logic (API calls, validation, etc.)\n   *\n   * How It Works:\n   * 1. User clicks delete button on component\n   * 2. Library calls this hook with deletion context\n   * 3. Hook returns a Promise (doesn't resolve immediately)\n   * 4. Hook shows confirmation modal\n   * 5. User confirms or cancels\n   * 6. Hook resolves Promise with true/false\n   * 7. Library proceeds with or cancels deletion\n   *\n   * Why This Pattern:\n   * - Keeps modal UI out of library (use any modal you want)\n   * - Supports async operations (API calls, confirmations)\n   * - Gives host app full control over deletion workflow\n   * - Backward compatible (no hook = immediate deletion)\n   *\n   * Example Use Cases:\n   * - Confirmation modals (this demo)\n   * - API calls before deletion\n   * - Permission checks\n   * - Validation logic\n   * - Analytics tracking\n   */\n  private handleBeforeDelete = (context: DeletionHookContext): Promise<boolean> => {\n    return new Promise((resolve) => {\n      // Store the Promise resolve function\n      // We'll call this from the modal confirm/cancel handlers\n      this.deleteResolve = resolve;\n\n      // Extract component info from deletion context\n      // Context provides: item (GridItem), canvasId, itemId\n      const componentType = context.item.type;\n      const componentName = context.item.name || componentType;\n\n      // Show confirmation modal with component info\n      // This is demo-specific - you can use any modal library\n      this.confirmModalData = {\n        title: 'Delete Component?',\n        message: `Are you sure you want to delete \"${componentName}\"? This action cannot be undone.`,\n      };\n      this.isConfirmModalOpen = true;\n\n      // Promise won't resolve until user confirms/cancels\n      // The library will wait for this Promise before proceeding\n    });\n  };\n\n  /**\n   * Confirm Deletion Handler\n   * -------------------------\n   *\n   * Called when user clicks \"Delete\" button in confirmation modal.\n   * Resolves the deletion hook Promise with `true` to proceed with deletion.\n   */\n  private handleConfirmDelete = () => {\n    this.isConfirmModalOpen = false;\n    this.confirmModalData = null;\n    if (this.deleteResolve) {\n      this.deleteResolve(true); // Tell library to proceed with deletion\n      this.deleteResolve = null;\n    }\n  };\n\n  /**\n   * Cancel Deletion Handler\n   * ------------------------\n   *\n   * Called when user clicks \"Cancel\" button in confirmation modal.\n   * Resolves the deletion hook Promise with `false` to cancel deletion.\n   */\n  private handleCancelDelete = () => {\n    this.isConfirmModalOpen = false;\n    this.confirmModalData = null;\n    if (this.deleteResolve) {\n      this.deleteResolve(false); // Tell library to cancel deletion\n      this.deleteResolve = null;\n    }\n  };\n\n  private handleAddSection = () => {\n    if (!this.api) {\n      console.error('API not ready');\n      return;\n    }\n\n    const newCanvasId = `custom-section-${this.sectionCounter}`;\n\n    // Add canvas via library API (includes undo/redo)\n    this.api.addCanvas(newCanvasId);\n\n    // Metadata will be added automatically via canvasAdded event listener\n  };\n\n  private handleDeleteSection = (canvasId: string) => {\n    if (!this.api) {\n      console.error('API not ready');\n      return;\n    }\n\n    // Prevent deleting initial sections\n    if (['hero-section', 'articles-grid', 'footer-section'].includes(canvasId)) {\n      alert('Cannot delete initial sections');\n      return;\n    }\n\n    // Remove canvas via library API (includes undo/redo)\n    this.api.removeCanvas(canvasId);\n\n    // Metadata will be removed automatically via canvasRemoved event listener\n    // Header will also be removed in the canvasRemoved event listener\n  };\n\n  /**\n   * Handle section deletion from editor panel\n   */\n  private handleDeleteSectionFromPanel = (event: CustomEvent<{ canvasId: string }>) => {\n    const { canvasId } = event.detail;\n    this.handleDeleteSection(canvasId);\n    // Close the panel (already handled in section-editor-panel, but ensure it's closed)\n    this.isPanelOpen = false;\n  };\n\n  /**\n   * Toggle Category Collapse/Expand\n   * --------------------------------\n   *\n   * Demonstrates state management for collapsible categories.\n   * Each category (content, interactive) can be independently toggled.\n   */\n  private toggleCategory = (category: string) => {\n    this.categoryStates = {\n      ...this.categoryStates,\n      [category]: !this.categoryStates[category],\n    };\n  };\n\n  /**\n   * Toggle Preview Mode\n   * -------------------\n   *\n   * Switches between edit mode and preview mode:\n   * - Edit mode: Shows palette, grid, resize handles, editing UI\n   * - Preview mode: Shows only rendered components (final output)\n   *\n   * Also clears both grid size cache and DOM cache to ensure fresh calculations when switching.\n   */\n  private togglePreviewMode = () => {\n    // Capture current state from API before switching to preview mode\n    if (!this.isPreviewMode && this.api) {\n      this.currentGridState = this.api.getState();\n    }\n\n    this.isPreviewMode = !this.isPreviewMode;\n\n    // Clear both caches to force fresh calculations\n    // Grid size cache: Clears cached grid unit sizes\n    // DOM cache: Clears cached canvas element references (prevents stale DOM references)\n    clearGridSizeCache();\n    domCache.clear();\n\n    // This ensures items render at correct positions when switching modes\n  };\n\n  /**\n   * Toggle Sidebar Collapsed\n   * -------------------------\n   *\n   * Collapses/expands the component palette sidebar:\n   * - Collapsed: Hides sidebar, gives more canvas space\n   * - Expanded: Shows sidebar with categorized components\n   */\n  private toggleSidebarCollapsed = () => {\n    this.isSidebarCollapsed = !this.isSidebarCollapsed;\n  };\n\n  @State() initialState = {\n    canvases: {\n      'hero-section': {\n        zIndexCounter: 2,\n        items: [\n          {\n            id: 'hero-header',\n            canvasId: 'hero-section',\n            type: 'blog-header',\n            name: 'Hero Header',\n            layouts: {\n              desktop: { x: 0, y: 0, width: 50, height: 6 },\n              mobile: { x: null, y: null, width: null, height: null, customized: false },\n            },\n            zIndex: 1,\n            config: {\n              title: 'Welcome to My Blog',\n              subtitle: 'Exploring technology, design, and development',\n            },\n          },\n          {\n            id: 'hero-button',\n            canvasId: 'hero-section',\n            type: 'blog-button',\n            name: 'Hero CTA',\n            layouts: {\n              desktop: { x: 15, y: 7, width: 20, height: 3 },\n              mobile: { x: null, y: null, width: null, height: null, customized: false },\n            },\n            zIndex: 2,\n            config: {\n              label: 'Start Reading',\n              variant: 'primary',\n            },\n          },\n        ],\n      },\n      'articles-grid': {\n        zIndexCounter: 4,\n        items: [\n          {\n            id: 'article-1',\n            canvasId: 'articles-grid',\n            type: 'blog-article',\n            name: 'First Article',\n            layouts: {\n              desktop: { x: 0, y: 0, width: 25, height: 12 },\n              mobile: { x: null, y: null, width: null, height: null, customized: false },\n            },\n            zIndex: 1,\n            config: {\n              content: 'This is my first blog post about using the grid-builder library!',\n              author: 'Jane Doe',\n              date: '2025-01-15',\n            },\n          },\n          {\n            id: 'article-2',\n            canvasId: 'articles-grid',\n            type: 'blog-article',\n            name: 'Second Article',\n            layouts: {\n              desktop: { x: 25, y: 0, width: 25, height: 12 },\n              mobile: { x: null, y: null, width: null, height: null, customized: false },\n            },\n            zIndex: 2,\n            config: {\n              content: 'Another interesting post about custom Stencil components.',\n              author: 'John Smith',\n              date: '2025-01-14',\n            },\n          },\n          {\n            id: 'featured-image',\n            canvasId: 'articles-grid',\n            type: 'blog-image',\n            name: 'Featured Image',\n            layouts: {\n              desktop: { x: 0, y: 13, width: 12, height: 15 },\n              mobile: { x: null, y: null, width: null, height: null, customized: false },\n            },\n            zIndex: 3,\n            config: {\n              src: 'https://images.unsplash.com/photo-1498050108023-c5249f4df085?w=800&h=600&fit=crop',\n              alt: 'Developer workspace with laptop and code',\n              caption: 'A modern development environment',\n              objectFit: 'cover',\n            },\n          },\n          {\n            id: 'article-3',\n            canvasId: 'articles-grid',\n            type: 'blog-article',\n            name: 'Third Article',\n            layouts: {\n              desktop: { x: 12, y: 13, width: 26, height: 12 },\n              mobile: { x: null, y: null, width: null, height: null, customized: false },\n            },\n            zIndex: 4,\n            config: {\n              content: 'Learn how to build amazing layouts with drag-and-drop functionality.',\n              author: 'Alex Chen',\n              date: '2025-01-13',\n            },\n          },\n        ],\n      },\n      'footer-section': {\n        zIndexCounter: 2,\n        items: [\n          {\n            id: 'footer-header',\n            canvasId: 'footer-section',\n            type: 'blog-header',\n            name: 'Footer Header',\n            layouts: {\n              desktop: { x: 0, y: 0, width: 50, height: 4 },\n              mobile: { x: null, y: null, width: null, height: null, customized: false },\n            },\n            zIndex: 1,\n            config: {\n              title: 'Stay Connected',\n              subtitle: 'Subscribe for updates',\n            },\n          },\n          {\n            id: 'footer-button',\n            canvasId: 'footer-section',\n            type: 'blog-button',\n            name: 'Subscribe Button',\n            layouts: {\n              desktop: { x: 15, y: 5, width: 20, height: 3 },\n              mobile: { x: null, y: null, width: null, height: null, customized: false },\n            },\n            zIndex: 2,\n            config: {\n              label: 'Subscribe Now',\n              variant: 'primary',\n            },\n          },\n        ],\n      },\n    },\n  };\n\n  render() {\n    // Calculate canvas header overlay margin from grid size (1.4 grid units)\n    const verticalGridSize = getGridSizeVertical();\n    const canvasHeaderOverlayMargin = -(verticalGridSize * 1.4);\n\n    return (\n      <div\n        class={`blog-app-container ${this.isPreviewMode ? 'preview-mode' : ''}`}\n        style={{\n          '--canvas-header-overlay-margin': `${canvasHeaderOverlayMargin}px`,\n        } as any}\n      >\n        <div class=\"app-header\">\n          <div class=\"app-header-content\">\n            <h1 class=\"app-title\">Blog Layout Builder Demo</h1>\n            <p class=\"app-subtitle\">\n              Using custom Stencil components with @lucidworks/stencil-grid-builder\n            </p>\n          </div>\n          <div class=\"global-controls\">\n            <button\n              class=\"preview-toggle-btn\"\n              onClick={this.togglePreviewMode}\n              title={this.isPreviewMode ? 'Switch to Edit Mode' : 'Switch to Preview Mode'}\n            >\n              {this.isPreviewMode ? 'âœï¸ Edit Mode' : 'ðŸ‘ï¸ Preview'}\n            </button>\n            {!this.isPreviewMode && (\n              <div class=\"metadata-undo-redo\">\n                <button\n                  class=\"undo-btn\"\n                  onClick={() => this.api?.undo()}\n                  disabled={!this.api || !this.canUndo}\n                  title=\"Undo (components and sections)\"\n                >\n                  â†¶ Undo\n                </button>\n                <button\n                  class=\"redo-btn\"\n                  onClick={() => this.api?.redo()}\n                  disabled={!this.api || !this.canRedo}\n                  title=\"Redo (components and sections)\"\n                >\n                  â†· Redo\n                </button>\n              </div>\n            )}\n            {!this.isPreviewMode && (\n              <button class=\"add-section-btn\" onClick={this.handleAddSection}>\n                âž• Add Section\n              </button>\n            )}\n          </div>\n        </div>\n\n        {/* Main content area with categorized palettes */}\n        <div class=\"demo-layout\">\n          {/* Categorized Component Palettes - Hidden in preview mode */}\n          {!this.isPreviewMode && !this.isSidebarCollapsed && (\n            <div class=\"categorized-palette-sidebar\">\n              <div class=\"palette-header\">\n                <h2 class=\"palette-title\">Components</h2>\n                <button\n                  class=\"sidebar-collapse-btn\"\n                  onClick={this.toggleSidebarCollapsed}\n                  title=\"Collapse sidebar\"\n                >\n                  â—€\n                </button>\n              </div>\n\n              {/* Content Category */}\n              <div class=\"palette-category\">\n                <div\n                  class=\"category-header\"\n                  onClick={() => this.toggleCategory('content')}\n                >\n                  <span class=\"category-icon\">{this.categoryStates.content ? 'â–¼' : 'â–¶'}</span>\n                  <span class=\"category-name\">Content</span>\n                </div>\n                {this.categoryStates.content && (\n                  <component-palette\n                    components={contentComponents}\n                    showHeader={false}\n                  />\n                )}\n              </div>\n\n              {/* Interactive Category */}\n              <div class=\"palette-category\">\n                <div\n                  class=\"category-header\"\n                  onClick={() => this.toggleCategory('interactive')}\n                >\n                  <span class=\"category-icon\">{this.categoryStates.interactive ? 'â–¼' : 'â–¶'}</span>\n                  <span class=\"category-name\">Interactive</span>\n                </div>\n                {this.categoryStates.interactive && (\n                  <component-palette\n                    components={interactiveComponents}\n                    showHeader={false}\n                  />\n                )}\n              </div>\n\n              {/* Media Category */}\n              <div class=\"palette-category\">\n                <div\n                  class=\"category-header\"\n                  onClick={() => this.toggleCategory('media')}\n                >\n                  <span class=\"category-icon\">{this.categoryStates.media ? 'â–¼' : 'â–¶'}</span>\n                  <span class=\"category-name\">Media</span>\n                </div>\n                {this.categoryStates.media && (\n                  <component-palette\n                    components={mediaComponents}\n                    showHeader={false}\n                  />\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Floating expand button when sidebar is collapsed */}\n          {!this.isPreviewMode && this.isSidebarCollapsed && (\n            <button\n              class=\"sidebar-expand-btn\"\n              onClick={this.toggleSidebarCollapsed}\n              title=\"Expand sidebar\"\n            >\n              â–¶\n            </button>\n          )}\n\n          {/* Grid Builder / Viewer - all components for registration */}\n          <div class=\"grid-builder-area\">\n            {this.isPreviewMode ? (\n              <grid-viewer\n                key=\"viewer\"\n                components={blogComponentDefinitions}\n                initialState={this.currentGridState || this.initialState}\n                canvasMetadata={this.canvasMetadata}\n              />\n            ) : (\n              <grid-builder\n                key=\"builder\"\n                components={blogComponentDefinitions}\n                config={{\n                  enableAnimations: true,\n                  animationDuration: 100,\n                }}\n                initialState={this.initialState}\n                canvasMetadata={this.canvasMetadata}\n                onBeforeDelete={this.handleBeforeDelete}\n              />\n            )}\n          </div>\n        </div>\n\n        <section-editor-panel\n          isOpen={this.isPanelOpen}\n          sectionData={this.editingSection}\n          onClosePanel={this.handleClosePanel}\n          onUpdateSection={this.handleUpdateSection}\n          onPreviewColorChange={this.handlePreviewColorChange}\n          onPreviewTitleChange={this.handlePreviewTitleChange}\n          onDeleteSection={this.handleDeleteSectionFromPanel}\n        />\n\n        <confirmation-modal\n          isOpen={this.isConfirmModalOpen}\n          data={this.confirmModalData}\n          onConfirm={this.handleConfirmDelete}\n          onCancel={this.handleCancelDelete}\n        />\n\n        {/* Custom Config Panel (demo-specific) */}\n        <custom-config-panel api={this.api} />\n      </div>\n    );\n  }\n}\n"]}