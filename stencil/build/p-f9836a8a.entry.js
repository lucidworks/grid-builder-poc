import{r as t,h as i}from"./p-CR9rAByj.js";import{d as e,a as s}from"./p-B13cV8Q6.js";import{a as n}from"./p-DeF7ozJA.js";const r='@charset "UTF-8";.canvas-section-viewer{display:block;width:100%;margin:0;padding:0;}.canvas-section-viewer .grid-container{position:relative;width:100%;background-color:#ffffff;background-image:none !important;overflow:visible}';const a=class{constructor(i){t(this,i);this.renderVersion=0;this.calculatedHeight=400;this.updateCanvasHeight=()=>{if(!this.items||!this.currentViewport){return}this.calculatedHeight=n(this.items,this.currentViewport,this.config)};this.setupResizeObserver=()=>{if(!this.gridContainerRef||this.resizeObserver){return}this.resizeObserver=new ResizeObserver((t=>{requestAnimationFrame((()=>{for(const i of t){const t=i.contentRect.width;if(t>100){e(this.canvasId,t,this.config);this.updateCanvasHeight();this.renderVersion++}}}))}));this.resizeObserver.observe(this.gridContainerRef)}}componentDidLoad(){this.updateCanvasHeight();this.setupResizeObserver()}componentDidUpdate(){if(!this.resizeObserver&&this.gridContainerRef){this.setupResizeObserver()}}disconnectedCallback(){if(this.resizeObserver){this.resizeObserver.disconnect()}}handleItemsChange(){this.updateCanvasHeight()}handleViewportChange(){this.updateCanvasHeight()}render(){var t,e,n,r;const a=(e=(t=this.config)===null||t===void 0?void 0:t.canvasMinHeight)!==null&&e!==void 0?e:20;const h=s(a,this.config);return i("div",{key:"c16928fd8c13ae3afce3ac3385893d96187ff75d",class:"canvas-section-viewer","data-canvas-id":this.canvasId},i("div",{key:"7e698a6bec417033c39856202728384a540a5f31",class:"grid-container",id:this.canvasId,"data-canvas-id":this.canvasId,style:{backgroundColor:this.backgroundColor||"#ffffff",minHeight:`${h}px`,height:this.calculatedHeight>0?`${this.calculatedHeight}px`:undefined},ref:t=>this.gridContainerRef=t},this.errorAdapterInstance?i("error-boundary",Object.assign({},this.errorAdapterInstance.createErrorBoundaryConfig("canvas-section",{canvasId:this.canvasId})),(n=this.items)===null||n===void 0?void 0:n.map((t=>i("grid-item-wrapper",{key:t.id,item:t,renderVersion:this.renderVersion,config:this.config,componentRegistry:this.componentRegistry,viewerMode:true,currentViewport:this.currentViewport,canvasItems:this.items,virtualRendererInstance:this.virtualRendererInstance,stateInstance:this.stateInstance,errorAdapterInstance:this.errorAdapterInstance})))):(r=this.items)===null||r===void 0?void 0:r.map((t=>i("grid-item-wrapper",{key:t.id,item:t,renderVersion:this.renderVersion,config:this.config,componentRegistry:this.componentRegistry,viewerMode:true,currentViewport:this.currentViewport,canvasItems:this.items,virtualRendererInstance:this.virtualRendererInstance,stateInstance:this.stateInstance})))))}static get watchers(){return{items:["handleItemsChange"],currentViewport:["handleViewportChange"]}}};a.style=r;export{a as canvas_section_viewer};
//# sourceMappingURL=p-f9836a8a.entry.js.map