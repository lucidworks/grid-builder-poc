import{r as i,h as t}from"./p-CC73Dkup.js";import{c as s,g as e}from"./p-1wddBNwA.js";import{c as n}from"./p-D0wwQuOO.js";import"./p-BmMMCJ61.js";const r='@charset "UTF-8";.canvas-section-viewer{display:block;width:100%;margin:0;padding:0;}.canvas-section-viewer .grid-container{position:relative;width:100%;background-color:#ffffff;background-image:none !important;overflow:visible}';const a=class{constructor(t){i(this,t);this.renderVersion=0;this.calculatedHeight=400;this.updateCanvasHeight=()=>{if(!this.items||!this.currentViewport){return}this.calculatedHeight=n(this.items,this.currentViewport,this.config)};this.setupResizeObserver=()=>{if(!this.gridContainerRef||this.resizeObserver){return}this.resizeObserver=new ResizeObserver((()=>{s();this.updateCanvasHeight();this.renderVersion++}));this.resizeObserver.observe(this.gridContainerRef)}}componentDidLoad(){this.updateCanvasHeight();this.setupResizeObserver()}componentDidUpdate(){if(!this.resizeObserver&&this.gridContainerRef){this.setupResizeObserver()}}disconnectedCallback(){if(this.resizeObserver){this.resizeObserver.disconnect()}}handleItemsChange(){this.updateCanvasHeight()}handleViewportChange(){this.updateCanvasHeight()}render(){var i,s,n;const r=(s=(i=this.config)===null||i===void 0?void 0:i.canvasMinHeight)!==null&&s!==void 0?s:20;const a=e(r,this.config);return t("div",{key:"caf1e2ae12ee7448cd4e420c66d3821591cb0f2d",class:"canvas-section-viewer","data-canvas-id":this.canvasId},t("div",{key:"86be5e129c3bb383d83ea95780c33002a31c361f",class:"grid-container",id:this.canvasId,"data-canvas-id":this.canvasId,style:{backgroundColor:this.backgroundColor||"#ffffff",minHeight:`${a}px`,height:this.calculatedHeight>0?`${this.calculatedHeight}px`:undefined},ref:i=>this.gridContainerRef=i},(n=this.items)===null||n===void 0?void 0:n.map((i=>t("grid-item-wrapper",{key:i.id,item:i,renderVersion:this.renderVersion,config:this.config,componentRegistry:this.componentRegistry,viewerMode:true,currentViewport:this.currentViewport,canvasItems:this.items})))))}static get watchers(){return{items:["handleItemsChange"],currentViewport:["handleViewportChange"]}}};a.style=r;export{a as canvas_section_viewer};
//# sourceMappingURL=p-c73d3284.entry.js.map