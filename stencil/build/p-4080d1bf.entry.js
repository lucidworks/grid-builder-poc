import{r as e,c as t,h as r,g as i}from"./p-CR9rAByj.js";import{c as o,b as s,f as n,g as a,a as d,C as h,M as l,d as c,s as u,e as p}from"./p-xVfEtzcZ.js";import{s as b,h as g,i as f,b as m,p as y,j as v,f as x,e as w,a as z,D as k}from"./p-BiM0xz1T.js";function I(e,t){const r=t||o(e);if(r.type==="permission"){return"strict"}if(r.type==="network"||r.type==="timeout"){return"retry"}if(r.type==="validation"){return"graceful"}if(r.severity==="info"||r.severity==="warning"){return"ignore"}return"graceful"}const M='.error-boundary-wrapper{display:block;position:relative;width:100%;min-height:50px}.error-boundary-wrapper.error-boundary-hidden{min-height:0;height:0;overflow:hidden}.error-boundary-wrapper.error-boundary-error{min-height:100px;height:auto}.error-boundary-wrapper--canvas-section{height:auto;min-height:0}.error-boundary-wrapper--canvas-section .error-boundary-content{height:auto}.error-boundary-wrapper--grid-item-wrapper{height:100%}.error-boundary-wrapper--grid-item-wrapper .error-boundary-content{height:100%;box-sizing:border-box}.error-boundary-content{height:100%;box-sizing:border-box}.error-boundary-fallback{background:var(--error-boundary-bg, #fee);border:2px solid var(--error-boundary-border, #f44);border-radius:var(--error-boundary-radius, 4px);padding:var(--error-boundary-padding, 16px);margin:var(--error-boundary-margin, 8px 0);font-family:var(--error-boundary-font, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif);font-size:14px;line-height:1.5}.error-boundary-fallback[data-severity=critical]{background:var(--error-boundary-critical-bg, #fdd);border-color:var(--error-boundary-critical-border, #c00)}.error-boundary-fallback[data-severity=critical] .error-boundary-icon{color:var(--error-boundary-critical-color, #c00)}.error-boundary-fallback[data-severity=error]{background:var(--error-boundary-error-bg, #fee);border-color:var(--error-boundary-error-border, #f44)}.error-boundary-fallback[data-severity=error] .error-boundary-icon{color:var(--error-boundary-error-color, #f44)}.error-boundary-fallback[data-severity=warning]{background:var(--error-boundary-warning-bg, #fffbea);border-color:var(--error-boundary-warning-border, #f59e0b)}.error-boundary-fallback[data-severity=warning] .error-boundary-icon{color:var(--error-boundary-warning-color, #f59e0b)}.error-boundary-fallback[data-severity=info]{background:var(--error-boundary-info-bg, #eff6ff);border-color:var(--error-boundary-info-border, #3b82f6)}.error-boundary-fallback[data-severity=info] .error-boundary-icon{color:var(--error-boundary-info-color, #3b82f6)}.error-boundary-header{display:flex;align-items:center;gap:8px;margin-bottom:12px;font-weight:600;font-size:16px}.error-boundary-icon{font-size:24px;line-height:1;flex-shrink:0}.error-boundary-title{color:var(--error-boundary-title-color, #333)}.error-boundary-message{color:var(--error-boundary-message-color, #555);margin-bottom:12px;word-wrap:break-word;overflow-wrap:break-word}.error-boundary-details{margin-top:12px;padding:12px;background:var(--error-boundary-details-bg, #f5f5f5);border-radius:4px;font-size:13px}.error-boundary-details summary{cursor:pointer;user-select:none;font-weight:600;color:var(--error-boundary-details-color, #666);padding:4px 0}.error-boundary-details summary:hover{color:var(--error-boundary-details-hover-color, #333)}.error-boundary-details summary:focus{outline:2px solid var(--error-boundary-focus-color, #3b82f6);outline-offset:2px;border-radius:2px}.error-boundary-stack{margin:8px 0 0 0;padding:12px;background:var(--error-boundary-stack-bg, #fff);border:1px solid var(--error-boundary-stack-border, #ddd);border-radius:3px;font-family:"Monaco", "Menlo", "Ubuntu Mono", monospace;font-size:12px;line-height:1.4;color:var(--error-boundary-stack-color, #333);overflow-x:auto;white-space:pre-wrap;word-break:break-all}.error-boundary-component-stack{margin-top:12px}.error-boundary-component-stack strong{display:block;margin-bottom:4px;color:var(--error-boundary-label-color, #666)}.error-boundary-component-stack pre{margin:0;padding:8px;background:var(--error-boundary-component-stack-bg, #fff);border:1px solid var(--error-boundary-component-stack-border, #ddd);border-radius:3px;font-family:"Monaco", "Menlo", "Ubuntu Mono", monospace;font-size:12px;color:var(--error-boundary-component-stack-color, #555);overflow-x:auto}.error-boundary-retry{display:inline-block;padding:8px 16px;background:var(--error-boundary-retry-bg, #3b82f6);color:var(--error-boundary-retry-color, #fff);border:none;border-radius:4px;font-size:14px;font-weight:500;cursor:pointer;transition:background 0.2s ease, transform 0.1s ease}.error-boundary-retry:hover{background:var(--error-boundary-retry-hover-bg, #2563eb)}.error-boundary-retry:active{transform:translateY(1px)}.error-boundary-retry:focus{outline:2px solid var(--error-boundary-focus-color, #3b82f6);outline-offset:2px}.error-boundary-retry:disabled{background:var(--error-boundary-retry-disabled-bg, #ccc);cursor:not-allowed;opacity:0.6}.error-boundary-retry:disabled:hover{background:var(--error-boundary-retry-disabled-bg, #ccc)}.error-boundary-custom{display:block;width:100%}.error-boundary-custom>*:first-child{margin-top:0}.error-boundary-custom>*:last-child{margin-bottom:0}.sr-only{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0}@media (max-width: 768px){.error-boundary-fallback{padding:12px;font-size:13px}.error-boundary-header{font-size:15px}.error-boundary-icon{font-size:20px}.error-boundary-stack{font-size:11px}.error-boundary-retry{padding:6px 12px;font-size:13px}}@media print{.error-boundary-fallback{border:2px solid #000;page-break-inside:avoid}.error-boundary-retry{display:none}.error-boundary-details[open] summary{display:none}}@media (prefers-color-scheme: dark){.error-boundary-fallback{background:var(--error-boundary-dark-bg, #3a0000);border-color:var(--error-boundary-dark-border, #aa0000)}.error-boundary-fallback[data-severity=warning]{background:var(--error-boundary-dark-warning-bg, #3a2f00);border-color:var(--error-boundary-dark-warning-border, #f59e0b)}.error-boundary-fallback[data-severity=info]{background:var(--error-boundary-dark-info-bg, #001a3a);border-color:var(--error-boundary-dark-info-border, #3b82f6)}.error-boundary-title,.error-boundary-message{color:var(--error-boundary-dark-text-color, #eee)}.error-boundary-details{background:var(--error-boundary-dark-details-bg, #2a2a2a)}.error-boundary-details summary{color:var(--error-boundary-dark-details-color, #ccc)}.error-boundary-details summary:hover{color:var(--error-boundary-dark-details-hover-color, #fff)}.error-boundary-stack{background:var(--error-boundary-dark-stack-bg, #1a1a1a);border-color:var(--error-boundary-dark-stack-border, #444);color:var(--error-boundary-dark-stack-color, #ddd)}.error-boundary-component-stack strong{color:var(--error-boundary-dark-label-color, #aaa)}.error-boundary-component-stack pre{background:var(--error-boundary-dark-component-stack-bg, #1a1a1a);border-color:var(--error-boundary-dark-component-stack-border, #444);color:var(--error-boundary-dark-component-stack-color, #ccc)}}@media (prefers-contrast: high){.error-boundary-fallback{border-width:3px}.error-boundary-retry{border:2px solid currentColor}.error-boundary-details summary:focus{outline-width:3px}}@media (prefers-reduced-motion: reduce){.error-boundary-retry{transition:none}.error-boundary-retry:active{transform:none}}';const C=class{constructor(r){e(this,r);this.errorEvent=t(this,"error",6);this.caughtError=null;this.errorInfo=null;this.renderErrorCaught=false;this.handleRetry=()=>{this.caughtError=null;this.errorInfo=null;this.renderErrorCaught=false}}componentWillRender(){this.renderErrorCaught=false}handleError(e){if(this.renderErrorCaught){console.error("ErrorBoundary: Infinite error loop detected",e);return}this.renderErrorCaught=true;const t=s(e,this.errorBoundary,this.context);const r=o(e);const i=this.recoveryStrategy||I(e,r);this.errorEvent.emit(t);if(i==="graceful"){this.caughtError=e;this.errorInfo=t.errorInfo}else if(i==="strict"){throw e}else if(i==="ignore"){console.warn("ErrorBoundary: Ignoring error (recovery strategy: ignore)",e);this.renderErrorCaught=false}}async simulateError(e){const t=typeof e==="string"?new Error(e):e;this.handleError(t)}renderContent(){try{return r("div",{class:"error-boundary-content"},r("slot",null))}catch(e){const t=e instanceof Error?e:new Error(String(e));this.handleError(t);return null}}renderDefaultFallback(){if(!this.caughtError||!this.errorInfo){return null}const e=o(this.caughtError);const t=a(e.severity);const i="production"!=="production";const s=n(this.caughtError,e,i);return r("div",{class:"error-boundary-fallback","data-severity":e.severity},r("div",{class:"error-boundary-header"},r("span",{class:"error-boundary-icon"},t),r("span",{class:"error-boundary-title"},e.severity==="critical"?"Critical Error":"Error")),r("div",{class:"error-boundary-message"},s),i,e.recoverable&&r("button",{class:"error-boundary-retry",onClick:this.handleRetry},"Try Again"))}renderCustomFallback(){if(!this.caughtError||!this.errorInfo){return null}if(this.errorFallback){const e=this.errorFallback(this.caughtError,this.errorInfo,this.handleRetry);if(e instanceof HTMLElement){return r("div",{class:"error-boundary-custom",ref:t=>t&&!t.hasChildNodes()&&t.appendChild(e)})}return r("div",{class:"error-boundary-custom"},e)}const e=this.el.querySelector('[slot="fallback"]');if(e){return r("div",{class:"error-boundary-custom"},r("slot",{name:"fallback"}))}return null}getBoundaryModifierClass(){const e=this.errorBoundary.replace(/[^a-zA-Z0-9-]/g,"-");return`error-boundary-wrapper--${e}`}render(){const e=this.getBoundaryModifierClass();if(!this.caughtError){return r("div",{class:`error-boundary-wrapper ${e}`,"data-error-boundary":this.errorBoundary},this.renderContent())}const t="production"!=="production";const i=this.showErrorUI!==undefined?this.showErrorUI:t;if(!i){return r("div",{class:`error-boundary-wrapper error-boundary-hidden ${e}`,"data-error-boundary":this.errorBoundary})}const o=this.renderCustomFallback();return r("div",{class:`error-boundary-wrapper error-boundary-error ${e}`,"data-error-boundary":this.errorBoundary},o||this.renderDefaultFallback())}get el(){return i(this)}};C.style=M;function E(e){const t=e.style.transform;const r=t.match(/translate\(([\d.-]+)px,\s*([\d.-]+)px\)/);if(r){return{x:parseFloat(r[1]),y:parseFloat(r[2])}}return{x:0,y:0}}class F{constructor(e,t,r,i,o,s,n,a,d,h){this.interactInstance=null;this.basePosition={x:0,y:0};this.dragStartCanvasId="";this.hasMoved=false;this.dragRafId=null;this.element=e;this.item=t;this.state=r;this.onUpdate=i;this.domCacheInstance=o;this.config=s;this.dragHandleElement=n;this.onDragMove=a;this.onOperationStart=d;this.onOperationEnd=h;this.initialize()}destroy(){if(this.interactInstance){this.interactInstance.unset()}}initialize(){var e,t;const r=window.interact;if(!r){console.warn("interact.js not loaded");return}const i=this.dragHandleElement||this.element;const o=(t=(e=this.config)===null||e===void 0?void 0:e.enableAutoScroll)!==null&&t!==void 0?t:true;const s={inertia:false,autoScroll:o?{enabled:true,container:window,margin:60,speed:600}:false,listeners:{start:this.handleDragStart.bind(this),move:this.handleDragMove.bind(this),end:this.handleDragEnd.bind(this)}};if(!this.dragHandleElement){s.allowFrom=".grid-item-header";s.ignoreFrom=".resize-handle"}this.interactInstance=r(i).draggable(s)}handleDragStart(e){var t;(t=this.onOperationStart)===null||t===void 0?void 0:t.call(this);if(window.perfMonitor){window.perfMonitor.startOperation("drag")}this.hasMoved=false;const r=this.dragHandleElement?this.element:e.target;r.classList.add("dragging");this.dragStartCanvasId=this.item.canvasId;b(this.item.canvasId);g(this.item.id,this.item.canvasId);const i=this.dragHandleElement?this.element:e.target;this.basePosition=E(i);this.element._originalTransform=this.element.style.transform;this.element._originalPosition={x:this.basePosition.x,y:this.basePosition.y};e.target.setAttribute("data-x","0");e.target.setAttribute("data-y","0")}handleDragMove(e){const t=(parseFloat(e.target.getAttribute("data-x"))||0)+e.dx;const r=(parseFloat(e.target.getAttribute("data-y"))||0)+e.dy;e.target.setAttribute("data-x",t.toString());e.target.setAttribute("data-y",r.toString());if(!this.hasMoved&&this.onDragMove){this.hasMoved=true;this.onDragMove()}if(this.dragRafId){cancelAnimationFrame(this.dragRafId)}this.dragRafId=requestAnimationFrame((()=>{const i=this.dragHandleElement?this.element:e.target;i.style.transform=`translate(${this.basePosition.x+t}px, ${this.basePosition.y+r}px)`;this.dragRafId=null}))}handleDragEnd(e){var t,r;if(this.dragRafId){cancelAnimationFrame(this.dragRafId);this.dragRafId=null}const i=parseFloat(e.target.getAttribute("data-x"))||0;const o=parseFloat(e.target.getAttribute("data-y"))||0;const s=this.dragHandleElement?this.element:e.target;s.classList.remove("dragging");if(this.hasMoved){const t=e.target;const r=e=>{e.stopPropagation();e.preventDefault();t.removeEventListener("click",r,true)};t.addEventListener("click",r,true);setTimeout((()=>{t.removeEventListener("click",r,true)}),100)}const n=this.dragHandleElement?this.element:e.target;const a=n.getBoundingClientRect();let l=this.item.canvasId;let c=false;const u=document.querySelectorAll(".grid-container");u.forEach((e=>{const t=e.getBoundingClientRect();if(a.left>=t.left&&a.right<=t.right&&a.top>=t.top&&a.bottom<=t.bottom){l=e.getAttribute("data-canvas-id")||this.item.canvasId;c=true}}));if(!c){const e=a.left+a.width/2;const t=a.top+a.height/2;u.forEach((r=>{const i=r.getBoundingClientRect();if(e>=i.left&&e<=i.right&&t>=i.top&&t<=i.bottom){l=r.getAttribute("data-canvas-id")||this.item.canvasId}}))}if(l!==this.dragStartCanvasId){e.target.setAttribute("data-x","0");e.target.setAttribute("data-y","0");if(window.perfMonitor){window.perfMonitor.endOperation("drag")}(t=this.onOperationEnd)===null||t===void 0?void 0:t.call(this);return}const p=this.domCacheInstance.getCanvas(l);if(!p){this.snapBackToOriginalPosition(e);(r=this.onOperationEnd)===null||r===void 0?void 0:r.call(this);return}const b=f(l,this.config,false,this.domCacheInstance);const g=m(this.config);let x=this.basePosition.x+i;let w=this.basePosition.y+o;x=Math.round(x/b)*b;w=Math.round(w/g)*g;const z=this.dragHandleElement?this.element:e.target;const k=parseFloat(z.style.width)||0;const I=parseFloat(z.style.height)||0;const M=y(x,l,this.config);const C=v(w,this.config);const E=y(k,l,this.config);const F=v(I,this.config);const R=d(M,C,E,F,h);const $=f(l,this.config,false,this.domCacheInstance);const j=m(this.config);x=R.x*$;w=R.y*j;const O=this.state.canvases[this.item.canvasId];const S=O===null||O===void 0?void 0:O.items.find((e=>e.id===this.item.id));const D=S||this.item;const T=JSON.parse(JSON.stringify(D));const H=this.state.currentViewport||"desktop";const W=T.layouts[H];W.x=R.x;W.y=R.y;if(H==="mobile"){T.layouts.mobile.customized=true;if(T.layouts.mobile.width===null){T.layouts.mobile.width=T.layouts.desktop.width}if(T.layouts.mobile.height===null){T.layouts.mobile.height=T.layouts.desktop.height}}requestAnimationFrame((()=>{var t;const r=this.dragHandleElement?this.element:e.target;r.style.transform=`translate(${x}px, ${w}px)`;e.target.setAttribute("data-x","0");e.target.setAttribute("data-y","0");if(window.perfMonitor){window.perfMonitor.endOperation("drag")}this.onUpdate(T);(t=this.onOperationEnd)===null||t===void 0?void 0:t.call(this)}))}snapBackToOriginalPosition(e){const t=this.element._originalPosition;const r=this.element._originalTransform;if(!t){const t=this.dragHandleElement?this.element:e.target;t.classList.remove("dragging");return}const i=this.dragHandleElement?this.element:e.target;i.style.transition="transform 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)";i.style.transform=r||`translate(${t.x}px, ${t.y}px)`;setTimeout((()=>{i.style.transition="";i.classList.remove("dragging")}),300);e.target.setAttribute("data-x","0");e.target.setAttribute("data-y","0");delete this.element._originalPosition;delete this.element._originalTransform;if(window.perfMonitor){window.perfMonitor.endOperation("drag")}}}const R="2025-12-04T07:04:18.744Z";const $=x("resize-handler");function j(e){const t=e.style.transform;const r=t.match(/translate\(([\d.-]+)px,\s*([\d.-]+)px\)/);if(r){return{x:parseFloat(r[1]),y:parseFloat(r[2])}}return{x:0,y:0}}class O{constructor(e,t,r,i,o,s,n,a,d){this.interactInstance=null;this.resizeRafId=null;this.startRect={x:0,y:0,width:0,height:0};this.lastCalculated={x:0,y:0,width:0,height:0};this.minWidth=100;this.minHeight=80;this.maxWidth=Infinity;this.maxHeight=Infinity;this.element=e;this.item=t;this.state=r;this.onUpdate=i;this.domCacheInstance=o;this.componentDefinition=s;this.config=n;this.onOperationStart=a;this.onOperationEnd=d;if(!e.style.width||!e.style.height){console.warn("Element missing width/height styles, waiting for next frame");requestAnimationFrame((()=>this.initialize()))}else{this.initialize()}}destroy(){if(this.resizeRafId){cancelAnimationFrame(this.resizeRafId);this.resizeRafId=null}if(this.interactInstance){this.interactInstance.unset()}}initialize(){var e,t;$.log("üì¶ resize-handler.ts build:",R);$.log("üîß Grid config fix applied - resize handler now uses same grid calculations as render");const r=window.interact;if(!r){console.warn("interact.js not loaded");return}const i=(e=this.componentDefinition)===null||e===void 0?void 0:e.minSize;const o=(t=this.componentDefinition)===null||t===void 0?void 0:t.maxSize;this.minWidth=i?w(i.width,this.item.canvasId,this.config):100;this.minHeight=i?z(i.height,this.config):80;this.maxWidth=o?w(o.width,this.item.canvasId,this.config):Infinity;this.maxHeight=o?z(o.height,this.config):Infinity;const s=this.maxWidth===Infinity||this.maxWidth>this.minWidth;const n=this.maxHeight===Infinity||this.maxHeight>this.minHeight;$.log("üîß ResizeHandler init for",this.item.id,{minWidth:this.minWidth,maxWidth:this.maxWidth,minHeight:this.minHeight,maxHeight:this.maxHeight,canResizeWidth:s,canResizeHeight:n,componentDefinition:this.componentDefinition});if(!s){$.log("  ‚ùå Disabling width resize");this.element.classList.add("resize-width-disabled")}if(!n){$.log("  ‚ùå Disabling height resize");this.element.classList.add("resize-height-disabled")}this.interactInstance=r(this.element).resizable({edges:{left:s,right:s,bottom:n,top:n},ignoreFrom:".grid-item-header",listeners:{start:this.handleResizeStart.bind(this),move:this.handleResizeMove.bind(this),end:this.handleResizeEnd.bind(this)}})}handleResizeStart(e){var t;(t=this.onOperationStart)===null||t===void 0?void 0:t.call(this);if(window.perfMonitor){window.perfMonitor.startOperation("resize")}e.target.classList.add("resizing");b(this.item.canvasId);const r=j(e.target);this.startRect.x=r.x;this.startRect.y=r.y;this.startRect.width=parseFloat(e.target.style.width)||0;this.startRect.height=parseFloat(e.target.style.height)||0;e.target.setAttribute("data-x","0");e.target.setAttribute("data-y","0");e.target.setAttribute("data-width","0");e.target.setAttribute("data-height","0");$.log("üü¢ RESIZE START:",{edges:e.edges,startRect:Object.assign({},this.startRect),itemId:this.item.id})}handleResizeMove(e){const t=(parseFloat(e.target.getAttribute("data-x"))||0)+e.deltaRect.left;const r=(parseFloat(e.target.getAttribute("data-y"))||0)+e.deltaRect.top;const i=(parseFloat(e.target.getAttribute("data-width"))||0)+e.deltaRect.width;const o=(parseFloat(e.target.getAttribute("data-height"))||0)+e.deltaRect.height;e.target.setAttribute("data-x",t.toString());e.target.setAttribute("data-y",r.toString());e.target.setAttribute("data-width",i.toString());e.target.setAttribute("data-height",o.toString());let s=this.startRect.width+i;let n=this.startRect.height+o;let a=this.startRect.x+t;let d=this.startRect.y+r;const h=this.domCacheInstance.getCanvas(this.item.canvasId);const l=h?h.clientWidth:Infinity;const c=h?h.clientHeight:Infinity;s=Math.max(this.minWidth,Math.min(this.maxWidth,s));n=Math.max(this.minHeight,Math.min(this.maxHeight,n));if(e.edges.top){const e=this.startRect.y+this.startRect.height;d=e-n}if(e.edges.left){const e=this.startRect.x+this.startRect.width;a=e-s}if(a<0){if(e.edges.left){s=Math.max(this.minWidth,s+a)}a=0}if(d<0){if(e.edges.top){n=Math.max(this.minHeight,n+d)}d=0}if(a+s>l){s=Math.max(this.minWidth,l-a)}if(d+n>c){n=Math.max(this.minHeight,c-d)}if(this.resizeRafId){cancelAnimationFrame(this.resizeRafId)}this.resizeRafId=requestAnimationFrame((()=>{$.log("üîµ RESIZE MOVE (RAF):",{edges:e.edges,deltas:{deltaX:t,deltaY:r,deltaWidth:i,deltaHeight:o},startRect:Object.assign({},this.startRect),calculated:{newX:a,newY:d,newWidth:s,newHeight:n}});e.target.style.transform=`translate(${a}px, ${d}px)`;e.target.style.width=s+"px";e.target.style.height=n+"px";this.resizeRafId=null}))}handleResizeEnd(e){var t,r;if(this.resizeRafId){cancelAnimationFrame(this.resizeRafId);this.resizeRafId=null}e.target.classList.remove("resizing");if(e.interaction&&typeof e.interaction.stop==="function"){e.interaction.stop()}const i=this.domCacheInstance.getCanvas(this.item.canvasId);if(!i){(t=this.onOperationEnd)===null||t===void 0?void 0:t.call(this);return}const o=i.getBoundingClientRect();const s=f(this.item.canvasId,this.config,false,this.domCacheInstance);const n=m(this.config);const a=parseFloat(e.target.getAttribute("data-x"))||0;const d=parseFloat(e.target.getAttribute("data-y"))||0;const h=parseFloat(e.target.getAttribute("data-width"))||0;const l=parseFloat(e.target.getAttribute("data-height"))||0;e.target.removeAttribute("data-x");e.target.removeAttribute("data-y");e.target.removeAttribute("data-width");e.target.removeAttribute("data-height");let c=this.startRect.x+a;let u=this.startRect.y+d;let p=this.startRect.width+h;let b=this.startRect.height+l;$.log("üî¥ RESIZE END:",{edges:e.edges,eventRect:{left:e.rect.left,top:e.rect.top,width:e.rect.width,height:e.rect.height},containerRect:{left:o.left,top:o.top},beforeSnap:{newX:c,newY:u,newWidth:p,newHeight:b},gridSize:{gridSizeX:s,gridSizeY:n},startRect:Object.assign({},this.startRect),lastCalculated:Object.assign({},this.lastCalculated)});if(p>this.startRect.width){p=Math.ceil(p/s)*s}else if(p<this.startRect.width){p=Math.floor(p/s)*s}else{p=Math.round(p/s)*s}p=Math.max(this.minWidth,p);if(b>this.startRect.height){b=Math.ceil(b/n)*n}else if(b<this.startRect.height){b=Math.floor(b/n)*n}else{b=Math.round(b/n)*n}b=Math.max(this.minHeight,b);if(c<this.startRect.x){c=Math.floor(c/s)*s}else if(c>this.startRect.x){c=Math.ceil(c/s)*s}else{c=Math.round(c/s)*s}if(u<this.startRect.y){u=Math.floor(u/n)*n}else if(u>this.startRect.y){u=Math.ceil(u/n)*n}else{u=Math.round(u/n)*n}$.log("  afterDirectionalSnap:",{newX:c,newY:u,newWidth:p,newHeight:b});if(e.edges.top){const e=this.startRect.y+this.startRect.height;u=e-b;$.log("  ‚úÖ TOP EDGE RESIZE: Preserving bottom edge",{bottomEdge:e,snappedHeight:b,adjustedY:u})}if(e.edges.left){const e=this.startRect.x+this.startRect.width;c=e-p;$.log("  ‚úÖ LEFT EDGE RESIZE: Preserving right edge",{rightEdge:e,snappedWidth:p,adjustedX:c})}const g=p;const x=b;p=Math.max(this.minWidth,Math.min(this.maxWidth,p));b=Math.max(this.minHeight,Math.min(this.maxHeight,b));if(g!==p&&e.edges.left){const e=g-p;c+=e}if(x!==b&&e.edges.top){const e=x-b;u+=e}$.log("  afterMinMaxClamp:",{newX:c,newY:u,newWidth:p,newHeight:b});const w=i.clientWidth;const z=i.clientHeight;$.log("  canvasBounds:",{canvasWidth:w,canvasHeight:z});$.log("  event.edges:",e.edges);if(p>w){$.log("  ‚ö†Ô∏è Width exceeds canvas, shrinking from",p,"to",w);p=w}if(c<0){$.log("  ‚ö†Ô∏è Left edge outside canvas, moving from x =",c,"to x = 0");c=0}if(c+p>w){if(e.edges&&e.edges.right){const e=w-c;$.log("  ‚ö†Ô∏è Right edge overflow (resizing from right), clamping width from",p,"to",e);p=Math.max(this.minWidth,e)}else{const e=w-p;$.log("  ‚ö†Ô∏è Right edge outside canvas, moving from x =",c,"to x =",e);c=e;if(c<0){$.log("  ‚ö†Ô∏è Cannot fit by moving, shrinking width to",w);p=w;c=0}}}if(b>z){$.log("  ‚ö†Ô∏è Height exceeds canvas, shrinking from",b,"to",z);b=z}if(u<0){$.log("  ‚ö†Ô∏è Top edge outside canvas, moving from y =",u,"to y = 0");u=0}if(u+b>z){if(e.edges&&e.edges.bottom){const e=z-u;$.log("  ‚ö†Ô∏è Bottom edge overflow (resizing from bottom), clamping height from",b,"to",e);b=Math.max(this.minHeight,e)}else{const e=z-b;$.log("  ‚ö†Ô∏è Bottom edge outside canvas, moving from y =",u,"to y =",e);u=e;if(u<0){$.log("  ‚ö†Ô∏è Cannot fit by moving, shrinking height to",z);b=z;u=0}}}$.log("  afterBoundaryCheck:",{newX:c,newY:u,newWidth:p,newHeight:b});e.target.style.transform=`translate(${c}px, ${u}px)`;e.target.style.width=p+"px";e.target.style.height=b+"px";$.log("  appliedToDOM:",{transform:`translate(${c}px, ${u}px)`,width:`${p}px`,height:`${b}px`});const k=this.state.canvases[this.item.canvasId];const I=k===null||k===void 0?void 0:k.items.find((e=>e.id===this.item.id));const M=I||this.item;const C=JSON.parse(JSON.stringify(M));const E=this.state.currentViewport||"desktop";const F=C.layouts[E];F.width=y(p,C.canvasId,this.config);F.height=v(b,this.config);if(e.edges&&e.edges.left){F.x=y(c,C.canvasId,this.config)}if(e.edges&&e.edges.top){F.y=v(u,this.config)}$.log("  finalGridUnits:",{x:F.x,y:F.y,width:F.width,height:F.height});$.log("---");if(E==="mobile"){C.layouts.mobile.customized=true}if(window.perfMonitor){window.perfMonitor.endOperation("resize")}this.onUpdate(C);(r=this.onOperationEnd)===null||r===void 0?void 0:r.call(this)}}const S='@charset "UTF-8";.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.grid-item{position:absolute;box-sizing:border-box;padding:0;border:none;border-radius:0;background:transparent;box-shadow:none;outline:2px solid transparent;outline-offset:-2px;cursor:default;transition:outline-color 0.2s, box-shadow 0.2s;will-change:transform;touch-action:none;container-type:inline-size;--selection-color:#f59e0b}.grid-item.with-animations{transition:border-color 0.2s, box-shadow 0.2s, transform var(--animation-duration, 200ms) ease-out, width var(--animation-duration, 200ms) ease-out, height var(--animation-duration, 200ms) ease-out}.grid-item.dragging,.grid-item.resizing{transition:none !important}.grid-item:hover{outline-color:var(--selection-color)}.grid-item[data-viewer-mode=true]:hover{outline-color:transparent}.grid-item.selected{outline:3px solid var(--selection-color);outline-offset:-3px;box-shadow:0 0 0 3px color-mix(in srgb, var(--selection-color) 20%, transparent), 0 4px 12px color-mix(in srgb, var(--selection-color) 30%, transparent);}.grid-item[data-viewer-mode=true].selected{outline:2px solid transparent;outline-offset:-2px;box-shadow:0 2px 4px rgba(0, 0, 0, 0.1)}.grid-item.dragging{cursor:move;opacity:0.7}.grid-item.resizing{user-select:none}.grid-item-header{position:absolute;z-index:100;top:-26px;left:12px;display:flex;align-items:center;padding:4px 10px;border:2px solid var(--selection-color);border-radius:4px 4px 0 0;border-bottom:none;background:var(--selection-color);color:white;cursor:move !important;font-size:11px;font-weight:600;gap:6px;letter-spacing:0.3px;opacity:0;pointer-events:auto;transition:opacity 0.2s;user-select:none;touch-action:none;}.grid-item.selected .grid-item-header,.grid-item:hover .grid-item-header{opacity:1}.grid-item.selected .grid-item-header{top:-27px;border:3px solid var(--selection-color);border-bottom:none;z-index:9999;}.grid-item-content{width:100%;height:100%;margin:0;padding:0;overflow:hidden;color:#666;font-size:13px;box-sizing:border-box;}.component-wrapper{width:100%;height:100%;margin:0;padding:0;box-sizing:border-box}.component-placeholder,.component-error{display:flex;flex-direction:column;height:100%;align-items:center;justify-content:center;padding:16px;font-size:12px;text-align:center;gap:8px}.component-placeholder{color:#999;font-style:italic}.component-error{width:100%;box-sizing:border-box;padding:8px;color:#dc3545;background:#fff3f3;border:1px dashed #dc3545;border-radius:4px;font-weight:500;font-size:11px;word-wrap:break-word;overflow-wrap:break-word;overflow:hidden;}.component-error::before{content:"‚ö†Ô∏è";font-size:20px;display:block}.grid-item-controls{position:absolute;z-index:10;top:-16px;right:8px;display:flex;gap:4px;opacity:0;transition:opacity 0.2s}.grid-item.selected .grid-item-controls,.grid-item:hover .grid-item-controls{opacity:1}.grid-item.selected .grid-item-controls{top:-16px;right:8px;z-index:9999;}.grid-item-control-btn{width:24px;height:24px;padding:0;border:none;border-radius:4px;background:#4a90e2;color:white;cursor:pointer;font-size:12px;line-height:1;transition:background 0.2s}.grid-item-control-btn:hover{background:#357abd}.grid-item-delete{width:24px;height:24px;padding:0;border:none;border-radius:50%;background:#f44;color:white;cursor:pointer;font-size:14px;line-height:1;transition:background 0.2s}.grid-item-delete:hover{background:#c00}.drag-handle{display:none}.resize-handle{position:absolute;z-index:10;width:14px;height:14px;border:2px solid white;border-radius:50%;background:var(--selection-color);box-shadow:0 0 4px rgba(0, 0, 0, 0.4);opacity:0;transition:opacity 0.2s, transform 0.2s;touch-action:none;}.resize-handle:hover{transform:scale(1.2)}.grid-item.selected .resize-handle,.grid-item:hover .resize-handle{opacity:1}.grid-item.selected .resize-handle{z-index:9999;}.resize-handle.nw{top:-7px;left:-7px;cursor:nw-resize}.resize-handle.ne{top:-7px;right:-7px;cursor:ne-resize}.resize-handle.sw{bottom:-7px;left:-7px;cursor:sw-resize}.resize-handle.se{right:-7px;bottom:-7px;cursor:se-resize}.resize-handle.n{top:-7px;left:50%;width:30px;height:6px;border-radius:3px;cursor:n-resize;transform:translateX(-50%)}.resize-handle.s{bottom:-7px;left:50%;width:30px;height:6px;border-radius:3px;cursor:s-resize;transform:translateX(-50%)}.resize-handle.e{top:50%;right:-7px;width:6px;height:30px;border-radius:3px;cursor:e-resize;transform:translateY(-50%)}.resize-handle.w{top:50%;left:-7px;width:6px;height:30px;border-radius:3px;cursor:w-resize;transform:translateY(-50%)}.grid-item.selected .resize-handle.nw,.grid-item.selected .resize-handle.n,.grid-item.selected .resize-handle.ne{top:-8px;}.grid-item.selected .resize-handle.sw,.grid-item.selected .resize-handle.s,.grid-item.selected .resize-handle.se{bottom:-8px;}.grid-item.selected .resize-handle.nw,.grid-item.selected .resize-handle.w,.grid-item.selected .resize-handle.sw{left:-8px;}.grid-item.selected .resize-handle.ne,.grid-item.selected .resize-handle.e,.grid-item.selected .resize-handle.se{right:-8px;}.grid-item.resize-width-disabled .resize-handle.w,.grid-item.resize-width-disabled .resize-handle.e,.grid-item.resize-width-disabled .resize-handle.nw,.grid-item.resize-width-disabled .resize-handle.ne,.grid-item.resize-width-disabled .resize-handle.sw,.grid-item.resize-width-disabled .resize-handle.se{display:none}.grid-item.resize-height-disabled .resize-handle.n,.grid-item.resize-height-disabled .resize-handle.s{display:none}@keyframes component-animate-in{0%,100%{outline-color:var(--selection-color);box-shadow:0 0 0 2px rgba(74, 144, 226, 0.5)}50%{outline-color:var(--selection-color);box-shadow:0 0 0 6px rgba(74, 144, 226, 0.7)}}.component-animate-in{animation:component-animate-in 600ms ease-out;outline-color:var(--selection-color);}';const D=x("grid-item-wrapper");const T=class{constructor(t){e(this,t);this.viewerMode=false;this.isSelected=false;this.isVisible=false;this.itemSnapshot=null;this.wasDragged=false;this.isOperating=false;this.captureItemSnapshot=()=>{this.itemSnapshot=JSON.parse(JSON.stringify(this.item))};this.handleItemUpdate=e=>{let t=false;let r=false;const i=this.stateInstance.currentViewport||"desktop";if(this.itemSnapshot){const o=this.itemSnapshot;const s=o.layouts[i];const n=e.layouts[i];const a=(s.x!==n.x||s.y!==n.y)&&s.width===n.width&&s.height===n.height;const d=s.width!==n.width||s.height!==n.height;const h=o.canvasId!==e.canvasId;t=a||h;r=d;if(t||r){const t=this.stateInstance.canvases;const i=t[o.canvasId];const s=(i===null||i===void 0?void 0:i.items.findIndex((e=>e.id===this.item.id)))||0;const n=o.zIndex;let a=n;if(o.canvasId!==e.canvasId){const r=t[e.canvasId];if(r){a=r.zIndexCounter++;e.zIndex=a}}if(this.undoRedoManagerInstance){const t=this.stateInstance.currentViewport;const i=o.layouts[t];const d=e.layouts[t];this.undoRedoManagerInstance.push(new l(e.id,o.canvasId,e.canvasId,{x:i.x,y:i.y},{x:d.x,y:d.y},s,n,a,r?{width:i.width,height:i.height}:undefined,r?{width:d.width,height:d.height}:undefined,this.stateInstance,t,{x:o.layouts.mobile.x,y:o.layouts.mobile.y,width:o.layouts.mobile.width,height:o.layouts.mobile.height,customized:o.layouts.mobile.customized},{x:e.layouts.mobile.x,y:e.layouts.mobile.y,width:e.layouts.mobile.width,height:e.layouts.mobile.height,customized:e.layouts.mobile.customized}))}}}const o=this.stateInstance.canvases;const s=o[this.item.canvasId];const n=s.items.findIndex((e=>e.id===this.item.id));if(n!==-1){const t=s.items.map(((t,r)=>r===n?e:t));const r=Object.assign(Object.assign({},s),{items:t});const i=Object.assign(Object.assign({},o),{[this.item.canvasId]:r});this.stateInstance.canvases=i}if(this.eventManagerInstance){const o=e.layouts[i];if(t){this.eventManagerInstance.emit("componentDragged",{itemId:e.id,canvasId:e.canvasId,position:{x:o.x,y:o.y}})}if(r){this.eventManagerInstance.emit("componentResized",{itemId:e.id,canvasId:e.canvasId,size:{width:o.width,height:o.height}})}}};this.handleClick=e=>{if(this.viewerMode){D.log("  ‚è≠Ô∏è Skipping - viewer mode");return}if(this.wasDragged){D.log("  ‚è≠Ô∏è Skipping - was dragged");setTimeout((()=>{this.wasDragged=false}),10);return}const t=e.target;if(t.classList.contains("drag-handle")||t.closest(".drag-handle")||t.classList.contains("resize-handle")||t.closest(".resize-handle")||t.classList.contains("grid-item-delete")||t.classList.contains("grid-item-control-btn")){D.log("  ‚è≠Ô∏è Skipping - clicked on control element");return}D.log("  ‚úÖ Proceeding with click handling");this.stateInstance.selectedItemId=this.item.id;this.stateInstance.selectedCanvasId=this.item.canvasId;this.stateInstance.activeCanvasId=this.item.canvasId;this.eventManagerInstance.emit("canvasActivated",{canvasId:this.item.canvasId});this.eventManagerInstance.emit("componentSelected",{itemId:this.item.id,canvasId:this.item.canvasId});D.log("  üì§ Dispatching item-click event",{itemId:this.item.id,canvasId:this.item.canvasId,hasItemRef:!!this.itemRef});const r=new CustomEvent("item-click",{detail:{itemId:this.item.id,canvasId:this.item.canvasId},bubbles:true,composed:true});this.itemRef.dispatchEvent(r);D.log("  ‚úÖ item-click event dispatched")};this.handleDelete=async(e,t)=>{D.log("üóëÔ∏è handleDelete (default wrapper button)",{itemId:e,canvasId:t});const r=new CustomEvent("grid-item:delete",{detail:{itemId:e,canvasId:t},bubbles:true,composed:true});D.log("  üì§ Dispatching grid-item:delete (internal event)");this.itemRef.dispatchEvent(r)}}componentWillLoad(){var e;this.updateComponentState();if(((e=this.config)===null||e===void 0?void 0:e.enableVirtualRendering)===false){this.isVisible=true}}componentWillUpdate(){this.updateComponentState()}updateComponentState(){if(this.viewerMode){this.isSelected=false;return}const e=this.stateInstance.selectedItemId;this.isSelected=e===this.item.id;if(!this.isOperating){this.captureItemSnapshot()}}componentDidLoad(){var e;if(!this.itemRef){return}requestAnimationFrame((()=>{var e;if(((e=this.config)===null||e===void 0?void 0:e.enableVirtualRendering)!==false&&this.virtualRendererInstance){this.virtualRendererInstance.observe(this.itemRef,this.item.id,(e=>{this.isVisible=e}))}else{this.isVisible=true}}));this.injectComponentContent();if(!this.viewerMode){const t=(e=this.componentRegistry)===null||e===void 0?void 0:e.get(this.item.type);const r=this.itemRef.querySelector(".grid-item-header");this.dragHandler=new F(this.itemRef,this.item,this.stateInstance,this.handleItemUpdate,this.domCacheInstance,this.config,r,(()=>{this.wasDragged=true}),(()=>{this.isOperating=true}),(()=>{this.isOperating=false}));this.resizeHandler=new O(this.itemRef,this.item,this.stateInstance,this.handleItemUpdate,this.domCacheInstance,t,this.config,(()=>{this.isOperating=true}),(()=>{this.isOperating=false}))}}componentDidUpdate(){if(!this.itemRef){return}this.injectComponentContent()}injectComponentContent(){var e;const t=(e=this.componentRegistry)===null||e===void 0?void 0:e.get(this.item.type);if(!(t===null||t===void 0?void 0:t.renderItemWrapper)||!this.itemRef)return;const r=`${this.item.id}-content`;const i=this.itemRef.querySelector(`#${r}`);if(!i)return;if(i.hasAttribute("data-content-injected"))return;const o=this.renderComponent();i.innerHTML="";if(o instanceof HTMLElement){i.appendChild(o)}else{const e=document.createElement("div");i.appendChild(e);e.textContent="[Component Content]"}i.setAttribute("data-content-injected","true")}disconnectedCallback(){if(this.dragHandler){this.dragHandler.destroy()}if(this.resizeHandler){this.resizeHandler.destroy()}if(this.itemRef&&this.virtualRendererInstance){this.virtualRendererInstance.unobserve(this.itemRef,this.item.id)}}handleItemChange(e,t){if(e===t)return;D.log("üì¶ Item prop changed:",{itemId:e.id,oldId:t===null||t===void 0?void 0:t.id});this.updateComponentState();if(!this.viewerMode&&this.dragHandler&&this.resizeHandler){D.log("  ‚úÖ Handlers updated with new item reference")}}handleRenderVersionChange(e,t){if(e===t)return;D.log("üîÑ RenderVersion changed:",{oldVersion:t,newVersion:e,itemId:this.item.id})}handleConfigChange(e,t){var r;if(e===t)return;D.log("‚öôÔ∏è Config prop changed:",{itemId:this.item.id,oldConfig:t,newConfig:e});if(!this.viewerMode&&this.itemRef){if(this.dragHandler){this.dragHandler.destroy()}if(this.resizeHandler){this.resizeHandler.destroy()}const t=(r=this.componentRegistry)===null||r===void 0?void 0:r.get(this.item.type);const i=this.itemRef.querySelector(".grid-item-header");this.dragHandler=new F(this.itemRef,this.item,this.stateInstance,this.handleItemUpdate,this.domCacheInstance,e,i,(()=>{this.wasDragged=true}),(()=>{this.isOperating=true}),(()=>{this.isOperating=false}));this.resizeHandler=new O(this.itemRef,this.item,this.stateInstance,this.handleItemUpdate,this.domCacheInstance,t,e,(()=>{this.isOperating=true}),(()=>{this.isOperating=false}));D.log("  ‚úÖ Handlers reinitialized with new config")}}handleViewportChange(e,t){if(e===t)return;if(!this.viewerMode)return;D.log("üì± Viewport prop changed (viewer mode):",{oldViewport:t,newViewport:e,itemId:this.item.id})}handleItemDeleteEvent(e){D.log("üî¥ @Listen(item-delete) - from custom wrapper",{eventTarget:e.target,itemId:this.item.id});e.stopPropagation();const t=new CustomEvent("grid-item:delete",{detail:{itemId:this.item.id,canvasId:this.item.canvasId},bubbles:true,composed:true});D.log("  üì§ Re-dispatching as grid-item:delete");this.itemRef.dispatchEvent(t)}handleItemBringToFrontEvent(e){e.stopPropagation();if(this.viewerMode)return;const t=this.stateInstance.canvases[this.item.canvasId];if(!t)return;const r=Math.max(...t.items.map((e=>e.zIndex)));const i=t.items.map((e=>e.id===this.item.id?Object.assign(Object.assign({},e),{zIndex:r+1}):e));this.stateInstance.canvases=Object.assign(Object.assign({},this.stateInstance.canvases),{[this.item.canvasId]:Object.assign(Object.assign({},t),{items:i})})}handleItemSendToBackEvent(e){e.stopPropagation();if(this.viewerMode)return;const t=this.stateInstance.canvases[this.item.canvasId];if(!t)return;const r=Math.min(...t.items.map((e=>e.zIndex)));const i=t.items.map((e=>e.id===this.item.id?Object.assign(Object.assign({},e),{zIndex:r-1}):e));this.stateInstance.canvases=Object.assign(Object.assign({},this.stateInstance.canvases),{[this.item.canvasId]:Object.assign(Object.assign({},t),{items:i})})}renderComponent(){var e,t;if(!this.isVisible){return r("div",{class:"component-placeholder"},"Loading...")}if(!this.componentRegistry){console.error(`GridItemWrapper: componentRegistry not provided for item ${this.item.id}`);return r("div",{class:"component-error"},"Component registry not available")}const i=this.componentRegistry.get(this.item.type);if(!i){if((e=this.config)===null||e===void 0?void 0:e.hideUnknownComponents){D.log(`GridItemWrapper: Hiding unknown component type "${this.item.type}" (hideUnknownComponents=true)`);return null}if((t=this.config)===null||t===void 0?void 0:t.renderUnknownComponent){D.log(`GridItemWrapper: Rendering custom unknown component for type "${this.item.type}"`);const e=this.config.renderUnknownComponent({type:this.item.type,itemId:this.item.id});if(e instanceof HTMLElement){return r("div",{ref:t=>t&&!t.hasChildNodes()&&t.appendChild(e)})}return e}console.error(`GridItemWrapper: Unknown component type "${this.item.type}" for item ${this.item.id}`);return r("div",{class:"component-error"},"Unknown component type: ",this.item.type)}const o=i.render({itemId:this.item.id,config:this.item.config});if(o instanceof HTMLElement){return r("div",{class:"component-wrapper",ref:e=>e&&!e.hasChildNodes()&&e.appendChild(o)})}return o}render(){var e,t,i,o,s,n,a,d,h;const l=this.renderComponent();if(l===null){return null}const b=this.item.id;const g=this.item.canvasId;const f=this.viewerMode?this.currentViewport||"desktop":this.stateInstance.currentViewport||"desktop";const m=this.viewerMode?this.breakpoints||k:this.stateInstance.breakpoints||k;const{layout:y,sourceBreakpoint:v}=c(this.item,f,m);let x=y;if(u(f,m)&&!y.customized){const t=this.viewerMode?this.canvasItems||[]:((e=this.stateInstance.canvases[this.item.canvasId])===null||e===void 0?void 0:e.items)||[];x=p(this.item,t,v)}const I=this.stateInstance.selectedItemId;const M=!this.viewerMode&&I===this.item.id;const C={"grid-item":true,selected:M,"with-animations":(i=(t=this.config)===null||t===void 0?void 0:t.enableAnimations)!==null&&i!==void 0?i:true};const E=w(x.x,this.item.canvasId,this.config);const F=z(x.y,this.config);const R=w(x.width,this.item.canvasId,this.config);const $=z(x.height,this.config);const j=(o=this.componentRegistry)===null||o===void 0?void 0:o.get(this.item.type);const O=(j===null||j===void 0?void 0:j.icon)||"ÔøΩ";const S=this.item.name||(j===null||j===void 0?void 0:j.name)||this.item.type;const D=(j===null||j===void 0?void 0:j.selectionColor)||((s=this.theme)===null||s===void 0?void 0:s.selectionColor)||"#f59e0b";const T=(n=j===null||j===void 0?void 0:j.configSchema)===null||n===void 0?void 0:n.find((e=>e.name==="backgroundColor"));const H=((a=this.item.config)===null||a===void 0?void 0:a.backgroundColor)||(T===null||T===void 0?void 0:T.defaultValue)||"transparent";const W={transform:`translate(${E}px, ${F}px)`,width:`${R}px`,height:`${$}px`,zIndex:this.item.zIndex.toString(),"--selection-color":D,"--animation-duration":`${(h=(d=this.config)===null||d===void 0?void 0:d.animationDuration)!==null&&h!==void 0?h:100}ms`,background:H};const A=`${this.item.id}-content`;const B=`${this.item.id}-description`;const V=!this.viewerMode?"Use arrow keys to nudge position, drag header to move, resize handles to change size, Delete to remove. Drag components from palette to add new items.":null;if(j===null||j===void 0?void 0:j.renderItemWrapper){const e=j.renderItemWrapper({itemId:this.item.id,componentType:this.item.type,name:S,icon:O,isSelected:M,contentSlotId:A});return r("div",{class:C,id:this.item.id,tabindex:this.viewerMode?undefined:0,"aria-selected":M?"true":"false","aria-describedby":V?B:undefined,"data-canvas-id":this.item.canvasId,"data-component-name":S,"data-viewer-mode":this.viewerMode?"true":"false",style:W,onClick:e=>this.handleClick(e),ref:e=>this.itemRef=e},V&&r("div",{id:B,class:"sr-only"},V),this.errorAdapterInstance?r("error-boundary",Object.assign({},this.errorAdapterInstance.createErrorBoundaryConfig("grid-item-wrapper",{itemId:this.item.id,canvasId:this.item.canvasId,componentType:this.item.type})),e):e,r("div",{class:"resize-handle nw"}),r("div",{class:"resize-handle ne"}),r("div",{class:"resize-handle sw"}),r("div",{class:"resize-handle se"}),r("div",{class:"resize-handle n"}),r("div",{class:"resize-handle s"}),r("div",{class:"resize-handle e"}),r("div",{class:"resize-handle w"}))}return r("div",{class:C,id:this.item.id,role:"group","aria-label":`${S} component`,tabindex:this.viewerMode?undefined:0,"aria-selected":M?"true":"false","aria-describedby":V?B:undefined,"data-canvas-id":this.item.canvasId,"data-component-name":S,"data-viewer-mode":this.viewerMode?"true":"false",style:W,onClick:e=>this.handleClick(e),ref:e=>this.itemRef=e},V&&r("div",{id:B,class:"sr-only"},V),!this.viewerMode&&[r("div",{class:"drag-handle",key:"drag-handle","aria-label":`Drag ${S}`,role:"button","aria-grabbed":false}),r("div",{class:"grid-item-header",key:"header","aria-label":`${S} component header`},O," ",S),r("div",{class:"grid-item-controls",key:"controls"},r("button",{class:"grid-item-delete","aria-label":`Delete ${S} component`,onClick:()=>this.handleDelete(b,g)},"√ó"))],this.errorAdapterInstance?r("error-boundary",Object.assign({},this.errorAdapterInstance.createErrorBoundaryConfig("grid-item-wrapper",{itemId:this.item.id,canvasId:this.item.canvasId,componentType:this.item.type})),r("div",{class:"grid-item-content",id:A,"data-component-type":this.item.type},l)):r("div",{class:"grid-item-content",id:A,"data-component-type":this.item.type},l),!this.viewerMode&&[r("div",{class:"resize-handle nw",key:"resize-nw",role:"slider","aria-label":"Resize top-left corner",tabindex:-1}),r("div",{class:"resize-handle ne",key:"resize-ne",role:"slider","aria-label":"Resize top-right corner",tabindex:-1}),r("div",{class:"resize-handle sw",key:"resize-sw",role:"slider","aria-label":"Resize bottom-left corner",tabindex:-1}),r("div",{class:"resize-handle se",key:"resize-se",role:"slider","aria-label":"Resize bottom-right corner",tabindex:-1}),r("div",{class:"resize-handle n",key:"resize-n",role:"slider","aria-label":"Resize top edge",tabindex:-1}),r("div",{class:"resize-handle s",key:"resize-s",role:"slider","aria-label":"Resize bottom edge",tabindex:-1}),r("div",{class:"resize-handle e",key:"resize-e",role:"slider","aria-label":"Resize right edge",tabindex:-1}),r("div",{class:"resize-handle w",key:"resize-w",role:"slider","aria-label":"Resize left edge",tabindex:-1})])}static get watchers(){return{item:["handleItemChange"],renderVersion:["handleRenderVersionChange"],config:["handleConfigChange"],currentViewport:["handleViewportChange"]}}};T.style=S;export{C as error_boundary,T as grid_item_wrapper};
//# sourceMappingURL=p-4080d1bf.entry.js.map