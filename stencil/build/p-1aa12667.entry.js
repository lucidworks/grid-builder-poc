import{r as e,c as t,h as o,H as i,a as n}from"./p-CC73Dkup.js";import{b as s}from"./p-D6MxQlNP.js";import{i as a}from"./p-BKH_Whl_.js";import{s as r,a as c,m as l,b as d,d as p,e as h,g as f,c as u}from"./p-BmMMCJ61.js";import{a as b,v as m,b as v,M as g,u as x,d as y,R as w,A as k,B as C,e as I,f as j,c as A,C as O}from"./p-CMWmbO8u.js";import{e as z}from"./p-Bh3ZsUIZ.js";import{p as D,f as S}from"./p-1wddBNwA.js";const M=".canvas-header{position:absolute;top:0;right:0;z-index:10;display:flex;align-items:center;justify-content:flex-end;padding:12px;margin:0;gap:8px}.canvas-wrapper:not(:first-child) .canvas-header{margin-top:-38px}.canvas-header .canvas-title{display:inline-flex;align-items:center;padding:6px 12px;border-radius:4px;margin:0;background:#4a90e2;box-shadow:0 1px 3px rgba(74, 144, 226, 0.2);color:white;cursor:pointer;font-size:13px;font-weight:500;text-transform:none;opacity:0.6;transition:all 0.15s}.canvas-header .canvas-title:hover{background:#357abd;box-shadow:0 2px 6px rgba(74, 144, 226, 0.3)}.canvas-header.is-active .canvas-title{opacity:1}.canvas-header .canvas-actions{display:flex;align-items:center;gap:6px}.canvas-header .canvas-actions .delete-canvas-btn{display:flex;width:28px;height:28px;align-items:center;justify-content:center;padding:0;border:1px solid #dee2e6;border-radius:4px;background:white;color:#dc3545;cursor:pointer;font-size:20px;font-weight:300;line-height:1;transition:all 0.15s}.canvas-header .canvas-actions .delete-canvas-btn:hover{border-color:#dc3545;background:rgba(220, 53, 69, 0.1);transform:scale(1.1)}.canvas-header .canvas-actions .delete-canvas-btn:active{transform:scale(1)}";const B=class{constructor(o){e(this,o);this.headerClick=t(this,"headerClick");this.deleteClick=t(this,"deleteClick");this.isDeletable=true;this.isActive=false;this.handleTitleClick=()=>{this.headerClick.emit({canvasId:this.canvasId})};this.handleDeleteClick=()=>{this.deleteClick.emit({canvasId:this.canvasId})}}render(){const e=`canvas-header ${this.isActive?"is-active":""}`;return o("div",{key:"0622140029197ab14ae487d770a1ac1aadf3ce11",class:e,"data-canvas-id":this.canvasId},o("div",{key:"e545606f84dae4e932b669699486823251369407",class:"canvas-actions"},o("span",{key:"28305135823b7b938a17d612ce0a0b4d91eb43a0",class:"canvas-title",onClick:this.handleTitleClick},this.sectionTitle),this.isDeletable&&o("button",{key:"90836d62507275892664aff13f6957d61da1b7b2",class:"delete-canvas-btn",title:"Delete this section",onClick:this.handleDeleteClick},"Ã—")))}};B.style=M;const $="confirmation-modal .confirmation-overlay{position:fixed;z-index:10000;top:0;right:0;bottom:0;left:0;display:flex;align-items:center;justify-content:center;animation:fadeIn 0.2s ease-out;background:rgba(0, 0, 0, 0.5)}confirmation-modal .confirmation-modal{width:90%;max-width:400px;border-radius:8px;animation:slideUp 0.2s ease-out;background:white;box-shadow:0 4px 20px rgba(0, 0, 0, 0.15)}confirmation-modal .modal-header{padding:20px 24px;border-bottom:1px solid #e9ecef}confirmation-modal .modal-header .modal-title{margin:0;color:#212529;font-size:18px;font-weight:600}confirmation-modal .modal-body{padding:24px}confirmation-modal .modal-body .modal-message{margin:0;color:#495057;font-size:14px;line-height:1.5}confirmation-modal .modal-footer{display:flex;justify-content:flex-end;padding:16px 24px;border-top:1px solid #e9ecef;gap:12px}confirmation-modal .modal-footer button{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px;font-weight:500;transition:all 0.15s}confirmation-modal .modal-footer button.cancel-btn{background:#f8f9fa;color:#495057}confirmation-modal .modal-footer button.cancel-btn:hover{background:#e9ecef}confirmation-modal .modal-footer button.confirm-btn{background:#dc3545;color:white}confirmation-modal .modal-footer button.confirm-btn:hover{background:#c82333}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}";const R=class{constructor(o){e(this,o);this.confirm=t(this,"confirm");this.cancel=t(this,"cancel");this.isOpen=false;this.data=null;this.handleConfirm=()=>{this.confirm.emit()};this.handleCancel=()=>{this.cancel.emit()}}render(){if(!this.isOpen||!this.data){return null}return o("div",{class:"confirmation-overlay",onClick:this.handleCancel},o("div",{class:"confirmation-modal",onClick:e=>e.stopPropagation()},o("div",{class:"modal-header"},o("h2",{class:"modal-title"},this.data.title)),o("div",{class:"modal-body"},o("p",{class:"modal-message"},this.data.message)),o("div",{class:"modal-footer"},o("button",{class:"cancel-btn",onClick:this.handleCancel},"Cancel"),o("button",{class:"confirm-btn",onClick:this.handleConfirm},"Delete"))))}};R.style=$;const E='.custom-config-panel{position:fixed;right:0;bottom:0;width:400px;max-width:90vw;max-height:80vh;background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);border-radius:12px 0 0 0;box-shadow:0 -4px 20px rgba(0, 0, 0, 0.15);display:flex;flex-direction:column;z-index:1000;transform:translateY(100%);transition:transform 0.3s ease-in-out;overflow:hidden}.custom-config-panel.panel-open{transform:translateY(0)}.custom-panel-header{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;background:rgba(255, 255, 255, 0.1);backdrop-filter:blur(10px);border-bottom:1px solid rgba(255, 255, 255, 0.2)}.custom-panel-header .header-content{display:flex;align-items:center;gap:12px;color:#ffffff}.custom-panel-header .header-content .component-icon{font-size:24px;line-height:1}.custom-panel-header .header-content h2{margin:0;font-size:20px;font-weight:600;color:#ffffff}.custom-panel-header .close-btn{background:rgba(255, 255, 255, 0.2);border:none;color:#ffffff;width:32px;height:32px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:20px;transition:all 0.2s ease}.custom-panel-header .close-btn:hover{background:rgba(255, 255, 255, 0.3);transform:scale(1.1)}.custom-panel-header .close-btn:active{transform:scale(0.95)}.custom-panel-body{flex:1;overflow-y:auto;padding:24px;background:#ffffff}.custom-panel-body .config-section{margin-bottom:24px}.custom-panel-body .config-section:last-child{margin-bottom:0}.custom-panel-body .config-section .section-label{display:block;font-size:14px;font-weight:600;color:#374151;margin-bottom:8px;text-transform:uppercase;letter-spacing:0.5px}.custom-panel-body .config-section.info-section{background:#f9fafb;border-radius:8px;padding:16px}.custom-panel-body .config-section.info-section .info-row{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid #e5e7eb}.custom-panel-body .config-section.info-section .info-row:last-child{border-bottom:none;padding-bottom:0}.custom-panel-body .config-section.info-section .info-row:first-child{padding-top:0}.custom-panel-body .config-section.info-section .info-row .info-label{font-size:13px;font-weight:500;color:#6b7280}.custom-panel-body .config-section.info-section .info-row .info-value{font-size:13px;color:#1f2937;font-family:"Monaco", "Menlo", monospace;background:#ffffff;padding:4px 8px;border-radius:4px}.custom-panel-body .config-field{margin-bottom:16px}.custom-panel-body .config-field:last-child{margin-bottom:0}.custom-panel-body .config-field .field-label{display:block;font-size:13px;font-weight:500;color:#4b5563;margin-bottom:6px}.custom-panel-body .text-input{width:100%;padding:10px 12px;border:2px solid #e5e7eb;border-radius:6px;font-size:14px;color:#1f2937;transition:all 0.2s ease}.custom-panel-body .text-input:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px rgba(102, 126, 234, 0.1)}.custom-panel-body .text-input:disabled{background:#f9fafb;color:#9ca3af;cursor:not-allowed}.custom-panel-body .text-input::placeholder{color:#9ca3af}.custom-panel-body .select-input{width:100%;padding:10px 12px;border:2px solid #e5e7eb;border-radius:6px;font-size:14px;color:#1f2937;background:#ffffff;cursor:pointer;transition:all 0.2s ease}.custom-panel-body .select-input:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px rgba(102, 126, 234, 0.1)}.custom-panel-body .checkbox-label{display:flex;align-items:center;gap:8px;cursor:pointer;user-select:none}.custom-panel-body .checkbox-label input[type=checkbox]{width:18px;height:18px;cursor:pointer;accent-color:#667eea}.custom-panel-body .checkbox-label .checkbox-text{font-size:14px;color:#4b5563}.custom-panel-body .color-input-wrapper{display:flex;align-items:center;gap:12px}.custom-panel-body .color-input-wrapper .color-input{width:60px;height:40px;border:2px solid #e5e7eb;border-radius:6px;cursor:pointer;transition:all 0.2s ease}.custom-panel-body .color-input-wrapper .color-input:hover{border-color:#667eea}.custom-panel-body .color-input-wrapper .color-value{font-size:13px;font-family:"Monaco", "Menlo", monospace;color:#6b7280;background:#f9fafb;padding:8px 12px;border-radius:4px}.custom-panel-body .no-config-message{text-align:center;color:#9ca3af;font-size:14px;padding:24px;margin:0}.custom-panel-body .field-error{color:#ef4444;font-size:13px;margin:0;padding:8px;background:#fef2f2;border-radius:4px}.custom-panel-footer{display:flex;gap:12px;padding:20px 24px;background:#f9fafb;border-top:1px solid #e5e7eb}.custom-panel-footer .btn{flex:1;padding:12px 20px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all 0.2s ease;text-transform:uppercase;letter-spacing:0.5px}.custom-panel-footer .btn:active{transform:translateY(1px)}.custom-panel-footer .btn.btn-secondary{background:#ffffff;color:#6b7280;border:2px solid #e5e7eb}.custom-panel-footer .btn.btn-secondary:hover{background:#f9fafb;border-color:#d1d5db}.custom-panel-footer .btn.btn-primary{background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);color:#ffffff;box-shadow:0 4px 6px rgba(102, 126, 234, 0.3)}.custom-panel-footer .btn.btn-primary:hover{box-shadow:0 6px 12px rgba(102, 126, 234, 0.4);transform:translateY(-2px)}.custom-panel-footer .btn.btn-primary:active{transform:translateY(0);box-shadow:0 2px 4px rgba(102, 126, 234, 0.3)}@media (max-width: 768px){.custom-config-panel{width:100%;max-width:100vw;max-height:70vh;border-radius:12px 12px 0 0}}';const P=class{constructor(t){e(this,t);this.isOpen=false;this.selectedItemId=null;this.selectedCanvasId=null;this.componentConfig={};this.componentName="";this.originalState=null;this.componentRegistry=new Map;this.eventsSubscribed=false;this.handleItemRemoved=e=>{console.log("ðŸŽ¨ custom-config-panel received itemRemoved event",{eventItemId:e.itemId,selectedItemId:this.selectedItemId,isOpen:this.isOpen});if(this.isOpen&&this.selectedItemId&&e.itemId===this.selectedItemId){console.log("  âœ… Custom panel: Closing because selected item was deleted");this.closePanel()}};this.handleItemClick=e=>{console.log("ðŸŽ¨ custom-config-panel handleItemClick called",e.detail);this.ensureEventSubscription();const{itemId:t,canvasId:o}=e.detail;this.selectedItemId=t;this.selectedCanvasId=o;const i=this.getAPI();console.log("  ðŸ”§ API exists:",!!i);const n=i===null||i===void 0?void 0:i.getItem(t);console.log("  ðŸ”§ Item retrieved:",!!n,n);if(!n){console.log("  âŒ No item found - exiting");return}const s=this.componentRegistry.get(n.type);console.log("  ðŸ”§ Definition found:",!!s,s===null||s===void 0?void 0:s.name);this.originalState={name:n.name||(s===null||s===void 0?void 0:s.name)||n.type,zIndex:n.zIndex,config:n.config?Object.assign({},n.config):{}};this.componentName=this.originalState.name;this.componentConfig=Object.assign({},this.originalState.config);console.log("  ðŸšª Opening panel - setting isOpen = true");this.isOpen=true;console.log("  âœ… Panel should now be open, isOpen =",this.isOpen)};this.closePanel=()=>{const e=this.getAPI();if(this.selectedItemId&&this.selectedCanvasId&&this.originalState&&e){e.updateConfig(this.selectedItemId,this.originalState.config);const t=e.getState();for(const e in t.canvases){const o=t.canvases[e];const i=o.items.findIndex((e=>e.id===this.selectedItemId));if(i!==-1){o.items[i]=Object.assign(Object.assign({},o.items[i]),{name:this.originalState.name});t.canvases=Object.assign({},t.canvases);break}}}this.isOpen=false;this.selectedItemId=null;this.selectedCanvasId=null;this.componentName="";this.componentConfig={};this.originalState=null};this.saveConfig=()=>{this.isOpen=false;this.selectedItemId=null;this.selectedCanvasId=null;this.componentName="";this.componentConfig={};this.originalState=null};this.handleNameChange=e=>{const t=e.target.value;this.componentName=t;const o=this.getAPI();if(this.selectedItemId&&o){const e=o.getState();for(const o in e.canvases){const i=e.canvases[o];const n=i.items.findIndex((e=>e.id===this.selectedItemId));if(n!==-1){i.items[n]=Object.assign(Object.assign({},i.items[n]),{name:t});e.canvases=Object.assign({},e.canvases);break}}}};this.handleConfigChange=(e,t)=>{this.componentConfig=Object.assign(Object.assign({},this.componentConfig),{[e]:t});const o=this.getAPI();if(this.selectedItemId&&o){o.updateConfig(this.selectedItemId,this.componentConfig)}}}getAPI(){return this.api||window.gridBuilderAPI||null}ensureEventSubscription(){if(this.eventsSubscribed){return}const e=this.getAPI();if(!e){return}e.on("itemRemoved",this.handleItemRemoved);this.eventsSubscribed=true;console.log("  âœ… Custom panel: Subscribed to itemRemoved event")}handleApiChange(e,t){console.log("ðŸŽ¨ custom-config-panel API prop changed",{hadOldApi:!!t,hasNewApi:!!e,newApiType:typeof e});if(e&&!this.eventsSubscribed){this.ensureEventSubscription()}}componentDidLoad(){console.log("ðŸŽ¨ custom-config-panel componentDidLoad - setting up component registry");const e=this.getAPI();console.log("  ðŸ”§ API status:",{apiExists:!!e,apiType:typeof e,fromProp:!!this.api,fromWindow:!!window.gridBuilderAPI});this.componentRegistry=new Map(s.map((e=>[e.type,e])));this.ensureEventSubscription();document.addEventListener("item-click",this.handleItemClick);console.log("  âœ… Custom panel: Listening for item-click events")}disconnectedCallback(){console.log("ðŸŽ¨ custom-config-panel disconnectedCallback - cleaning up");const e=this.getAPI();if(e&&this.eventsSubscribed){e.off("itemRemoved",this.handleItemRemoved);this.eventsSubscribed=false}document.removeEventListener("item-click",this.handleItemClick)}render(){if(!this.isOpen){return null}const e=this.getAPI();const t=e===null||e===void 0?void 0:e.getItem(this.selectedItemId);if(!t){return null}const i=this.componentRegistry.get(t.type);if(!i){return null}const n={"custom-config-panel":true,"panel-open":this.isOpen};return o("div",{class:n},o("div",{class:"custom-panel-header"},o("div",{class:"header-content"},o("span",{class:"component-icon"},i.icon),o("h2",null,"Edit Component")),o("button",{class:"close-btn",onClick:()=>this.closePanel(),title:"Close"},"âœ•")),o("div",{class:"custom-panel-body"},o("div",{class:"config-section"},o("label",{class:"section-label"},"Component Name"),o("input",{type:"text",class:"text-input",value:this.componentName,placeholder:"Enter component name",onInput:e=>this.handleNameChange(e)})),o("div",{class:"config-section info-section"},o("div",{class:"info-row"},o("span",{class:"info-label"},"Type:"),o("span",{class:"info-value"},i.name)),o("div",{class:"info-row"},o("span",{class:"info-label"},"ID:"),o("span",{class:"info-value"},t.id))),i.configSchema&&i.configSchema.length>0?o("div",{class:"config-section"},o("label",{class:"section-label"},"Configuration"),i.configSchema.map((e=>o("div",{class:"config-field",key:e.name},o("label",{class:"field-label"},e.label),this.renderConfigField(e))))):o("div",{class:"config-section"},o("p",{class:"no-config-message"},"No configuration options available for this component."))),o("div",{class:"custom-panel-footer"},o("button",{class:"btn btn-secondary",onClick:()=>this.closePanel()},"Cancel"),o("button",{class:"btn btn-primary",onClick:()=>this.saveConfig()},"Save Changes")))}renderConfigField(e){var t,i,n;const s=(i=(t=this.componentConfig[e.name])!==null&&t!==void 0?t:e.defaultValue)!==null&&i!==void 0?i:"";switch(e.type){case"text":case"textarea":return o("input",{type:"text",class:"text-input",value:s,onInput:t=>this.handleConfigChange(e.name,t.target.value),placeholder:e.placeholder});case"number":return o("input",{type:"number",class:"text-input",value:s,onInput:t=>this.handleConfigChange(e.name,Number(t.target.value)),min:e.min,max:e.max,step:e.step});case"select":return o("select",{class:"select-input",onChange:t=>this.handleConfigChange(e.name,t.target.value)},(n=e.options)===null||n===void 0?void 0:n.map((e=>{const t=typeof e==="string"?e:e.value;const i=typeof e==="string"?e:e.label;return o("option",{key:t,value:t,selected:s===t},i)})));case"checkbox":return o("label",{class:"checkbox-label"},o("input",{type:"checkbox",checked:!!s,onChange:t=>this.handleConfigChange(e.name,t.target.checked)}),o("span",{class:"checkbox-text"},e.label));case"color":return o("div",{class:"color-input-wrapper"},o("input",{type:"color",class:"color-input",value:s,onInput:t=>this.handleConfigChange(e.name,t.target.value)}),o("span",{class:"color-value"},s));default:return o("p",{class:"field-error"},"Unknown field type: ",e.type)}}static get watchers(){return{api:["handleApiChange"]}}};P.style=E;const F=':host{--grid-builder-primary-color:#007bff;--grid-builder-palette-bg:#f5f5f5;--grid-builder-canvas-bg:#ffffff;--grid-builder-grid-line-color:rgba(0, 0, 0, 0.1);--grid-builder-selection-color:#007bff;--grid-builder-resize-handle-color:#007bff;--grid-builder-font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell",\n    "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;display:block;width:100%;height:100%;font-family:var(--grid-builder-font-family)}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.grid-builder-container{position:relative;display:flex;width:100%;height:100%}.palette-area{width:250px;flex-shrink:0;border-right:1px solid #ddd;background:var(--grid-builder-palette-bg);overflow-y:auto}.canvas-area{position:relative;flex:1;background:var(--grid-builder-canvas-bg);overflow-y:auto}.canvases-container{display:flex;flex-direction:column;min-height:100%;gap:0;}.canvas-wrapper{position:relative;display:flex;flex-direction:column;gap:0}.canvas-wrapper:first-child{padding-top:38px}.config-area{position:fixed;z-index:1000;right:0;bottom:0;display:none;width:350px;max-height:60%;border:1px solid #ddd;border-radius:8px 8px 0 0;background:white;box-shadow:0 -2px 10px rgba(0, 0, 0, 0.1)}.config-area.visible{display:block}';const T=b("grid-builder");const U=class{constructor(t){e(this,t);this.apiRef={key:"gridBuilderAPI"};this.componentRegistry=new Map;this.initializedPlugins=[];this.announcement="";this.setupViewportResizeObserver=()=>{if(!this.hostElement){return}this.viewportResizeObserver=new ResizeObserver((e=>{var t,o;for(const i of e){const e=((o=(t=i.borderBoxSize)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.inlineSize)||i.contentRect.width;const n=e<768?"mobile":"desktop";if(r.currentViewport!==n){T.log(`ðŸ“± Container-based viewport switch: ${r.currentViewport} â†’ ${n} (width: ${Math.round(e)}px)`);r.currentViewport=n}}}));this.viewportResizeObserver.observe(this.hostElement)};this.setupScreenReaderAnnouncements=()=>{z.on("componentAdded",(e=>{const t=this.componentRegistry.get(e.item.type);const o=(t===null||t===void 0?void 0:t.name)||e.item.type;this.announce(`${o} component added to canvas`)}));z.on("componentDeleted",(e=>{this.announce(`Component deleted`)}));z.on("componentMoved",(e=>{this.announce(`Component moved to new canvas`)}));z.on("undoExecuted",(()=>{this.announce(`Undo action performed`);this.restoreFocusToSelection()}));z.on("redoExecuted",(()=>{this.announce(`Redo action performed`);this.restoreFocusToSelection()}));z.on("canvasActivated",(e=>{var t;const o=(t=this.canvasMetadata)===null||t===void 0?void 0:t[e.canvasId];const i=(o===null||o===void 0?void 0:o.title)||e.canvasId;this.announce(`${i} canvas activated`)}))};this.announce=e=>{this.announcement=e;setTimeout((()=>{this.announcement=""}),100)};this.moveFocusAfterDeletion=(e,t)=>{const o=r.canvases[e];if(!o){T.log("âŒ¨ï¸ Focus: Canvas not found, focusing palette");const e=this.hostElement.querySelector("component-palette");if(e){e.focus()}return}const i=o.items;if(i.length===0){T.log("âŒ¨ï¸ Focus: No items left, focusing canvas");const t=this.hostElement.querySelector(`canvas-section[canvas-id="${e}"]`);if(t){t.focus()}else{const e=this.hostElement.querySelector("component-palette");if(e){e.focus()}}return}const n=[...i].sort(((e,t)=>{const o=e.layouts.desktop;const i=t.layouts.desktop;if(o.y!==i.y){return o.y-i.y}return o.x-i.x}));const s=n[0];T.log("âŒ¨ï¸ Focus: Focusing next item",{itemId:s.id,position:{x:s.layouts.desktop.x,y:s.layouts.desktop.y}});const a=this.hostElement.querySelector(`#${s.id}`);if(a){a.focus();r.selectedItemId=s.id;r.selectedCanvasId=s.canvasId}};this.restoreFocusToSelection=()=>{setTimeout((()=>{if(r.selectedItemId){T.log("âŒ¨ï¸ Focus: Restoring focus to selected item",{itemId:r.selectedItemId});const e=this.hostElement.querySelector(`#${r.selectedItemId}`);if(e){e.focus()}}}),10)}}handleGridItemDelete(e){var t;T.log("ðŸ—‘ï¸ @Listen(grid-item:delete) in grid-builder",{detail:e.detail});const{itemId:o}=e.detail;if(o){T.log("  âœ… Deleting item via API (with undo support):",o);(t=this.api)===null||t===void 0?void 0:t.deleteComponent(o)}}async handlePaletteItemClick(e){var t,o,i;T.log("âž• @Listen(palette-item-click) in grid-builder",{detail:e.detail});const n=(o=(t=this.config)===null||t===void 0?void 0:t.enableClickToAdd)!==null&&o!==void 0?o:true;if(!n){T.log("  â­ï¸ Click-to-add disabled via config");return}const{componentType:s}=e.detail;if(!s){console.warn("handlePaletteItemClick: Component type not provided");return}let a=r.activeCanvasId;if(!a){const e=Object.keys(r.canvases);if(e.length===0){console.warn("handlePaletteItemClick: No canvases available");return}a=e[0];c(a);T.log(`  ðŸŽ¯ Auto-selected first canvas: ${a}`)}const l=this.componentRegistry.get(s);if(!l){console.error(`handlePaletteItemClick: Component definition not found for type: ${s}`);return}const d=l.defaultSize||{width:10,height:6};const{findFreeSpace:p}=await import("./p-BkJjjE1H.js");const h=p(a,d.width,d.height);if(!h){console.error(`handlePaletteItemClick: Could not find space on canvas ${a}`);return}T.log("  ðŸ“ Found free space:",h);const f=await import("./p-DIe9_u9n.js");f.highlightCanvas(a);f.showPositionIndicator(a,h.x,h.y,d.width,d.height,this.config);T.log("  âž• Adding component via API");const u=(i=this.api)===null||i===void 0?void 0:i.addComponent(a,s,{x:h.x,y:h.y,width:d.width,height:d.height},{});if(!u){console.error("Failed to add component to canvas");return}setTimeout((()=>{f.animateComponentIn(u)}),100);r.selectedItemId=u;r.selectedCanvasId=a;z.emit("componentAdded",{itemId:u,canvasId:a,componentType:s});T.log("  âœ… Component added successfully")}componentWillLoad(){if(!this.components||this.components.length===0){console.error("GridBuilder: components prop is required");return}this.componentRegistry=new Map(this.components.map((e=>[e.type,e])));if(this.componentRegistry.size!==this.components.length){console.warn("GridBuilder: Duplicate component types detected")}window.interact=a;if(this.initialState){Object.assign(r,this.initialState)}}componentDidLoad(){var e,t,o,i,n;window.virtualRenderer=m;this.api=this.createAPI();T.log("ðŸ”§ grid-builder exposing API",{hasApiRef:!!this.apiRef,apiRefKey:(e=this.apiRef)===null||e===void 0?void 0:e.key,hasTarget:!!((t=this.apiRef)===null||t===void 0?void 0:t.target),targetType:typeof((o=this.apiRef)===null||o===void 0?void 0:o.target),apiCreated:!!this.api});if(this.apiRef&&this.apiRef.key){const e=this.apiRef.target||window;T.log("  ðŸ“¤ Setting API on target",{key:this.apiRef.key,isWindow:e===window,targetKeys:Object.keys(e).slice(0,10)});e[this.apiRef.key]=this.api;T.log("  âœ… API set on target -",{key:this.apiRef.key,apiNowExists:!!e[this.apiRef.key]})}if(this.plugins&&this.plugins.length>0){this.initializedPlugins=this.plugins.filter((e=>{try{e.init(this.api);T.log(`GridBuilder: Initialized plugin "${e.name}"`);return true}catch(t){console.error(`GridBuilder: Failed to initialize plugin "${e.name}":`,t);return false}}))}if(this.theme){this.applyTheme(this.theme)}const s=(n=(i=this.config)===null||i===void 0?void 0:i.eventDebounceDelay)!==null&&n!==void 0?n:300;z.setDebounceDelay(s);T.log(`GridBuilder: Event debounce delay set to ${s}ms`);window.debugInteractables=()=>{const e=a.interactables.list;T.log("Total interactables:",e.length);e.forEach(((e,t)=>{T.log(`Interactable ${t}:`,{target:e.target,actions:e._actions,options:e.options})}))};this.canvasDropHandler=e=>{var t;const o=e;const{canvasId:i,componentType:n,x:s,y:a}=o.detail;T.log("ðŸŽ¯ canvas-drop event received:",{canvasId:i,componentType:n,x:s,y:a});const r=this.componentRegistry.get(n);if(!r){console.warn(`Component definition not found for type: ${n}`);return}const l=D(s,i,this.config);const d=S(a,this.config);T.log("  Converting to grid units (before constraints):",{gridX:l,gridY:d,defaultWidth:r.defaultSize.width,defaultHeight:r.defaultSize.height});const p=v(r,l,d);if(!p){console.warn(`Cannot place component "${r.name}" - minimum size exceeds canvas width`);return}T.log("  After boundary constraints:",p);const h=(t=this.api)===null||t===void 0?void 0:t.addComponent(i,n,{x:p.x,y:p.y,width:p.width,height:p.height});T.log("  Created item:",h);c(i);z.emit("canvasActivated",{canvasId:i})};this.hostElement.addEventListener("canvas-drop",this.canvasDropHandler);this.canvasMoveHandler=e=>{const t=e;const{itemId:o,sourceCanvasId:i,targetCanvasId:n,x:s,y:a}=t.detail;T.log("ðŸ”„ canvas-move event received:",{itemId:o,sourceCanvasId:i,targetCanvasId:n,x:s,y:a});const d=r.canvases[i];if(!d){console.error("Source canvas not found:",i);return}const p=d.items.findIndex((e=>e.id===o));if(p===-1){console.error("Item not found in source canvas:",o);return}const h=d.items[p];const f={x:h.layouts.desktop.x,y:h.layouts.desktop.y};let u=D(s,n,this.config);let b=S(a,this.config);const m=A(u,b,h.layouts.desktop.width,h.layouts.desktop.height,O);u=m.x;b=m.y;const v={x:u,y:b};h.layouts.desktop.x=u;h.layouts.desktop.y=b;l(i,n,o);const y=r.canvases[n];h.zIndex=y.zIndexCounter++;r.canvases=Object.assign({},r.canvases);c(n);if(r.selectedItemId===o){r.selectedCanvasId=n}const w=new g(o,i,n,f,v,p);x.push(w);z.emit("componentMoved",{item:h,sourceCanvasId:i,targetCanvasId:n,position:v});z.emit("canvasActivated",{canvasId:n});T.log("âœ… Cross-canvas move completed:",{itemId:o,from:i,to:n,position:v})};this.hostElement.addEventListener("canvas-move",this.canvasMoveHandler);this.canvasActivatedHandler=e=>{const t=e;const{canvasId:o}=t.detail;T.log("ðŸŽ¨ canvas-activated event received:",{canvasId:o});z.emit("canvasActivated",{canvasId:o})};this.hostElement.addEventListener("canvas-activated",this.canvasActivatedHandler);this.keyboardHandler=e=>{var t,o,i;const n=(e.metaKey||e.ctrlKey)&&e.key==="z"&&!e.shiftKey;const s=(e.metaKey||e.ctrlKey)&&(e.key==="z"&&e.shiftKey||e.key==="y");if(n){T.log("âŒ¨ï¸ Keyboard: Undo triggered");e.preventDefault();(t=this.api)===null||t===void 0?void 0:t.undo();return}if(s){T.log("âŒ¨ï¸ Keyboard: Redo triggered");e.preventDefault();(o=this.api)===null||o===void 0?void 0:o.redo();return}if(e.key==="Delete"||e.key==="Backspace"){if(r.selectedItemId&&r.selectedCanvasId){T.log("âŒ¨ï¸ Keyboard: Delete triggered",{itemId:r.selectedItemId});e.preventDefault();const t=r.selectedItemId;const o=r.selectedCanvasId;(i=this.api)===null||i===void 0?void 0:i.deleteComponent(r.selectedItemId).then((e=>{if(e){this.announce("Component deleted");this.moveFocusAfterDeletion(o,t)}}));return}}if(e.key==="Escape"){if(r.selectedItemId||r.selectedCanvasId){T.log("âŒ¨ï¸ Keyboard: Escape triggered (deselecting)");e.preventDefault();r.selectedItemId=null;r.selectedCanvasId=null;this.announce("Selection cleared");return}}if(!r.selectedItemId||!r.selectedCanvasId){return}const a=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key);if(!a){return}e.preventDefault();const c=r.canvases[r.selectedCanvasId];if(!c){return}const l=c.items.find((e=>e.id===r.selectedItemId));if(!l){return}const d=r.currentViewport;const p=l.layouts[d];const h=1;let f=0;let u=0;switch(e.key){case"ArrowUp":u=-1;break;case"ArrowDown":u=h;break;case"ArrowLeft":f=-1;break;case"ArrowRight":f=h;break}T.log("âŒ¨ï¸ Keyboard: Nudging component",{key:e.key,deltaX:f,deltaY:u,itemId:l.id});const b=p.x;const m=p.y;const v=Math.max(0,p.x+f);const y=Math.max(0,p.y+u);const w=100-p.width;const k=Math.min(v,w);const C=y;if(b===k&&m===C){return}p.x=k;p.y=C;const I=new g(l.id,r.selectedCanvasId,r.selectedCanvasId,{x:b,y:m},{x:k,y:C},c.items.findIndex((e=>e.id===l.id)));x.push(I);r.canvases=Object.assign({},r.canvases);z.emit("componentDragged",{itemId:l.id,canvasId:r.selectedCanvasId,position:{x:k,y:C}})};document.addEventListener("keydown",this.keyboardHandler);this.setupViewportResizeObserver();this.setupScreenReaderAnnouncements()}disconnectedCallback(){if(this.canvasDropHandler){this.hostElement.removeEventListener("canvas-drop",this.canvasDropHandler)}if(this.canvasMoveHandler){this.hostElement.removeEventListener("canvas-move",this.canvasMoveHandler)}if(this.canvasActivatedHandler){this.hostElement.removeEventListener("canvas-activated",this.canvasActivatedHandler)}if(this.keyboardHandler){document.removeEventListener("keydown",this.keyboardHandler)}if(this.viewportResizeObserver){this.viewportResizeObserver.disconnect()}if(this.initializedPlugins.length>0){this.initializedPlugins.forEach((e=>{try{e.destroy();T.log(`GridBuilder: Destroyed plugin "${e.name}"`)}catch(t){console.error(`GridBuilder: Failed to destroy plugin "${e.name}":`,t)}}));this.initializedPlugins=[]}delete window.virtualRenderer;if(this.apiRef&&this.apiRef.key){const e=this.apiRef.target||window;delete e[this.apiRef.key]}}handleComponentsChange(e){this.componentRegistry=new Map(e.map((e=>[e.type,e])))}createAPI(){return{on:(e,t)=>{z.on(e,t)},off:(e,t)=>{z.off(e,t)},getState:()=>r,getItems:e=>{var t;return((t=r.canvases[e])===null||t===void 0?void 0:t.items)||[]},getItem:e=>{for(const t in r.canvases){const o=r.canvases[t];const i=o.items.find((t=>t.id===e));if(i){return i}}return null},addComponent:(e,t,o,i)=>{const n=r.canvases[e];if(!n){console.error(`Canvas not found: ${e}`);return null}const s=this.componentRegistry.get(t);const a=(s===null||s===void 0?void 0:s.name)||t;const c={id:f(),canvasId:e,name:a,type:t,zIndex:++n.zIndexCounter,layouts:{desktop:Object.assign({},o),mobile:{x:0,y:0,width:50,height:o.height,customized:false}},config:i||{}};n.items.push(c);r.canvases=Object.assign({},r.canvases);x.push(new j([c.id]));z.emit("componentAdded",{item:c,canvasId:e});return c.id},deleteComponent:async e=>{let t=null;let o=null;for(const i in r.canvases){const n=r.canvases[i];const s=n.items.find((t=>t.id===e));if(s){t=i;o=s;break}}if(!t||!o){return false}if(this.onBeforeDelete){try{const i=await this.onBeforeDelete({item:o,canvasId:t,itemId:e});if(!i){return false}}catch(e){console.error("Error in onBeforeDelete hook:",e);return false}}const i=r.canvases[t];const n=i.items.findIndex((t=>t.id===e));if(n!==-1){x.push(new I([e]));i.items.splice(n,1);r.canvases=Object.assign({},r.canvases);if(r.selectedItemId===e){r.selectedItemId=null;r.selectedCanvasId=null}z.emit("componentDeleted",{itemId:e,canvasId:t});return true}return false},updateConfig:(e,t)=>{for(const o in r.canvases){const i=r.canvases[o];const n=i.items.findIndex((t=>t.id===e));if(n!==-1){const s=i.items[n];const a=Object.assign(Object.assign({},s.config),t);const c=[{itemId:e,canvasId:o,updates:{config:a}}];x.push(new C(c));i.items[n]=Object.assign(Object.assign({},i.items[n]),{config:a});r.canvases=Object.assign({},r.canvases);z.emit("configChanged",{itemId:e,canvasId:o,config:t});return true}}return false},addComponentsBatch:e=>{const t=e.map((({canvasId:e,type:t,position:o,config:i})=>{const n=this.componentRegistry.get(t);const s=(n===null||n===void 0?void 0:n.name)||t;return{canvasId:e,type:t,name:s,layouts:{desktop:Object.assign({},o),mobile:{x:0,y:0,width:50,height:o.height,customized:false}},config:i||{}}}));const o=h(t);x.push(new j(o));const i=o.map((e=>{var t;const o=(t=this.api)===null||t===void 0?void 0:t.getItem(e);return o?{item:o,canvasId:o.canvasId}:null})).filter(Boolean);z.emit("componentsBatchAdded",{items:i});return o},deleteComponentsBatch:e=>{const t=e.map((e=>{var t;const o=(t=this.api)===null||t===void 0?void 0:t.getItem(e);return o?{itemId:e,canvasId:o.canvasId}:null})).filter(Boolean);x.push(new I(e));p(e);if(r.selectedItemId&&e.includes(r.selectedItemId)){r.selectedItemId=null;r.selectedCanvasId=null}z.emit("componentsBatchDeleted",{items:t})},updateConfigsBatch:e=>{const t=e.map((({itemId:e,config:t})=>{var o;const i=(o=this.api)===null||o===void 0?void 0:o.getItem(e);if(!i){console.warn(`Item ${e} not found for config update`);return null}return{itemId:e,canvasId:i.canvasId,updates:{config:Object.assign(Object.assign({},i.config),t)}}})).filter(Boolean);x.push(new C(t));d(t);const o=t.map((({itemId:e,canvasId:t,updates:o})=>({itemId:e,canvasId:t,config:o.config})));z.emit("configsBatchChanged",{items:o})},getCanvasElement:e=>document.getElementById(e),undo:()=>{x.undo();z.emit("undoExecuted",{})},redo:()=>{x.redo();z.emit("redoExecuted",{})},canUndo:()=>x.canUndo(),canRedo:()=>x.canRedo(),undoRedoState:y,addCanvas:e=>{const t=new k(e);x.push(t);t.redo()},removeCanvas:e=>{const t=new w(e);x.push(t);t.redo()},setActiveCanvas:e=>{c(e);z.emit("canvasActivated",{canvasId:e})},getActiveCanvas:()=>r.activeCanvasId}}applyTheme(e){const t=this.el;if(!t)return;if(e.primaryColor){t.style.setProperty("--grid-builder-primary-color",e.primaryColor)}if(e.paletteBackground){t.style.setProperty("--grid-builder-palette-bg",e.paletteBackground)}if(e.canvasBackground){t.style.setProperty("--grid-builder-canvas-bg",e.canvasBackground)}if(e.gridLineColor){t.style.setProperty("--grid-builder-grid-line-color",e.gridLineColor)}if(e.selectionColor){t.style.setProperty("--grid-builder-selection-color",e.selectionColor)}if(e.resizeHandleColor){t.style.setProperty("--grid-builder-resize-handle-color",e.resizeHandleColor)}if(e.fontFamily){t.style.setProperty("--grid-builder-font-family",e.fontFamily)}if(e.customProperties){Object.entries(e.customProperties).forEach((([e,o])=>{t.style.setProperty(e,o)}))}}async exportState(){const e={version:"1.0.0",canvases:{},viewport:r.currentViewport,metadata:{createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}};for(const t in r.canvases){const o=r.canvases[t];e.canvases[t]={items:o.items.map((e=>({id:e.id,canvasId:e.canvasId,type:e.type,name:e.name,layouts:{desktop:Object.assign({},e.layouts.desktop),mobile:Object.assign({},e.layouts.mobile)},zIndex:e.zIndex,config:Object.assign({},e.config)})))}}return e}async importState(e){Object.assign(r,e)}async getState(){return r}async addCanvas(e){var t;(t=this.api)===null||t===void 0?void 0:t.addCanvas(e)}async removeCanvas(e){var t;(t=this.api)===null||t===void 0?void 0:t.removeCanvas(e)}async setActiveCanvas(e){var t;(t=this.api)===null||t===void 0?void 0:t.setActiveCanvas(e)}async getActiveCanvas(){var e;return((e=this.api)===null||e===void 0?void 0:e.getActiveCanvas())||null}async undo(){var e;(e=this.api)===null||e===void 0?void 0:e.undo()}async redo(){var e;(e=this.api)===null||e===void 0?void 0:e.redo()}async canUndo(){var e;return((e=this.api)===null||e===void 0?void 0:e.canUndo())||false}async canRedo(){var e;return((e=this.api)===null||e===void 0?void 0:e.canRedo())||false}async addComponent(e,t,o,i){var n;return((n=this.api)===null||n===void 0?void 0:n.addComponent(e,t,o,i))||null}async deleteComponent(e){var t;return((t=this.api)===null||t===void 0?void 0:t.deleteComponent(e))||false}async updateConfig(e,t){var o;return((o=this.api)===null||o===void 0?void 0:o.updateConfig(e,t))||false}render(){const e=Object.keys(r.canvases);return o(i,{key:"af56a3db200afa637b26b08fe2c6bd648f56bfd9",ref:e=>this.el=e},o("div",{key:"97ce21911eb8964777546ffde4b6d7549353f45b",class:"sr-only",role:"status","aria-live":"polite","aria-atomic":"true"},this.announcement),o("div",{key:"1b8b9b72d81e333580f6ad4ffd602f11e4245914",class:"grid-builder-container",role:"application","aria-label":"Grid builder"},o("div",{key:"2256ab52268d901947dd6f8053421fce6b501ebf",class:"palette-area"},o("component-palette",{key:"707f657758981d354b5fea8afe7ef7b1b13fc1fb",components:this.components,config:this.config})),o("div",{key:"204a6faa7e8b929f6351ab641724bd1a22a5ce94",class:"canvas-area"},o("div",{key:"212adb8599c0ad579eeb924fa212ee63049986a4",class:"canvases-container"},e.map((e=>{var t,i,n;const s=r.activeCanvasId===e;const a=((t=this.canvasMetadata)===null||t===void 0?void 0:t[e])||{};const c=(n=(i=this.uiOverrides)===null||i===void 0?void 0:i.CanvasHeader)===null||n===void 0?void 0:n.call(i,{canvasId:e,metadata:a,isActive:s});const l=c instanceof HTMLElement?o("div",{ref:e=>{if(e){e.innerHTML="";e.appendChild(c)}}}):c;return o("div",{key:e,class:"canvas-wrapper"},l,o("canvas-section",{canvasId:e,isActive:s,config:this.config,componentRegistry:this.componentRegistry,backgroundColor:a.backgroundColor,canvasTitle:a.title,onBeforeDelete:this.onBeforeDelete}))}))))))}get hostElement(){return n(this)}static get watchers(){return{components:["handleComponentsChange"]}}};U.style=F;const N='@charset "UTF-8";:host{--grid-viewer-primary-color:#007bff;--grid-viewer-canvas-bg:#ffffff;--grid-viewer-font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen",\n    "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;display:block;width:100%;height:100%;font-family:var(--grid-viewer-font-family)}.grid-viewer-container{width:100%;height:100%;background:var(--grid-viewer-canvas-bg);overflow:auto}.canvas-area{width:100%;height:100%;overflow-y:auto;overflow-x:hidden}.canvases-container{display:flex;flex-direction:column;gap:0;width:100%;min-height:100%}';const Y=b("grid-viewer");const L=class{constructor(t){e(this,t);this.componentRegistry=new Map;this.setupViewportResizeObserver=()=>{if(!this.hostElement){return}this.viewportResizeObserver=new ResizeObserver((e=>{var t,o;for(const i of e){const e=this.hostElement.offsetWidth||((o=(t=i.borderBoxSize)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.inlineSize)||i.contentRect.width;if(e<100){Y.log(`ðŸ“± [Viewer] Skipping viewport switch - container not yet laid out (width: ${Math.round(e)}px)`);return}const n=e<768?"mobile":"desktop";if(this.viewerState.state.currentViewport!==n){Y.log(`ðŸ“± [Viewer] Container-based viewport switch: ${this.viewerState.state.currentViewport} â†’ ${n} (width: ${Math.round(e)}px)`);this.viewerState.state.currentViewport=n}}}));this.viewportResizeObserver.observe(this.hostElement)}}componentWillLoad(){if(!this.components||this.components.length===0){console.error("GridViewer: components prop is required");return}this.componentRegistry=new Map(this.components.map((e=>[e.type,e])));if(this.componentRegistry.size!==this.components.length){console.warn("GridViewer: Duplicate component types detected")}const e={canvases:{},currentViewport:"desktop"};if(this.initialState){if("viewport"in this.initialState){e.currentViewport=this.initialState.viewport;e.canvases=this.initialState.canvases}else{Object.assign(e,this.initialState)}}this.viewerState=u(e)}componentDidLoad(){if(this.theme){this.applyTheme(this.theme)}this.setupViewportResizeObserver()}disconnectedCallback(){if(this.viewportResizeObserver){this.viewportResizeObserver.disconnect()}}handleComponentsChange(e){this.componentRegistry=new Map(e.map((e=>[e.type,e])))}handleInitialStateChange(e){if(e){if("viewport"in e){this.viewerState.state.currentViewport=e.viewport;this.viewerState.state.canvases=e.canvases}else{Object.assign(this.viewerState.state,e)}}}applyTheme(e){const t=this.el;if(!t)return;if(e.primaryColor){t.style.setProperty("--grid-viewer-primary-color",e.primaryColor)}if(e.canvasBackground){t.style.setProperty("--grid-viewer-canvas-bg",e.canvasBackground)}if(e.fontFamily){t.style.setProperty("--grid-viewer-font-family",e.fontFamily)}if(e.customProperties){Object.entries(e.customProperties).forEach((([e,o])=>{t.style.setProperty(e,o)}))}}render(){const e=Object.keys(this.viewerState.state.canvases);return o(i,{key:"956a2b8eedfa7046520f905044b704dacb1afd23",ref:e=>this.el=e},o("div",{key:"2491422f65533ccea8ade2d2eb2748a8155f0173",class:"grid-viewer-container"},o("div",{key:"c53af7f959bfe40f4cc9cb25ebf0223693648593",class:"canvas-area"},o("div",{key:"f8d3258a3ec0676f14fde3f26719046cb76cf0e5",class:"canvases-container"},e.map((e=>{var t,i;return o("canvas-section-viewer",{key:e,canvasId:e,config:this.config,componentRegistry:this.componentRegistry,items:this.viewerState.state.canvases[e].items,currentViewport:this.viewerState.state.currentViewport,backgroundColor:(i=(t=this.canvasMetadata)===null||t===void 0?void 0:t[e])===null||i===void 0?void 0:i.backgroundColor})}))))))}get hostElement(){return n(this)}static get watchers(){return{components:["handleComponentsChange"],initialState:["handleInitialStateChange"]}}};L.style=N;const G='section-editor-panel .section-editor-overlay{position:fixed;z-index:10000;top:0;right:0;bottom:0;left:0;display:flex;align-items:center;justify-content:center;animation:fadeIn 0.2s ease-out;background:rgba(0, 0, 0, 0.5)}section-editor-panel .section-editor-panel{width:90%;max-width:440px;border-radius:12px;animation:slideUp 0.2s ease-out;background:white;box-shadow:0 8px 32px rgba(0, 0, 0, 0.12)}section-editor-panel .panel-header{display:flex;align-items:center;justify-content:space-between;padding:28px 32px 24px;border-bottom:1px solid #e9ecef}section-editor-panel .panel-header .panel-title{margin:0;color:#212529;font-size:20px;font-weight:600;letter-spacing:-0.02em}section-editor-panel .panel-header .close-btn{display:flex;width:32px;height:32px;align-items:center;justify-content:center;padding:0;border:none;border-radius:6px;background:transparent;color:#6c757d;cursor:pointer;font-size:24px;font-weight:300;line-height:1;transition:all 0.15s}section-editor-panel .panel-header .close-btn:hover{background:#f8f9fa;color:#212529}section-editor-panel .panel-header .close-btn:active{transform:scale(0.95)}section-editor-panel .panel-body{padding:32px}section-editor-panel .panel-body .form-group{margin-bottom:28px}section-editor-panel .panel-body .form-group:last-child{margin-bottom:0}section-editor-panel .panel-body .form-group label{display:block;margin-bottom:10px;color:#495057;font-size:13px;font-weight:600;letter-spacing:0.01em;text-transform:uppercase}section-editor-panel .panel-body .form-group .section-title-input{width:100%;box-sizing:border-box;padding:12px 16px;border:1.5px solid #e1e4e8;border-radius:8px;background:#f8f9fa;color:#212529;font-size:15px;transition:all 0.2s}section-editor-panel .panel-body .form-group .section-title-input:hover{background:white;border-color:#cbd3da}section-editor-panel .panel-body .form-group .section-title-input:focus{border-color:#4a90e2;background:white;box-shadow:0 0 0 3px rgba(74, 144, 226, 0.08);outline:none}section-editor-panel .panel-body .form-group .section-title-input::placeholder{color:#adb5bd}section-editor-panel .panel-body .form-group .color-picker-wrapper{display:flex;align-items:stretch;gap:14px}section-editor-panel .panel-body .form-group .color-picker-wrapper .section-color-input{width:64px;height:48px;padding:6px;border:1.5px solid #e1e4e8;border-radius:8px;cursor:pointer;transition:all 0.2s}section-editor-panel .panel-body .form-group .color-picker-wrapper .section-color-input:hover{border-color:#4a90e2;box-shadow:0 2px 8px rgba(74, 144, 226, 0.15)}section-editor-panel .panel-body .form-group .color-picker-wrapper .section-color-input:focus{border-color:#4a90e2;box-shadow:0 0 0 3px rgba(74, 144, 226, 0.08);outline:none}section-editor-panel .panel-body .form-group .color-picker-wrapper .color-hex-input{flex:1;padding:12px 16px;border:1.5px solid #e1e4e8;border-radius:8px;background:#f8f9fa;color:#495057;font-family:"SF Mono", "Monaco", "Courier New", monospace;font-size:14px;transition:all 0.2s}section-editor-panel .panel-body .form-group .color-picker-wrapper .color-hex-input:hover{background:white;border-color:#cbd3da}section-editor-panel .panel-body .form-group .color-picker-wrapper .color-hex-input:focus{border-color:#4a90e2;background:white;box-shadow:0 0 0 3px rgba(74, 144, 226, 0.08);outline:none}section-editor-panel .panel-body .form-group .color-picker-wrapper .color-hex-input::placeholder{color:#adb5bd}section-editor-panel .panel-footer{display:flex;align-items:center;justify-content:space-between;padding:24px 32px 28px;border-top:1px solid #e9ecef}section-editor-panel .panel-footer .footer-actions{display:flex;gap:12px}section-editor-panel .panel-footer button{padding:12px 24px;border:none;border-radius:8px;cursor:pointer;font-size:14px;font-weight:600;transition:all 0.2s}section-editor-panel .panel-footer button:active{transform:translateY(1px)}section-editor-panel .panel-footer .delete-btn{padding:12px 16px;margin-right:16px;border:1.5px solid #dc3545;background:transparent;color:#dc3545;font-weight:500}section-editor-panel .panel-footer .delete-btn:hover{background:#fff5f5;border-color:#c82333;color:#c82333}section-editor-panel .panel-footer .delete-btn:active{background:#ffe5e5}section-editor-panel .panel-footer .cancel-btn{border:1.5px solid #e1e4e8;background:white;color:#495057}section-editor-panel .panel-footer .cancel-btn:hover{border-color:#cbd3da;background:#f8f9fa}section-editor-panel .panel-footer .cancel-btn:active{background:#e9ecef}section-editor-panel .panel-footer .save-btn{background:#4a90e2;color:white;box-shadow:0 2px 8px rgba(74, 144, 226, 0.2)}section-editor-panel .panel-footer .save-btn:hover{background:#357abd;box-shadow:0 4px 12px rgba(74, 144, 226, 0.25);transform:translateY(-1px)}section-editor-panel .panel-footer .save-btn:active{background:#2a5f8f;box-shadow:0 1px 4px rgba(74, 144, 226, 0.2);transform:translateY(0)}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}';const _=class{constructor(o){e(this,o);this.closePanel=t(this,"closePanel");this.updateSection=t(this,"updateSection");this.previewColorChange=t(this,"previewColorChange");this.previewTitleChange=t(this,"previewTitleChange");this.deleteSection=t(this,"deleteSection");this.isOpen=false;this.sectionData=null;this.editedTitle="";this.editedColor="";this.originalColor="";this.originalTitle="";this.handleClose=()=>{if(this.sectionData){this.previewColorChange.emit({canvasId:this.sectionData.canvasId,backgroundColor:this.originalColor});this.previewTitleChange.emit({canvasId:this.sectionData.canvasId,title:this.originalTitle})}this.closePanel.emit()};this.handleSave=()=>{if(this.sectionData){this.updateSection.emit({canvasId:this.sectionData.canvasId,title:this.editedTitle,backgroundColor:this.editedColor});this.closePanel.emit()}};this.handleDelete=()=>{if(this.sectionData){this.deleteSection.emit({canvasId:this.sectionData.canvasId});this.closePanel.emit()}};this.handleTitleInput=e=>{this.editedTitle=e.target.value;if(this.sectionData){this.previewTitleChange.emit({canvasId:this.sectionData.canvasId,title:this.editedTitle})}};this.handleColorInput=e=>{this.editedColor=e.target.value;if(this.sectionData){this.previewColorChange.emit({canvasId:this.sectionData.canvasId,backgroundColor:this.editedColor})}}}handleSectionDataChange(e){if(e){this.editedTitle=e.title;this.editedColor=e.backgroundColor;this.originalColor=e.backgroundColor;this.originalTitle=e.title}}componentWillLoad(){if(this.sectionData){this.editedTitle=this.sectionData.title;this.editedColor=this.sectionData.backgroundColor;this.originalColor=this.sectionData.backgroundColor;this.originalTitle=this.sectionData.title}}render(){if(!this.isOpen||!this.sectionData){return null}return o("div",{class:"section-editor-overlay",onClick:this.handleClose},o("div",{class:"section-editor-panel",onClick:e=>e.stopPropagation()},o("div",{class:"panel-header"},o("h2",{class:"panel-title"},"Edit Section"),o("button",{class:"close-btn",onClick:this.handleClose,title:"Close"},"Ã—")),o("div",{class:"panel-body"},o("div",{class:"form-group"},o("label",{htmlFor:"section-title"},"Section Name"),o("input",{type:"text",id:"section-title",class:"section-title-input",value:this.editedTitle,onInput:this.handleTitleInput,placeholder:"Enter section name"})),o("div",{class:"form-group"},o("label",{htmlFor:"section-color"},"Background Color"),o("div",{class:"color-picker-wrapper"},o("input",{type:"color",id:"section-color",class:"section-color-input",value:this.editedColor,onInput:this.handleColorInput}),o("input",{type:"text",class:"color-hex-input",value:this.editedColor,onInput:this.handleColorInput,placeholder:"#ffffff"})))),o("div",{class:"panel-footer"},o("button",{class:"delete-btn",onClick:this.handleDelete},"Delete Section"),o("div",{class:"footer-actions"},o("button",{class:"cancel-btn",onClick:this.handleClose},"Cancel"),o("button",{class:"save-btn",onClick:this.handleSave},"Save Changes")))))}static get watchers(){return{sectionData:["handleSectionDataChange"]}}};_.style=G;export{B as canvas_header,R as confirmation_modal,P as custom_config_panel,U as grid_builder,L as grid_viewer,_ as section_editor_panel};
//# sourceMappingURL=p-1aa12667.entry.js.map