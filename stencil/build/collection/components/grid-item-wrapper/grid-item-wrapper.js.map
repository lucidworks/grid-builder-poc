{"version":3,"file":"grid-item-wrapper.js","sourceRoot":"","sources":["../../../src/components/grid-item-wrapper/grid-item-wrapper.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Grid Item Wrapper Component (Library Version)\n * ===============================================\n *\n * Individual grid item container with dynamic component rendering from registry.\n * This is the library version that uses ComponentDefinition.render() for flexibility.\n *\n * ## Key Differences from POC\n *\n * **Dynamic component rendering**:\n * - POC: Hardcoded switch statement with 8 component types\n * - Library: Uses ComponentDefinition.render() from component registry\n * - Consumer defines all component types\n * - Library just calls the render function\n *\n * **Removed POC-specific**:\n * - componentTemplates import (hardcoded component data)\n * - Fixed component type switch statement\n * - Hardcoded icon/title from templates\n *\n * **Added library features**:\n * - Component registry lookup\n * - Fallback for unknown component types\n * - Pass GridConfig to grid calculations\n *\n * @module grid-item-wrapper\n */\n\nimport { Component, h, Listen, Prop, State, Watch } from '@stencil/core';\n\n// Internal imports\nimport { GridItem, gridState, updateItem, setActiveCanvas } from '../../services/state-manager';\nimport { pushCommand } from '../../services/undo-redo';\nimport { MoveItemCommand } from '../../services/undo-redo-commands';\nimport { virtualRenderer } from '../../services/virtual-renderer';\nimport { eventManager } from '../../services/event-manager';\nimport { DragHandler } from '../../utils/drag-handler';\nimport { ResizeHandler } from '../../utils/resize-handler';\nimport { gridToPixelsX, gridToPixelsY } from '../../utils/grid-calculations';\nimport { GridConfig } from '../../types/grid-config';\nimport { ComponentDefinition } from '../../types/component-definition';\nimport { createDebugLogger } from '../../utils/debug';\n\nconst debug = createDebugLogger('grid-item-wrapper');\n\n/**\n * GridItemWrapper Component\n * ==========================\n *\n * Library component wrapping individual grid items with drag/resize/selection.\n *\n * **Tag**: `<grid-item-wrapper>`\n * **Shadow DOM**: Disabled (required for interact.js compatibility)\n * **Dynamic rendering**: Uses ComponentDefinition.render() from registry\n */\n@Component({\n  tag: 'grid-item-wrapper',\n  styleUrl: 'grid-item-wrapper.scss',\n  shadow: false,\n})\nexport class GridItemWrapper {\n  /**\n   * Grid item data (position, size, type, etc.)\n   *\n   * **Source**: Parent canvas-section component\n   * **Contains**: id, canvasId, type, name, layouts (desktop/mobile), zIndex, config\n   */\n  @Prop() item!: GridItem;\n\n  /**\n   * Render version (force re-render trigger)\n   *\n   * **Source**: Parent canvas-section (incremented on resize)\n   * **Purpose**: Force grid calculation refresh when container resizes\n   */\n  @Prop() renderVersion?: number;\n\n  /**\n   * Grid configuration options\n   *\n   * **Optional**: Customizes grid system behavior\n   * **Passed from**: grid-builder ‚Üí canvas-section ‚Üí grid-item-wrapper\n   * **Used for**: Grid size calculations with constraints\n   */\n  @Prop() config?: GridConfig;\n\n  /**\n   * Component registry (from parent grid-builder)\n   *\n   * **Source**: grid-builder component (built from components prop)\n   * **Structure**: Map<type, ComponentDefinition>\n   * **Purpose**: Look up component definitions for dynamic rendering\n   *\n   * **Note**: This is passed as a workaround since StencilJS doesn't have\n   * good support for context/provide-inject patterns. In a production app,\n   * consider using a global registry or context provider.\n   */\n  @Prop() componentRegistry?: Map<string, ComponentDefinition>;\n\n  /**\n   * Deletion hook (from parent grid-builder)\n   *\n   * **Source**: grid-builder component (from onBeforeDelete prop)\n   * **Purpose**: Allow host app to intercept deletion requests\n   *\n   * **Hook behavior**:\n   * - Called before deleting a component\n   * - Receives context with item data\n   * - Returns true/false or Promise<boolean>\n   * - If false, deletion is cancelled\n   * - If true, deletion proceeds\n   *\n   * **Default**: If not provided, components delete immediately\n   */\n  @Prop() onBeforeDelete?: (context: any) => boolean | Promise<boolean>;\n\n  /**\n   * Viewer mode flag\n   *\n   * **Purpose**: Disable editing features for rendering-only mode\n   * **Default**: false (editing enabled)\n   *\n   * **When true**:\n   * - ‚ùå No drag-and-drop handlers\n   * - ‚ùå No resize handles\n   * - ‚ùå No item header (drag handle)\n   * - ‚ùå No delete button\n   * - ‚ùå No selection state\n   * - ‚úÖ Only renders component content\n   *\n   * **Use case**: grid-viewer component for display-only mode\n   */\n  @Prop() viewerMode?: boolean = false;\n\n  /**\n   * Current viewport (for viewer mode)\n   *\n   * **Purpose**: Determine which layout to render (desktop or mobile)\n   * **Source**: grid-viewer ‚Üí canvas-section-viewer ‚Üí grid-item-wrapper\n   * **Used by**: render() to select appropriate layout\n   *\n   * **Note**: When in builder mode (viewerMode=false), this is ignored\n   * and gridState.currentViewport is used instead. When in viewer mode\n   * (viewerMode=true), this prop is required.\n   */\n  @Prop() currentViewport?: 'desktop' | 'mobile';\n\n  /**\n   * All items in the canvas (for viewer mode auto-layout)\n   *\n   * **Purpose**: Calculate mobile auto-layout positions\n   * **Source**: grid-viewer ‚Üí canvas-section-viewer ‚Üí grid-item-wrapper\n   * **Used by**: render() to calculate stacked positions in mobile viewport\n   *\n   * **Note**: When in builder mode (viewerMode=false), this is ignored\n   * and gridState.canvases is used instead. When in viewer mode\n   * (viewerMode=true), this prop is required for mobile auto-layout.\n   */\n  @Prop() canvasItems?: GridItem[];\n\n  /**\n   * Selection state (reactive)\n   *\n   * **Managed by**: updateComponentState()\n   * **Updated on**: componentWillLoad, componentWillUpdate\n   * **Triggers**: Visual selection styles (.selected class)\n   */\n  @State() isSelected: boolean = false;\n\n  /**\n   * Visibility state (virtual rendering)\n   *\n   * **Managed by**: IntersectionObserver callback\n   * **Initial value**: false (don't render content yet)\n   * **Triggered by**: Observer callback or manual check for initially-visible items\n   * **Controls**: Whether component content renders or placeholder shows\n   *\n   * **Note**: Virtual renderer checks if element is initially in viewport\n   * and triggers callback immediately to prevent \"Loading...\" on visible items.\n   * Off-screen items stay false until scrolled into view (virtual rendering).\n   */\n  @State() isVisible: boolean = false;\n\n  /**\n   * Item DOM element reference\n   */\n  private itemRef: HTMLElement;\n\n  /**\n   * Drag handler instance\n   */\n  private dragHandler: DragHandler;\n\n  /**\n   * Resize handler instance\n   */\n  private resizeHandler: ResizeHandler;\n\n  /**\n   * Item snapshot (for undo/redo)\n   */\n  private itemSnapshot: GridItem | null = null;\n\n  /**\n   * Track whether item was dragged (to prevent click event on drag end)\n   */\n  private wasDragged: boolean = false;\n\n  /**\n   * Component will load lifecycle hook\n   */\n  componentWillLoad() {\n    this.updateComponentState();\n  }\n\n  /**\n   * Component will update lifecycle hook\n   */\n  componentWillUpdate() {\n    this.updateComponentState();\n  }\n\n  /**\n   * Update component state (selection and snapshot)\n   */\n  private updateComponentState() {\n    // Update selection state\n    this.isSelected = gridState.selectedItemId === this.item.id;\n\n    // Capture item snapshot for undo/redo\n    this.captureItemSnapshot();\n  }\n\n  /**\n   * Component did load lifecycle hook\n   */\n  componentDidLoad() {\n    // Set up virtual rendering observer (both builder and viewer modes)\n    // Virtual rendering improves performance for long pages with many components\n    virtualRenderer.observe(this.itemRef, this.item.id, (isVisible) => {\n      this.isVisible = isVisible;\n    });\n\n    // Inject component content into custom wrapper's content slot if needed\n    this.injectComponentContent();\n\n    // Skip drag/resize handlers in viewer mode\n    if (!this.viewerMode) {\n      // Get component definition for min/max size constraints\n      const componentDefinition = this.componentRegistry?.get(this.item.type);\n\n      // Get the header element for drag handler\n      const headerElement = this.itemRef.querySelector('.grid-item-header') as HTMLElement;\n\n      // Initialize drag and resize handlers\n      // Pass header element for drag (instead of whole item)\n      this.dragHandler = new DragHandler(\n        this.itemRef,\n        this.item,\n        this.handleItemUpdate,\n        this.config,\n        headerElement,\n        () => {\n          this.wasDragged = true;\n        }\n      );\n      this.resizeHandler = new ResizeHandler(this.itemRef, this.item, this.handleItemUpdate, componentDefinition, this.config);\n    }\n  }\n\n  /**\n   * Component did update lifecycle hook\n   */\n  componentDidUpdate() {\n    // Re-inject component content if custom wrapper re-rendered\n    this.injectComponentContent();\n  }\n\n  /**\n   * Inject component content into custom wrapper's content slot\n   *\n   * **Purpose**: For custom wrappers, find the content slot div and inject component\n   * **Called from**: componentDidLoad, componentDidUpdate\n   * **Why needed**: Custom wrapper JSX renders, then we inject content into its slot\n   */\n  private injectComponentContent() {\n    // Only for custom wrappers\n    const definition = this.componentRegistry?.get(this.item.type);\n    if (!definition?.renderItemWrapper || !this.itemRef) return;\n\n    // Find the content slot\n    const contentSlotId = `${this.item.id}-content`;\n    const contentSlot = this.itemRef.querySelector(`#${contentSlotId}`);\n    if (!contentSlot) return;\n\n    // Check if already injected\n    if (contentSlot.hasAttribute('data-content-injected')) return;\n\n    // Render and inject component content\n    const componentContent = this.renderComponent();\n\n    // Clear any existing content\n    contentSlot.innerHTML = '';\n\n    if (componentContent instanceof HTMLElement) {\n      contentSlot.appendChild(componentContent);\n    } else {\n      // For Stencil vNodes, we need to use a workaround\n      // Create a temporary container and let Stencil render into it\n      const tempContainer = document.createElement('div');\n      contentSlot.appendChild(tempContainer);\n\n      // This is a limitation - vNodes can't be manually appended\n      // The custom wrapper should handle rendering the component directly\n      // For now, we'll just set a placeholder\n      tempContainer.textContent = '[Component Content]';\n    }\n\n    // Mark as injected\n    contentSlot.setAttribute('data-content-injected', 'true');\n  }\n\n  /**\n   * Disconnected callback (cleanup)\n   */\n  disconnectedCallback() {\n    // Cleanup handlers\n    if (this.dragHandler) {\n      this.dragHandler.destroy();\n    }\n    if (this.resizeHandler) {\n      this.resizeHandler.destroy();\n    }\n\n    // Cleanup virtual renderer\n    if (this.itemRef) {\n      virtualRenderer.unobserve(this.itemRef, this.item.id);\n    }\n  }\n\n  /**\n   * Watch for item prop changes\n   *\n   * **When triggered**: Parent passes updated item data\n   * **Actions**:\n   * - Update component state (selection, snapshot)\n   * - Reinitialize drag/resize handlers with new item data\n   * - Preserve handlers if already initialized\n   */\n  @Watch('item')\n  handleItemChange(newItem: GridItem, oldItem: GridItem) {\n    // Skip if item reference hasn't actually changed\n    if (newItem === oldItem) return;\n\n    debug.log('üì¶ Item prop changed:', {\n      itemId: newItem.id,\n      oldId: oldItem?.id,\n    });\n\n    // Update component state\n    this.updateComponentState();\n\n    // Update drag/resize handlers with new item data\n    if (!this.viewerMode && this.dragHandler && this.resizeHandler) {\n      // Handlers are already initialized, they'll use the updated this.item reference\n      // No need to destroy and recreate - they reference this.item internally\n      debug.log('  ‚úÖ Handlers updated with new item reference');\n    }\n  }\n\n  /**\n   * Watch for renderVersion prop changes\n   *\n   * **When triggered**: Parent increments renderVersion (e.g., on container resize)\n   * **Purpose**: Force component re-render to recalculate grid positions\n   * **Note**: This is a force-update mechanism, actual recalculation happens in render()\n   */\n  @Watch('renderVersion')\n  handleRenderVersionChange(newVersion: number, oldVersion: number) {\n    // Skip if version hasn't changed (undefined ‚Üí undefined)\n    if (newVersion === oldVersion) return;\n\n    debug.log('üîÑ RenderVersion changed:', {\n      oldVersion,\n      newVersion,\n      itemId: this.item.id,\n    });\n\n    // No action needed - the prop change itself triggers re-render\n    // Grid calculations will be re-executed in render()\n  }\n\n  /**\n   * Watch for config prop changes\n   *\n   * **When triggered**: Parent passes updated GridConfig\n   * **Actions**: Reinitialize drag/resize handlers with new config\n   * **Note**: Config changes are rare (e.g., user changes grid settings)\n   */\n  @Watch('config')\n  handleConfigChange(newConfig: GridConfig, oldConfig: GridConfig) {\n    // Skip if config reference hasn't changed\n    if (newConfig === oldConfig) return;\n\n    debug.log('‚öôÔ∏è Config prop changed:', {\n      itemId: this.item.id,\n      oldConfig,\n      newConfig,\n    });\n\n    // Reinitialize handlers with new config\n    if (!this.viewerMode && this.itemRef) {\n      // Cleanup old handlers\n      if (this.dragHandler) {\n        this.dragHandler.destroy();\n      }\n      if (this.resizeHandler) {\n        this.resizeHandler.destroy();\n      }\n\n      // Recreate handlers with new config\n      const componentDefinition = this.componentRegistry?.get(this.item.type);\n      const headerElement = this.itemRef.querySelector('.grid-item-header') as HTMLElement;\n\n      this.dragHandler = new DragHandler(\n        this.itemRef,\n        this.item,\n        this.handleItemUpdate,\n        newConfig,\n        headerElement,\n        () => {\n          this.wasDragged = true;\n        }\n      );\n      this.resizeHandler = new ResizeHandler(this.itemRef, this.item, this.handleItemUpdate, componentDefinition, newConfig);\n\n      debug.log('  ‚úÖ Handlers reinitialized with new config');\n    }\n  }\n\n  /**\n   * Watch for currentViewport prop changes (viewer mode only)\n   *\n   * **When triggered**: Viewport switches between desktop/mobile in viewer mode\n   * **Purpose**: Force re-render to use appropriate layout\n   * **Note**: Only relevant in viewerMode=true\n   */\n  @Watch('currentViewport')\n  handleViewportChange(newViewport: 'desktop' | 'mobile', oldViewport: 'desktop' | 'mobile') {\n    // Skip if viewport hasn't changed\n    if (newViewport === oldViewport) return;\n\n    // Only relevant in viewer mode\n    if (!this.viewerMode) return;\n\n    debug.log('üì± Viewport prop changed (viewer mode):', {\n      oldViewport,\n      newViewport,\n      itemId: this.item.id,\n    });\n\n    // No action needed - the prop change itself triggers re-render\n    // render() will use the new viewport to select layout\n  }\n\n  /**\n   * Listen for item-delete events from custom wrapper components\n   * This is the PUBLIC API for custom wrappers to request item deletion\n   * We intercept these and re-dispatch as internal 'grid-item:delete' events\n   */\n  @Listen('item-delete')\n  handleItemDeleteEvent(event: CustomEvent) {\n    debug.log('üî¥ @Listen(item-delete) - from custom wrapper', {\n      eventTarget: event.target,\n      itemId: this.item.id,\n    });\n\n    // Stop the public event from bubbling\n    event.stopPropagation();\n\n    // Re-dispatch as internal event that grid-builder listens for\n    const deleteEvent = new CustomEvent('grid-item:delete', {\n      detail: { itemId: this.item.id, canvasId: this.item.canvasId },\n      bubbles: true,\n      composed: true,\n    });\n    debug.log('  üì§ Re-dispatching as grid-item:delete');\n    this.itemRef.dispatchEvent(deleteEvent);\n  }\n\n  /**\n   * Listen for item-bring-to-front events from custom wrapper components\n   */\n  @Listen('item-bring-to-front')\n  handleItemBringToFrontEvent(event: CustomEvent) {\n    event.stopPropagation();\n    const canvas = gridState.canvases[this.item.canvasId];\n    if (!canvas) return;\n\n    const maxZ = Math.max(...canvas.items.map((i) => i.zIndex));\n    updateItem(this.item.canvasId, this.item.id, { zIndex: maxZ + 1 });\n  }\n\n  /**\n   * Listen for item-send-to-back events from custom wrapper components\n   */\n  @Listen('item-send-to-back')\n  handleItemSendToBackEvent(event: CustomEvent) {\n    event.stopPropagation();\n    const canvas = gridState.canvases[this.item.canvasId];\n    if (!canvas) return;\n\n    const minZ = Math.min(...canvas.items.map((i) => i.zIndex));\n    updateItem(this.item.canvasId, this.item.id, { zIndex: minZ - 1 });\n  }\n\n  /**\n   * Render component content (dynamic component from registry)\n   *\n   * **Dynamic rendering via ComponentDefinition.render()**:\n   * - Lookup component definition by type in registry\n   * - Call definition.render({ itemId, config })\n   * - Consumer controls what gets rendered\n   * - Library just provides the wrapper\n   *\n   * **Virtual rendering guard**:\n   * - Only render when isVisible = true\n   * - Show placeholder while loading\n   * - Performance optimization\n   *\n   * **Fallback for unknown types**:\n   * - If no registry provided: \"Component registry not available\"\n   * - If type not in registry: \"Unknown component type: {type}\"\n   * - Prevents crashes, helps debugging\n   */\n  private renderComponent() {\n    // Virtual rendering: only render component content when visible\n    if (!this.isVisible) {\n      return <div class=\"component-placeholder\">Loading...</div>;\n    }\n\n    // Check if component registry is available\n    if (!this.componentRegistry) {\n      console.error(`GridItemWrapper: componentRegistry not provided for item ${this.item.id}`);\n      return <div class=\"component-error\">Component registry not available</div>;\n    }\n\n    // Look up component definition from registry\n    const definition = this.componentRegistry.get(this.item.type);\n\n    if (!definition) {\n      console.error(`GridItemWrapper: Unknown component type \"${this.item.type}\" for item ${this.item.id}`);\n      return <div class=\"component-error\">Unknown component type: {this.item.type}</div>;\n    }\n\n    // Call component definition's render function\n    // Pass itemId and config so component can look up state and use config\n    const rendered = definition.render({\n      itemId: this.item.id,\n      config: this.item.config,\n    });\n\n    // If render returns a DOM element (HTMLElement), wrap it in a div for Stencil\n    // This handles cases where consumer uses document.createElement()\n    if (rendered instanceof HTMLElement) {\n      return <div ref={(el) => el && !el.hasChildNodes() && el.appendChild(rendered)} />;\n    }\n\n    // Otherwise return the vNode directly (JSX)\n    return rendered;\n  }\n\n  /**\n   * Render component template\n   *\n   * **Layout selection and auto-layout**:\n   * - Desktop: Use desktop layout\n   * - Mobile (not customized): Auto-stack full-width\n   * - Mobile (customized): Use custom mobile layout\n   *\n   * **Grid to pixel conversion**:\n   * - Horizontal: gridToPixelsX(units, canvasId, config)\n   * - Vertical: gridToPixelsY(units)\n   * - Responsive width, fixed height\n   *\n   * **Transform-based positioning**:\n   * - GPU-accelerated translate()\n   * - Better performance than top/left\n   * - Sub-pixel accuracy\n   *\n   * **Dynamic component rendering**:\n   * - Look up definition from registry\n   * - Use definition.icon and definition.name for header\n   * - Call definition.render() for content\n   */\n  render() {\n    // Use prop-based viewport in viewer mode, global state in builder mode\n    const currentViewport = this.viewerMode\n      ? (this.currentViewport || 'desktop')\n      : gridState.currentViewport;\n\n    const layout = this.item.layouts[currentViewport];\n\n    // For mobile viewport, calculate auto-layout if not customized\n    let actualLayout = layout;\n    if (currentViewport === 'mobile' && !this.item.layouts.mobile.customized) {\n      // Auto-layout for mobile: stack components vertically at full width\n\n      // Use prop-based items in viewer mode, global state in builder mode\n      const canvasItems = this.viewerMode\n        ? (this.canvasItems || [])\n        : (gridState.canvases[this.item.canvasId]?.items || []);\n\n      const itemIndex = canvasItems.findIndex((i) => i.id === this.item.id) ?? 0;\n\n      // Calculate Y position by summing heights of all previous items\n      let yPosition = 0;\n      if (itemIndex > 0) {\n        for (let i = 0; i < itemIndex; i++) {\n          const prevItem = canvasItems[i];\n          yPosition += prevItem.layouts.desktop.height || 6;\n        }\n      }\n\n      actualLayout = {\n        x: 0, // Full left\n        y: yPosition,\n        width: 50, // Full width (50 units = 100%)\n        height: this.item.layouts.desktop.height || 6,\n      };\n    }\n\n    // Compute selection directly from gridState (only in editing mode)\n    const isSelected = !this.viewerMode && gridState.selectedItemId === this.item.id;\n\n    const itemClasses = {\n      'grid-item': true,\n      selected: isSelected,\n      'with-animations': this.config?.enableAnimations ?? true,\n    };\n\n    // Convert grid units to pixels (with GridConfig support)\n    const xPixels = gridToPixelsX(actualLayout.x, this.item.canvasId, this.config);\n    const yPixels = gridToPixelsY(actualLayout.y);\n    const widthPixels = gridToPixelsX(actualLayout.width, this.item.canvasId, this.config);\n    const heightPixels = gridToPixelsY(actualLayout.height);\n\n    // Get component definition for icon, name, and selection color\n    const definition = this.componentRegistry?.get(this.item.type);\n    const icon = definition?.icon || 'ÔøΩ';\n    const displayName = this.item.name || definition?.name || this.item.type;\n    const selectionColor = definition?.selectionColor || '#f59e0b'; // Default yellow/gold\n\n    const itemStyle = {\n      transform: `translate(${xPixels}px, ${yPixels}px)`,\n      width: `${widthPixels}px`,\n      height: `${heightPixels}px`,\n      zIndex: this.item.zIndex.toString(),\n      '--selection-color': selectionColor,\n      '--animation-duration': `${this.config?.animationDuration ?? 100}ms`,\n    };\n\n    // Generate unique content slot ID for custom wrapper\n    const contentSlotId = `${this.item.id}-content`;\n\n    // Check if custom item wrapper is provided\n    if (definition?.renderItemWrapper) {\n      const customWrapper = definition.renderItemWrapper({\n        itemId: this.item.id,\n        componentType: this.item.type,\n        name: displayName,\n        icon: icon,\n        isSelected: isSelected,\n        contentSlotId: contentSlotId,\n      });\n\n      return (\n        <div\n          class={itemClasses}\n          id={this.item.id}\n          data-canvas-id={this.item.canvasId}\n          data-component-name={displayName}\n          data-viewer-mode={this.viewerMode ? 'true' : 'false'}\n          style={itemStyle}\n          onClick={(e) => this.handleClick(e)}\n          ref={(el) => (this.itemRef = el)}\n        >\n          {/* Custom wrapper JSX - renders securely */}\n          {customWrapper}\n\n          {/* Render component content into the content slot */}\n          {/* Note: The custom wrapper must include a div with id={contentSlotId} */}\n          {/* This is handled by a ref callback in renderComponent() */}\n\n          {/* Resize Handles (8 points) */}\n          <div class=\"resize-handle nw\" />\n          <div class=\"resize-handle ne\" />\n          <div class=\"resize-handle sw\" />\n          <div class=\"resize-handle se\" />\n          <div class=\"resize-handle n\" />\n          <div class=\"resize-handle s\" />\n          <div class=\"resize-handle e\" />\n          <div class=\"resize-handle w\" />\n        </div>\n      );\n    }\n\n    // Default item wrapper\n    return (\n      <div\n        class={itemClasses}\n        id={this.item.id}\n        data-canvas-id={this.item.canvasId}\n        data-component-name={displayName}\n        data-viewer-mode={this.viewerMode ? 'true' : 'false'}\n        style={itemStyle}\n        onClick={(e) => this.handleClick(e)}\n        ref={(el) => (this.itemRef = el)}\n      >\n        {/* Editing UI (hidden in viewer mode) */}\n        {!this.viewerMode && (\n          [\n            /* Drag Handle */\n            <div class=\"drag-handle\" key=\"drag-handle\" />,\n\n            /* Item Header */\n            <div class=\"grid-item-header\" key=\"header\">\n              {icon} {displayName}\n            </div>,\n\n            /* Item Controls */\n            <div class=\"grid-item-controls\" key=\"controls\">\n              <button class=\"grid-item-delete\" onClick={() => this.handleDelete()}>\n                √ó\n              </button>\n            </div>\n          ]\n        )}\n\n        {/* Item Content (always rendered) */}\n        <div class=\"grid-item-content\" id={contentSlotId} data-component-type={this.item.type}>\n          {this.renderComponent()}\n        </div>\n\n        {/* Resize Handles (hidden in viewer mode) */}\n        {!this.viewerMode && (\n          [\n            <div class=\"resize-handle nw\" key=\"resize-nw\" />,\n            <div class=\"resize-handle ne\" key=\"resize-ne\" />,\n            <div class=\"resize-handle sw\" key=\"resize-sw\" />,\n            <div class=\"resize-handle se\" key=\"resize-se\" />,\n            <div class=\"resize-handle n\" key=\"resize-n\" />,\n            <div class=\"resize-handle s\" key=\"resize-s\" />,\n            <div class=\"resize-handle e\" key=\"resize-e\" />,\n            <div class=\"resize-handle w\" key=\"resize-w\" />\n          ]\n        )}\n      </div>\n    );\n  }\n\n  /**\n   * Capture item snapshot for undo/redo\n   */\n  private captureItemSnapshot = () => {\n    this.itemSnapshot = JSON.parse(JSON.stringify(this.item));\n  };\n\n  /**\n   * Handle item update (called by drag/resize handlers)\n   */\n  private handleItemUpdate = (updatedItem: GridItem) => {\n    // Check if position or canvas changed (for undo/redo)\n    let isDrag = false;\n    let isResize = false;\n\n    if (this.itemSnapshot) {\n      const snapshot = this.itemSnapshot;\n      const positionOnlyChanged =\n        (snapshot.layouts.desktop.x !== updatedItem.layouts.desktop.x ||\n          snapshot.layouts.desktop.y !== updatedItem.layouts.desktop.y) &&\n        snapshot.layouts.desktop.width === updatedItem.layouts.desktop.width &&\n        snapshot.layouts.desktop.height === updatedItem.layouts.desktop.height;\n      const sizeChanged =\n        snapshot.layouts.desktop.width !== updatedItem.layouts.desktop.width ||\n        snapshot.layouts.desktop.height !== updatedItem.layouts.desktop.height;\n      const canvasChanged = snapshot.canvasId !== updatedItem.canvasId;\n\n      isDrag = positionOnlyChanged || canvasChanged;\n      isResize = sizeChanged;\n\n      if (isDrag || isResize) {\n        // Find source canvas and index\n        const sourceCanvas = gridState.canvases[snapshot.canvasId];\n        const sourceIndex = sourceCanvas?.items.findIndex((i) => i.id === this.item.id) || 0;\n\n        // Push undo command before updating state\n        // Include size tracking for resize operations (also handles resize with position change)\n        pushCommand(\n          new MoveItemCommand(\n            updatedItem.id,\n            snapshot.canvasId,\n            updatedItem.canvasId,\n            {\n              x: snapshot.layouts.desktop.x,\n              y: snapshot.layouts.desktop.y,\n            },\n            {\n              x: updatedItem.layouts.desktop.x,\n              y: updatedItem.layouts.desktop.y,\n            },\n            sourceIndex,\n            // Include size for resize tracking (position and size can both change)\n            isResize\n              ? {\n                  width: snapshot.layouts.desktop.width,\n                  height: snapshot.layouts.desktop.height,\n                }\n              : undefined,\n            isResize\n              ? {\n                  width: updatedItem.layouts.desktop.width,\n                  height: updatedItem.layouts.desktop.height,\n                }\n              : undefined\n          )\n        );\n      }\n    }\n\n    // Update item in state (triggers re-render)\n    const canvas = gridState.canvases[this.item.canvasId];\n    const itemIndex = canvas.items.findIndex((i) => i.id === this.item.id);\n    if (itemIndex !== -1) {\n      canvas.items[itemIndex] = updatedItem;\n      gridState.canvases = { ...gridState.canvases };\n    }\n\n    // Emit events for plugins\n    if (isDrag) {\n      eventManager.emit('componentDragged', {\n        itemId: updatedItem.id,\n        canvasId: updatedItem.canvasId,\n        position: {\n          x: updatedItem.layouts.desktop.x,\n          y: updatedItem.layouts.desktop.y,\n        },\n      });\n    }\n    if (isResize) {\n      eventManager.emit('componentResized', {\n        itemId: updatedItem.id,\n        canvasId: updatedItem.canvasId,\n        size: {\n          width: updatedItem.layouts.desktop.width,\n          height: updatedItem.layouts.desktop.height,\n        },\n      });\n    }\n  };\n\n  /**\n   * Handle click event (selection and config panel)\n   */\n  private handleClick = (e: MouseEvent) => {\n\n    // Skip click handling in viewer mode\n    if (this.viewerMode) {\n      debug.log('  ‚è≠Ô∏è Skipping - viewer mode');\n      return;\n    }\n\n    // Don't open config panel if item was just dragged\n    if (this.wasDragged) {\n      debug.log('  ‚è≠Ô∏è Skipping - was dragged');\n      // Reset flag after a small delay to allow this click event to finish\n      setTimeout(() => {\n        this.wasDragged = false;\n      }, 10);\n      return;\n    }\n\n    // Don't open config panel if clicking on drag handle, resize handle, or control buttons\n    const target = e.target as HTMLElement;\n    if (\n      target.classList.contains('drag-handle') ||\n      target.closest('.drag-handle') ||\n      target.classList.contains('resize-handle') ||\n      target.closest('.resize-handle') ||\n      target.classList.contains('grid-item-delete') ||\n      target.classList.contains('grid-item-control-btn')\n    ) {\n      debug.log('  ‚è≠Ô∏è Skipping - clicked on control element');\n      return;\n    }\n\n    debug.log('  ‚úÖ Proceeding with click handling');\n\n    // Set selection state immediately\n    gridState.selectedItemId = this.item.id;\n    gridState.selectedCanvasId = this.item.canvasId;\n\n    // Set this canvas as active\n    setActiveCanvas(this.item.canvasId);\n\n    // Emit selection event for plugins\n    eventManager.emit('componentSelected', {\n      itemId: this.item.id,\n      canvasId: this.item.canvasId,\n    });\n\n    // Dispatch event to open config panel\n    debug.log('  üì§ Dispatching item-click event', {\n      itemId: this.item.id,\n      canvasId: this.item.canvasId,\n      hasItemRef: !!this.itemRef,\n    });\n    const event = new CustomEvent('item-click', {\n      detail: { itemId: this.item.id, canvasId: this.item.canvasId },\n      bubbles: true,\n      composed: true,\n    });\n    this.itemRef.dispatchEvent(event);\n    debug.log('  ‚úÖ item-click event dispatched');\n  };\n\n  /**\n   * Handle delete from default wrapper button\n   * Calls deletion hook if provided, then dispatches delete event if approved\n   */\n  private handleDelete = async () => {\n    debug.log('üóëÔ∏è handleDelete (default wrapper button)', {\n      itemId: this.item.id,\n      canvasId: this.item.canvasId,\n    });\n\n    // If deletion hook provided, call it first\n    if (this.onBeforeDelete) {\n      debug.log('  ü™ù Calling deletion hook...');\n      try {\n        const shouldDelete = await this.onBeforeDelete({\n          item: this.item,\n          canvasId: this.item.canvasId,\n          itemId: this.item.id,\n        });\n\n        if (!shouldDelete) {\n          debug.log('  ‚ùå Deletion cancelled by hook');\n          return;\n        }\n        debug.log('  ‚úÖ Deletion approved by hook');\n      } catch (error) {\n        console.error('  ‚ùå Deletion hook error:', error);\n        return;\n      }\n    }\n\n    // Proceed with deletion\n    const event = new CustomEvent('grid-item:delete', {\n      detail: { itemId: this.item.id, canvasId: this.item.canvasId },\n      bubbles: true,\n      composed: true,\n    });\n    debug.log('  üì§ Dispatching grid-item:delete (internal event)');\n    this.itemRef.dispatchEvent(event);\n  };\n}\n"]}