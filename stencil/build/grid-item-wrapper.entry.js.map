{"file":"grid-item-wrapper.entry.esm.js","mappings":"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","names":["getTransformPosition","gridState"],"sources":["src/services/virtual-renderer.ts","src/utils/drag-handler.ts","src/utils/resize-handler.ts","src/components/grid-item-wrapper/grid-item-wrapper.css?tag=grid-item-wrapper","src/components/grid-item-wrapper/grid-item-wrapper.tsx"],"sourcesContent":["/**\n * Virtual Renderer Service\n * Lazy-loads component content using IntersectionObserver\n *\n * Purpose: Only render component content when visible in viewport\n * to improve performance with 100+ items\n *\n * Benefits:\n * - Reduced initial render time\n * - Lower memory usage\n * - Faster page load\n * - Smooth scrolling\n */\n\nexport type VisibilityCallback = (isVisible: boolean) => void;\n\nexport class VirtualRendererService {\n  private observer: IntersectionObserver | null = null;\n  private observedElements: Map<string, VisibilityCallback> = new Map();\n\n  constructor() {\n    this.initialize();\n  }\n\n  private initialize() {\n    // Create observer with 200px margin (pre-render before entering viewport)\n    this.observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          const elementId = entry.target.id;\n          const callback = this.observedElements.get(elementId);\n\n          if (callback) {\n            // Call callback with visibility state\n            callback(entry.isIntersecting);\n          }\n        });\n      },\n      {\n        rootMargin: '200px', // Start loading 200px before entering viewport\n        threshold: 0.01, // Trigger when even 1% is visible\n      }\n    );\n  }\n\n  /**\n   * Observe an element for visibility changes\n   * @param element - The element to observe\n   * @param elementId - Unique ID for the element\n   * @param callback - Called when visibility changes\n   */\n  observe(element: HTMLElement, elementId: string, callback: VisibilityCallback) {\n    if (!this.observer || !element) {\n      return;\n    }\n\n    // Store callback\n    this.observedElements.set(elementId, callback);\n\n    // Start observing\n    this.observer.observe(element);\n  }\n\n  /**\n   * Stop observing an element\n   * @param element - The element to stop observing\n   * @param elementId - The element's ID\n   */\n  unobserve(element: HTMLElement, elementId: string) {\n    if (!this.observer || !element) {\n      return;\n    }\n\n    // Remove callback\n    this.observedElements.delete(elementId);\n\n    // Stop observing\n    this.observer.unobserve(element);\n  }\n\n  /**\n   * Cleanup all observations\n   */\n  destroy() {\n    if (this.observer) {\n      this.observer.disconnect();\n      this.observer = null;\n    }\n    this.observedElements.clear();\n  }\n}\n\n// Export singleton instance\nexport const virtualRenderer = new VirtualRendererService();\n","/**\n * Drag Handler\n * Performance-critical drag operations using direct DOM manipulation\n *\n * Purpose: Handle drag operations outside of StencilJS virtual DOM\n * to avoid re-render overhead during 60fps drag operations\n *\n * Uses interact.js for drag events but manipulates DOM directly\n * Only updates StencilJS state at the END of drag (triggers single re-render)\n */\n\nimport { GridItem } from '../services/state-manager';\nimport { domCache } from './dom-cache';\nimport { getGridSizeHorizontal, getGridSizeVertical, pixelsToGridX, pixelsToGridY } from './grid-calculations';\n\n/**\n * Extract transform position from element\n */\nfunction getTransformPosition(element: HTMLElement): { x: number; y: number } {\n  const transform = element.style.transform;\n  const match = transform.match(/translate\\(([^,]+)px,\\s*([^)]+)px\\)/);\n\n  if (match) {\n    return {\n      x: parseFloat(match[1]),\n      y: parseFloat(match[2]),\n    };\n  }\n\n  return { x: 0, y: 0 };\n}\n\n/**\n * Drag Handler Class\n * Manages drag behavior for a single grid item\n */\nexport class DragHandler {\n  private element: HTMLElement;\n  private item: GridItem;\n  private onUpdate: (item: GridItem) => void;\n  private interactInstance: any;\n  private basePosition: { x: number; y: number } = { x: 0, y: 0 };\n  private dragStartCanvasId: string = '';\n\n  constructor(element: HTMLElement, item: GridItem, onUpdate: (item: GridItem) => void) {\n    this.element = element;\n    this.item = item;\n    this.onUpdate = onUpdate;\n\n    this.initialize();\n  }\n\n  /**\n   * Cleanup interact.js instance\n   */\n  destroy(): void {\n    if (this.interactInstance) {\n      this.interactInstance.unset();\n    }\n  }\n\n  private initialize(): void {\n    const interact = (window as any).interact;\n    if (!interact) {\n      console.warn('interact.js not loaded');\n      return;\n    }\n\n    this.interactInstance = interact(this.element).draggable({\n      allowFrom: '.drag-handle', // Only allow drag from drag handle\n      inertia: false,\n      listeners: {\n        start: this.handleDragStart.bind(this),\n        move: this.handleDragMove.bind(this),\n        end: this.handleDragEnd.bind(this),\n      },\n    });\n  }\n\n  private handleDragStart(event: any): void {\n    // Start performance tracking\n    if ((window as any).perfMonitor) {\n      (window as any).perfMonitor.startOperation('drag');\n    }\n\n    event.target.classList.add('dragging');\n\n    // Store the original canvas ID at drag start\n    this.dragStartCanvasId = this.item.canvasId;\n\n    // Store the base position from transform\n    this.basePosition = getTransformPosition(event.target);\n\n    // Reset accumulation\n    event.target.setAttribute('data-x', '0');\n    event.target.setAttribute('data-y', '0');\n  }\n\n  private handleDragMove(event: any): void {\n    const x = (parseFloat(event.target.getAttribute('data-x')) || 0) + event.dx;\n    const y = (parseFloat(event.target.getAttribute('data-y')) || 0) + event.dy;\n\n    // Apply drag delta to base position\n    // Direct DOM manipulation - no StencilJS re-render during drag\n    event.target.style.transform = `translate(${this.basePosition.x + x}px, ${this.basePosition.y + y}px)`;\n    event.target.setAttribute('data-x', x.toString());\n    event.target.setAttribute('data-y', y.toString());\n  }\n\n  private handleDragEnd(event: any): void {\n    event.target.classList.remove('dragging');\n\n    const deltaX = parseFloat(event.target.getAttribute('data-x')) || 0;\n    const deltaY = parseFloat(event.target.getAttribute('data-y')) || 0;\n\n    // Get the element's current position in viewport\n    const rect = event.target.getBoundingClientRect();\n    const centerX = rect.left + rect.width / 2;\n    const centerY = rect.top + rect.height / 2;\n\n    // Find which canvas the center of the item is over\n    let targetCanvasId = this.item.canvasId;\n\n    const gridContainers = document.querySelectorAll('.grid-container');\n    gridContainers.forEach((container: HTMLElement) => {\n      const containerRect = container.getBoundingClientRect();\n      if (\n        centerX >= containerRect.left &&\n        centerX <= containerRect.right &&\n        centerY >= containerRect.top &&\n        centerY <= containerRect.bottom\n      ) {\n        targetCanvasId = container.getAttribute('data-canvas-id') || this.item.canvasId;\n      }\n    });\n\n    // If canvas changed from drag start, let the dropzone handle it\n    // (Use dragStartCanvasId since item.canvasId may have been updated by dropzone already)\n    if (targetCanvasId !== this.dragStartCanvasId) {\n      // Clean up drag state\n      event.target.classList.remove('dragging');\n      event.target.setAttribute('data-x', '0');\n      event.target.setAttribute('data-y', '0');\n\n      // End performance tracking\n      if ((window as any).perfMonitor) {\n        (window as any).perfMonitor.endOperation('drag');\n      }\n      return;\n    }\n\n    // Calculate new position relative to current canvas (same-canvas drag only)\n    const targetContainer = domCache.getCanvas(targetCanvasId);\n    if (!targetContainer) {\n      return;\n    }\n\n    const gridSizeX = getGridSizeHorizontal(targetCanvasId);\n    const gridSizeY = getGridSizeVertical();\n\n    // Final position is base position + drag delta\n    let newX = this.basePosition.x + deltaX;\n    let newY = this.basePosition.y + deltaY;\n\n    // Snap to grid (separate X and Y)\n    newX = Math.round(newX / gridSizeX) * gridSizeX;\n    newY = Math.round(newY / gridSizeY) * gridSizeY;\n\n    // Ensure item stays fully within target canvas\n    const itemWidth = parseFloat(event.target.style.width) || 0;\n    const itemHeight = parseFloat(event.target.style.height) || 0;\n    newX = Math.max(0, Math.min(newX, targetContainer.clientWidth - itemWidth));\n    newY = Math.max(0, Math.min(newY, targetContainer.clientHeight - itemHeight));\n\n    // Snap to canvas edges if within threshold (20px)\n    const EDGE_SNAP_THRESHOLD = 20;\n    if (newX < EDGE_SNAP_THRESHOLD) {\n      newX = 0; // Snap to left edge\n    } else if (newX > targetContainer.clientWidth - itemWidth - EDGE_SNAP_THRESHOLD) {\n      newX = targetContainer.clientWidth - itemWidth; // Snap to right edge\n    }\n    if (newY < EDGE_SNAP_THRESHOLD) {\n      newY = 0; // Snap to top edge\n    } else if (newY > targetContainer.clientHeight - itemHeight - EDGE_SNAP_THRESHOLD) {\n      newY = targetContainer.clientHeight - itemHeight; // Snap to bottom edge\n    }\n\n    // Update item position in current viewport's layout (convert to grid units)\n    const currentViewport = (window as any).gridState?.currentViewport || 'desktop';\n    const layout = this.item.layouts[currentViewport as 'desktop' | 'mobile'];\n\n    layout.x = pixelsToGridX(newX, targetCanvasId);\n    layout.y = pixelsToGridY(newY);\n\n    // If in mobile view, mark as customized\n    if (currentViewport === 'mobile') {\n      this.item.layouts.mobile.customized = true;\n      // Set width/height if not already set (copy from desktop)\n      if (this.item.layouts.mobile.width === null) {\n        this.item.layouts.mobile.width = this.item.layouts.desktop.width;\n      }\n      if (this.item.layouts.mobile.height === null) {\n        this.item.layouts.mobile.height = this.item.layouts.desktop.height;\n      }\n    }\n\n    // Apply final snapped position to DOM\n    event.target.style.transform = `translate(${newX}px, ${newY}px)`;\n    event.target.setAttribute('data-x', '0');\n    event.target.setAttribute('data-y', '0');\n\n    // End performance tracking\n    if ((window as any).perfMonitor) {\n      (window as any).perfMonitor.endOperation('drag');\n    }\n\n    // Trigger StencilJS update (single re-render at end)\n    this.onUpdate(this.item);\n  }\n}\n","/**\n * Resize Handler\n * Performance-critical resize operations using direct DOM manipulation\n *\n * Purpose: Handle 8-point resize operations outside of StencilJS virtual DOM\n * to avoid re-render overhead during 60fps resize operations\n *\n * Uses interact.js for resize events with RAF batching\n * Only updates StencilJS state at the END of resize (triggers single re-render)\n */\n\nimport { GridItem } from '../services/state-manager';\nimport { domCache } from './dom-cache';\nimport { getGridSizeHorizontal, getGridSizeVertical, pixelsToGridX, pixelsToGridY } from './grid-calculations';\n\n/**\n * Extract transform position from element\n */\nfunction getTransformPosition(element: HTMLElement): { x: number; y: number } {\n  const transform = element.style.transform;\n  const match = transform.match(/translate\\(([^,]+)px,\\s*([^)]+)px\\)/);\n\n  if (match) {\n    return {\n      x: parseFloat(match[1]),\n      y: parseFloat(match[2]),\n    };\n  }\n\n  return { x: 0, y: 0 };\n}\n\n/**\n * Resize Handler Class\n * Manages resize behavior for a single grid item\n */\nexport class ResizeHandler {\n  private element: HTMLElement;\n  private item: GridItem;\n  private onUpdate: (item: GridItem) => void;\n  private interactInstance: any;\n  private resizeRafId: number | null = null;\n  private startRect: { x: number; y: number; width: number; height: number } = {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n  };\n\n  constructor(element: HTMLElement, item: GridItem, onUpdate: (item: GridItem) => void) {\n    this.element = element;\n    this.item = item;\n    this.onUpdate = onUpdate;\n\n    this.initialize();\n  }\n\n  /**\n   * Cleanup interact.js instance\n   */\n  destroy(): void {\n    if (this.resizeRafId) {\n      cancelAnimationFrame(this.resizeRafId);\n      this.resizeRafId = null;\n    }\n\n    if (this.interactInstance) {\n      this.interactInstance.unset();\n    }\n  }\n\n  private initialize(): void {\n    const interact = (window as any).interact;\n    if (!interact) {\n      console.warn('interact.js not loaded');\n      return;\n    }\n\n    this.interactInstance = interact(this.element).resizable({\n      edges: { left: true, right: true, bottom: true, top: true },\n\n      modifiers: [\n        // Snap to grid only when resize ends (prevents initial jump)\n        interact.modifiers.snap({\n          targets: [\n            interact.snappers.grid({\n              x: () => getGridSizeHorizontal(this.item.canvasId),\n              y: () => getGridSizeVertical(),\n            }),\n          ],\n          range: Infinity,\n          endOnly: true,\n        }),\n        // Enforce minimum size\n        interact.modifiers.restrictSize({\n          min: { width: 100, height: 80 },\n        }),\n        // Keep within parent boundaries\n        interact.modifiers.restrictEdges({\n          outer: 'parent',\n        }),\n      ],\n\n      listeners: {\n        start: this.handleResizeStart.bind(this),\n        move: this.handleResizeMove.bind(this),\n        end: this.handleResizeEnd.bind(this),\n      },\n    });\n  }\n\n  private handleResizeStart(event: any): void {\n    // Start performance tracking\n    if ((window as any).perfMonitor) {\n      (window as any).perfMonitor.startOperation('resize');\n    }\n\n    event.target.classList.add('resizing');\n\n    // Store the starting position and size\n    const position = getTransformPosition(event.target);\n    this.startRect.x = position.x;\n    this.startRect.y = position.y;\n    this.startRect.width = parseFloat(event.target.style.width) || 0;\n    this.startRect.height = parseFloat(event.target.style.height) || 0;\n  }\n\n  private handleResizeMove(event: any): void {\n    // Cancel any pending frame\n    if (this.resizeRafId) {\n      cancelAnimationFrame(this.resizeRafId);\n    }\n\n    // Batch DOM updates with requestAnimationFrame for 60fps\n    this.resizeRafId = requestAnimationFrame(() => {\n      // Use deltaRect to accumulate changes instead of absolute positions\n      // This prevents jumping when endOnly snap is used\n      const dx = event.deltaRect.left;\n      const dy = event.deltaRect.top;\n      const dw = event.deltaRect.width;\n      const dh = event.deltaRect.height;\n\n      // Update stored rect\n      this.startRect.x += dx;\n      this.startRect.y += dy;\n      this.startRect.width += dw;\n      this.startRect.height += dh;\n\n      // Direct DOM manipulation - no StencilJS re-render during resize\n      event.target.style.transform = `translate(${this.startRect.x}px, ${this.startRect.y}px)`;\n      event.target.style.width = this.startRect.width + 'px';\n      event.target.style.height = this.startRect.height + 'px';\n\n      this.resizeRafId = null;\n    });\n  }\n\n  private handleResizeEnd(event: any): void {\n    // Cancel any pending frame\n    if (this.resizeRafId) {\n      cancelAnimationFrame(this.resizeRafId);\n      this.resizeRafId = null;\n    }\n\n    event.target.classList.remove('resizing');\n\n    // Clean up data attributes\n    event.target.removeAttribute('data-x');\n    event.target.removeAttribute('data-y');\n    event.target.removeAttribute('data-width');\n    event.target.removeAttribute('data-height');\n\n    // Get the container to calculate relative position\n    const container = domCache.getCanvas(this.item.canvasId);\n    if (!container) {\n      return;\n    }\n\n    const containerRect = container.getBoundingClientRect();\n    const gridSizeX = getGridSizeHorizontal(this.item.canvasId);\n    const gridSizeY = getGridSizeVertical();\n\n    // Convert absolute event.rect to container-relative coordinates\n    let newX = event.rect.left - containerRect.left;\n    let newY = event.rect.top - containerRect.top;\n    let newWidth = event.rect.width;\n    let newHeight = event.rect.height;\n\n    // Snap position to grid\n    newX = Math.round(newX / gridSizeX) * gridSizeX;\n    newY = Math.round(newY / gridSizeY) * gridSizeY;\n\n    // Snap dimensions to grid\n    newWidth = Math.round(newWidth / gridSizeX) * gridSizeX;\n    newHeight = Math.round(newHeight / gridSizeY) * gridSizeY;\n\n    // Apply snapped final position\n    event.target.style.transform = `translate(${newX}px, ${newY}px)`;\n    event.target.style.width = newWidth + 'px';\n    event.target.style.height = newHeight + 'px';\n\n    // Update item size and position in current viewport's layout (convert to grid units)\n    const currentViewport = (window as any).gridState?.currentViewport || 'desktop';\n    const layout = this.item.layouts[currentViewport as 'desktop' | 'mobile'];\n\n    layout.width = pixelsToGridX(newWidth, this.item.canvasId);\n    layout.height = pixelsToGridY(newHeight);\n    layout.x = pixelsToGridX(newX, this.item.canvasId);\n    layout.y = pixelsToGridY(newY);\n\n    // If in mobile view, mark as customized\n    if (currentViewport === 'mobile') {\n      this.item.layouts.mobile.customized = true;\n    }\n\n    // Commit to transform-based position (no left/top)\n    event.target.style.transform = `translate(${newX}px, ${newY}px)`;\n    event.target.style.width = newWidth + 'px';\n    event.target.style.height = newHeight + 'px';\n    event.target.removeAttribute('data-x');\n    event.target.removeAttribute('data-y');\n\n    // End performance tracking\n    if ((window as any).perfMonitor) {\n      (window as any).perfMonitor.endOperation('resize');\n    }\n\n    // Trigger StencilJS update (single re-render at end)\n    this.onUpdate(this.item);\n  }\n}\n","/* Grid Item */\n.grid-item {\n  position: absolute;\n  min-width: 100px;\n  min-height: 80px;\n  padding: 20px 20px 20px 44px; /* Extra left padding for drag handle */\n  border: 2px solid transparent;\n  border-radius: 4px;\n  background: white;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 10%);\n  cursor: default;\n  transition: border-color 0.2s, box-shadow 0.2s;\n  will-change: transform; /* GPU acceleration hint */\n}\n\n.grid-item:hover {\n  border-color: #4a90e2;\n}\n\n.grid-item.selected {\n  z-index: 1000;\n  border-color: #4a90e2;\n  box-shadow: 0 4px 12px rgba(74, 144, 226, 30%);\n}\n\n.grid-item.dragging {\n  cursor: move;\n  opacity: 0.7;\n}\n\n.grid-item.resizing {\n  user-select: none;\n}\n\n/* Item Header */\n.grid-item-header {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin: -20px -20px 12px -44px;\n  padding: 10px 16px 10px 50px;\n  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\n  border-bottom: 1px solid #dee2e6;\n  border-radius: 4px 4px 0 0;\n  color: #495057;\n  font-size: 13px;\n  font-weight: 600;\n  letter-spacing: 0.3px;\n  text-transform: uppercase;\n}\n\n/* Item Content */\n.grid-item-content {\n  overflow: hidden;\n  max-width: 100%;\n  color: #666;\n  font-size: 13px;\n}\n\n.loading-placeholder {\n  display: flex;\n  height: 100%;\n  align-items: center;\n  justify-content: center;\n  color: #999;\n  font-size: 12px;\n}\n\n/* Item Controls */\n.grid-item-controls {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  display: flex;\n  gap: 4px;\n  opacity: 0;\n  transition: opacity 0.2s;\n}\n\n.grid-item.selected .grid-item-controls,\n.grid-item:hover .grid-item-controls {\n  opacity: 1;\n}\n\n.grid-item-control-btn {\n  width: 24px;\n  height: 24px;\n  padding: 0;\n  border: none;\n  border-radius: 4px;\n  background: #4a90e2;\n  color: white;\n  cursor: pointer;\n  font-size: 12px;\n  line-height: 1;\n  transition: background 0.2s;\n}\n\n.grid-item-control-btn:hover {\n  background: #357abd;\n}\n\n.grid-item-delete {\n  width: 24px;\n  height: 24px;\n  padding: 0;\n  border: none;\n  border-radius: 50%;\n  background: #f44;\n  color: white;\n  cursor: pointer;\n  font-size: 14px;\n  line-height: 1;\n  transition: background 0.2s;\n}\n\n.grid-item-delete:hover {\n  background: #c00;\n}\n\n/* Drag Handle */\n.drag-handle {\n  position: absolute;\n  top: 8px;\n  left: 8px;\n  display: flex;\n  width: 28px;\n  height: 28px;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid rgba(74, 144, 226, 30%);\n  border-radius: 4px;\n  background: rgba(74, 144, 226, 10%);\n  cursor: move;\n  opacity: 0.7;\n  transition: all 0.2s;\n}\n\n.drag-handle::before {\n  color: #4a90e2;\n  content: '⋮⋮';\n  font-size: 14px;\n  font-weight: bold;\n  letter-spacing: -2px;\n}\n\n.drag-handle:hover {\n  background: rgba(74, 144, 226, 25%);\n  transform: scale(1.1);\n}\n\n.grid-item:hover .drag-handle {\n  background: rgba(74, 144, 226, 15%);\n  opacity: 1;\n}\n\n/* Resize Handles */\n.resize-handle {\n  position: absolute;\n  width: 10px;\n  height: 10px;\n  border: 2px solid white;\n  border-radius: 50%;\n  background: #4a90e2;\n  box-shadow: 0 0 3px rgba(0, 0, 0, 30%);\n  opacity: 0;\n  transition: opacity 0.2s;\n}\n\n.grid-item.selected .resize-handle,\n.grid-item:hover .resize-handle {\n  opacity: 1;\n}\n\n.resize-handle.nw {\n  top: -5px;\n  left: -5px;\n  cursor: nw-resize;\n}\n\n.resize-handle.ne {\n  top: -5px;\n  right: -5px;\n  cursor: ne-resize;\n}\n\n.resize-handle.sw {\n  bottom: -5px;\n  left: -5px;\n  cursor: sw-resize;\n}\n\n.resize-handle.se {\n  right: -5px;\n  bottom: -5px;\n  cursor: se-resize;\n}\n\n.resize-handle.n {\n  top: -5px;\n  left: 50%;\n  cursor: n-resize;\n  transform: translateX(-50%);\n}\n\n.resize-handle.s {\n  bottom: -5px;\n  left: 50%;\n  cursor: s-resize;\n  transform: translateX(-50%);\n}\n\n.resize-handle.e {\n  top: 50%;\n  right: -5px;\n  cursor: e-resize;\n  transform: translateY(-50%);\n}\n\n.resize-handle.w {\n  top: 50%;\n  left: -5px;\n  cursor: w-resize;\n  transform: translateY(-50%);\n}\n","import { Component, h, Prop, State } from '@stencil/core';\nimport { componentTemplates } from '../../data/component-templates';\nimport { GridItem, gridState } from '../../services/state-manager';\nimport { pushCommand } from '../../services/undo-redo';\nimport { MoveItemCommand } from '../../services/undo-redo-commands';\nimport { virtualRenderer } from '../../services/virtual-renderer';\nimport { DragHandler } from '../../utils/drag-handler';\nimport { gridToPixelsX, gridToPixelsY } from '../../utils/grid-calculations';\nimport { ResizeHandler } from '../../utils/resize-handler';\n\n@Component({\n  tag: 'grid-item-wrapper',\n  styleUrl: 'grid-item-wrapper.css',\n  shadow: false, // Use light DOM for compatibility with interact.js\n})\nexport class GridItemWrapper {\n  @Prop() item!: GridItem;\n  @Prop() renderVersion?: number; // Force re-render when parent updates\n\n  @State() isSelected: boolean = false;\n  @State() isVisible: boolean = false;\n\n  private itemRef: HTMLElement;\n  private dragHandler: DragHandler;\n  private resizeHandler: ResizeHandler;\n  private itemSnapshot: GridItem | null = null;\n\n  componentWillLoad() {\n    // Initial selection state\n    this.isSelected = gridState.selectedItemId === this.item.id;\n\n    // Store snapshot for undo/redo before operations\n    this.captureItemSnapshot();\n  }\n\n  componentWillUpdate() {\n    // Update selection state when state changes\n    this.isSelected = gridState.selectedItemId === this.item.id;\n\n    // Capture new snapshot after state update\n    this.captureItemSnapshot();\n  }\n\n  componentDidLoad() {\n    // Initialize drag and resize handlers\n    this.dragHandler = new DragHandler(this.itemRef, this.item, this.handleItemUpdate.bind(this));\n    this.resizeHandler = new ResizeHandler(this.itemRef, this.item, this.handleItemUpdate.bind(this));\n\n    // Set up virtual rendering observer\n    virtualRenderer.observe(this.itemRef, this.item.id, (isVisible) => {\n      this.isVisible = isVisible;\n    });\n  }\n\n  disconnectedCallback() {\n    // Cleanup handlers\n    if (this.dragHandler) {\n      this.dragHandler.destroy();\n    }\n    if (this.resizeHandler) {\n      this.resizeHandler.destroy();\n    }\n\n    // Cleanup virtual renderer\n    if (this.itemRef) {\n      virtualRenderer.unobserve(this.itemRef, this.item.id);\n    }\n  }\n\n  private renderComponent() {\n    // Virtual rendering: only render component content when visible\n    if (!this.isVisible) {\n      return <div class=\"component-placeholder\">Loading...</div>;\n    }\n\n    switch (this.item.type) {\n      case 'header':\n        return <component-header itemId={this.item.id} />;\n      case 'text':\n        return <component-text-block itemId={this.item.id} />;\n      case 'image':\n        return <component-image itemId={this.item.id} />;\n      case 'button':\n        return <component-button itemId={this.item.id} />;\n      case 'video':\n        return <component-video itemId={this.item.id} />;\n      case 'imageGallery':\n        return <component-image-gallery itemId={this.item.id} />;\n      case 'dashboardWidget':\n        return <component-dashboard-widget itemId={this.item.id} />;\n      case 'liveData':\n        return <component-live-data itemId={this.item.id} />;\n      default:\n        return <div>Unknown component type: {this.item.type}</div>;\n    }\n  }\n\n  render() {\n    const template = componentTemplates[this.item.type];\n    const currentViewport = gridState.currentViewport;\n    const layout = this.item.layouts[currentViewport];\n\n    // For mobile viewport, calculate auto-layout if not customized\n    let actualLayout = layout;\n    if (currentViewport === 'mobile' && !this.item.layouts.mobile.customized) {\n      // Auto-layout for mobile: stack components vertically at full width\n      const canvas = gridState.canvases[this.item.canvasId];\n      const itemIndex = canvas?.items.findIndex((i) => i.id === this.item.id) ?? 0;\n\n      // Calculate Y position by summing heights of all previous items\n      let yPosition = 0;\n      if (canvas && itemIndex > 0) {\n        for (let i = 0; i < itemIndex; i++) {\n          const prevItem = canvas.items[i];\n          // Use desktop height or default to 6 units\n          yPosition += prevItem.layouts.desktop.height || 6;\n        }\n      }\n\n      actualLayout = {\n        x: 0, // Full left\n        y: yPosition,\n        width: 50, // Full width (50 units = 100%)\n        height: this.item.layouts.desktop.height || 6, // Keep desktop height\n      };\n    }\n\n    const itemClasses = {\n      'grid-item': true,\n      selected: this.isSelected,\n    };\n\n    // Convert grid units to pixels\n    const xPixels = gridToPixelsX(actualLayout.x, this.item.canvasId);\n    const yPixels = gridToPixelsY(actualLayout.y);\n    const widthPixels = gridToPixelsX(actualLayout.width, this.item.canvasId);\n    const heightPixels = gridToPixelsY(actualLayout.height);\n\n    const itemStyle = {\n      transform: `translate(${xPixels}px, ${yPixels}px)`,\n      width: `${widthPixels}px`,\n      height: `${heightPixels}px`,\n      zIndex: this.item.zIndex.toString(),\n    };\n\n    return (\n      <div\n        class={itemClasses}\n        id={this.item.id}\n        data-canvas-id={this.item.canvasId}\n        data-component-name={this.item.name || template.title}\n        style={itemStyle}\n        onClick={(e) => this.handleClick(e)}\n        ref={(el) => (this.itemRef = el)}\n      >\n        {/* Drag Handle */}\n        <div class=\"drag-handle\" />\n\n        {/* Item Header */}\n        <div class=\"grid-item-header\">\n          {template.icon} {this.item.name || template.title}\n        </div>\n\n        {/* Item Content */}\n        <div class=\"grid-item-content\" id={`${this.item.id}-content`}>\n          {this.renderComponent()}\n        </div>\n\n        {/* Item Controls */}\n        <div class=\"grid-item-controls\">\n          <button class=\"grid-item-control-btn\" onClick={() => this.handleBringToFront()} title=\"Bring to Front\">\n            ⬆️\n          </button>\n          <button class=\"grid-item-control-btn\" onClick={() => this.handleSendToBack()} title=\"Send to Back\">\n            ⬇️\n          </button>\n          <button class=\"grid-item-delete\" onClick={() => this.handleDelete()}>\n            ×\n          </button>\n        </div>\n\n        {/* Resize Handles (8 points) */}\n        <div class=\"resize-handle nw\" />\n        <div class=\"resize-handle ne\" />\n        <div class=\"resize-handle sw\" />\n        <div class=\"resize-handle se\" />\n        <div class=\"resize-handle n\" />\n        <div class=\"resize-handle s\" />\n        <div class=\"resize-handle e\" />\n        <div class=\"resize-handle w\" />\n      </div>\n    );\n  }\n\n  private captureItemSnapshot() {\n    // Deep clone the item to capture its state before drag/resize\n    this.itemSnapshot = JSON.parse(JSON.stringify(this.item));\n  }\n\n  private handleItemUpdate(updatedItem: GridItem) {\n    // Called by drag/resize handlers at end of operation\n\n    // Check if position or canvas changed (for undo/redo)\n    if (this.itemSnapshot) {\n      const snapshot = this.itemSnapshot;\n      const positionChanged =\n        snapshot.layouts.desktop.x !== updatedItem.layouts.desktop.x ||\n        snapshot.layouts.desktop.y !== updatedItem.layouts.desktop.y ||\n        snapshot.layouts.desktop.width !== updatedItem.layouts.desktop.width ||\n        snapshot.layouts.desktop.height !== updatedItem.layouts.desktop.height;\n      const canvasChanged = snapshot.canvasId !== updatedItem.canvasId;\n\n      if (positionChanged || canvasChanged) {\n        // Find source canvas and index\n        const sourceCanvas = gridState.canvases[snapshot.canvasId];\n        const sourceIndex = sourceCanvas?.items.findIndex((i) => i.id === this.item.id) || 0;\n\n        // Push undo command before updating state\n        pushCommand(\n          new MoveItemCommand(\n            updatedItem.id,\n            snapshot.canvasId,\n            updatedItem.canvasId,\n            {\n              x: snapshot.layouts.desktop.x,\n              y: snapshot.layouts.desktop.y,\n            },\n            {\n              x: updatedItem.layouts.desktop.x,\n              y: updatedItem.layouts.desktop.y,\n            },\n            sourceIndex\n          )\n        );\n      }\n    }\n\n    // Update item in state (triggers re-render)\n    const canvas = gridState.canvases[this.item.canvasId];\n    const itemIndex = canvas.items.findIndex((i) => i.id === this.item.id);\n    if (itemIndex !== -1) {\n      canvas.items[itemIndex] = updatedItem;\n      gridState.canvases = { ...gridState.canvases }; // Trigger update\n    }\n  }\n\n  private handleClick(e: MouseEvent) {\n    // Don't open config panel if clicking on drag handle, resize handle, or control buttons\n    const target = e.target as HTMLElement;\n    if (\n      target.classList.contains('drag-handle') ||\n      target.closest('.drag-handle') ||\n      target.classList.contains('resize-handle') ||\n      target.closest('.resize-handle') ||\n      target.classList.contains('grid-item-delete') ||\n      target.classList.contains('grid-item-control-btn')\n    ) {\n      return;\n    }\n\n    // Dispatch event to open config panel\n    const event = new CustomEvent('item-click', {\n      detail: { itemId: this.item.id, canvasId: this.item.canvasId },\n      bubbles: true,\n      composed: true,\n    });\n    this.itemRef.dispatchEvent(event);\n  }\n\n  private handleBringToFront() {\n    const canvas = gridState.canvases[this.item.canvasId];\n    const maxZ = Math.max(...canvas.items.map((i) => i.zIndex));\n    this.item.zIndex = maxZ + 1;\n    gridState.canvases = { ...gridState.canvases }; // Trigger update\n  }\n\n  private handleSendToBack() {\n    const canvas = gridState.canvases[this.item.canvasId];\n    const minZ = Math.min(...canvas.items.map((i) => i.zIndex));\n    this.item.zIndex = minZ - 1;\n    gridState.canvases = { ...gridState.canvases }; // Trigger update\n  }\n\n  private handleDelete() {\n    // Dispatch event to grid-builder-app to handle\n    const event = new CustomEvent('item-delete', {\n      detail: { itemId: this.item.id, canvasId: this.item.canvasId },\n      bubbles: true,\n      composed: true,\n    });\n    this.itemRef.dispatchEvent(event);\n  }\n}\n"],"version":3}