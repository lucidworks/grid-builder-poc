import{r as i,h as t}from"./p-CC73Dkup.js";import{c as s,g as e}from"./p-CcbD7Svb.js";import{c as n}from"./p-DZpb-Vl1.js";import"./p-CDiz7xEh.js";const r='@charset "UTF-8";.canvas-section-viewer{display:block;width:100%;margin:0;padding:0;}.canvas-section-viewer .grid-container{position:relative;width:100%;background-color:#ffffff;background-image:none !important;overflow:visible}';const h=class{constructor(t){i(this,t);this.renderVersion=0;this.calculatedHeight=400;this.updateCanvasHeight=()=>{if(!this.items||!this.currentViewport){return}this.calculatedHeight=n(this.items,this.currentViewport,this.config)};this.setupResizeObserver=()=>{if(!this.gridContainerRef||this.resizeObserver){return}this.resizeObserver=new ResizeObserver((()=>{s();this.updateCanvasHeight();this.renderVersion++}));this.resizeObserver.observe(this.gridContainerRef)}}componentDidLoad(){this.updateCanvasHeight();this.setupResizeObserver()}componentDidUpdate(){if(!this.resizeObserver&&this.gridContainerRef){this.setupResizeObserver()}}disconnectedCallback(){if(this.resizeObserver){this.resizeObserver.disconnect()}}handleItemsChange(){this.updateCanvasHeight()}handleViewportChange(){this.updateCanvasHeight()}render(){var i,s,n;const r=(s=(i=this.config)===null||i===void 0?void 0:i.canvasMinHeight)!==null&&s!==void 0?s:20;const h=e(r,this.config);return t("div",{key:"7495c19c52cea505cccd6a6832aeddd80ebdc2c9",class:"canvas-section-viewer","data-canvas-id":this.canvasId},t("div",{key:"bb581573c4d122e06d6942f450d670bb1234d578",class:"grid-container",id:this.canvasId,"data-canvas-id":this.canvasId,style:{backgroundColor:this.backgroundColor||"#ffffff",minHeight:`${h}px`,height:this.calculatedHeight>0?`${this.calculatedHeight}px`:undefined},ref:i=>this.gridContainerRef=i},(n=this.items)===null||n===void 0?void 0:n.map((i=>t("grid-item-wrapper",{key:i.id,item:i,renderVersion:this.renderVersion,config:this.config,componentRegistry:this.componentRegistry,viewerMode:true,currentViewport:this.currentViewport,canvasItems:this.items})))))}static get watchers(){return{items:["handleItemsChange"],currentViewport:["handleViewportChange"]}}};h.style=r;export{h as canvas_section_viewer};
//# sourceMappingURL=p-301294df.entry.js.map