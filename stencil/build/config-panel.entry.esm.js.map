{"version":3,"file":"config-panel.entry.esm.js","sources":["src/demo/components/config-panel/config-panel.scss?tag=config-panel","src/demo/components/config-panel/config-panel.tsx"],"sourcesContent":["/**\n * Config Panel Styles\n * ====================\n *\n * Styles for config-panel component with slide-in animation.\n */\n\n// Configuration Side Panel\nconfig-panel {\n  .config-panel {\n    position: fixed;\n    z-index: 2000;\n    top: 0;\n    right: -400px;\n    display: flex;\n    width: 400px;\n    height: 100vh;\n    flex-direction: column;\n    background: white;\n    box-shadow: -2px 0 8px rgba(0, 0, 0, 0.15);\n    transition: right 0.3s ease;\n\n    &.open {\n      right: 0;\n    }\n  }\n\n  // Panel Header\n  .config-panel-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 20px;\n    border-bottom: 1px solid #ddd;\n\n    h2 {\n      margin: 0;\n      color: #333;\n      font-size: 18px;\n    }\n  }\n\n  .config-panel-close {\n    display: flex;\n    width: 32px;\n    height: 32px;\n    align-items: center;\n    justify-content: center;\n    padding: 0;\n    border: none;\n    border-radius: 4px;\n    background: transparent;\n    color: #999;\n    cursor: pointer;\n    font-size: 24px;\n    transition: all 0.2s;\n\n    &:hover {\n      background: #f5f5f5;\n      color: #333;\n    }\n  }\n\n  // Panel Body\n  .config-panel-body {\n    flex: 1;\n    padding: 20px;\n    overflow-y: auto;\n  }\n\n  .config-section {\n    margin-bottom: 24px;\n\n    h3 {\n      margin: 0 0 16px 0;\n      color: #333;\n      font-size: 14px;\n      font-weight: 600;\n      letter-spacing: 0.5px;\n      text-transform: uppercase;\n    }\n\n    .no-config {\n      color: #999;\n      font-size: 13px;\n      font-style: italic;\n    }\n  }\n\n  .config-field {\n    margin-bottom: 20px;\n\n    label {\n      display: block;\n      margin-bottom: 8px;\n      color: #333;\n      font-size: 13px;\n      font-weight: 600;\n    }\n\n    input[type='text'],\n    input[type='number'],\n    input[type='color'],\n    select,\n    textarea {\n      width: 100%;\n      box-sizing: border-box;\n      padding: 10px 12px;\n      border: 1px solid #ddd;\n      border-radius: 4px;\n      font-size: 13px;\n      transition: border-color 0.2s;\n\n      &:focus {\n        border-color: #4a90e2;\n        outline: none;\n      }\n    }\n\n    input[type='color'] {\n      height: 40px;\n      padding: 4px;\n    }\n\n    textarea {\n      font-family: inherit;\n      resize: vertical;\n    }\n\n    &.config-field-checkbox {\n      label {\n        display: flex;\n        align-items: center;\n        cursor: pointer;\n        gap: 8px;\n\n        input[type='checkbox'] {\n          width: auto;\n          margin: 0;\n          cursor: pointer;\n        }\n      }\n    }\n\n    .field-error {\n      margin: 4px 0 0 0;\n      color: #f44;\n      font-size: 12px;\n    }\n  }\n\n  // Z-Index Controls\n  .z-index-controls {\n    display: grid;\n    gap: 8px;\n    grid-template-columns: 1fr 1fr;\n  }\n\n  .z-index-btn {\n    padding: 10px 12px;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    background: white;\n    cursor: pointer;\n    font-size: 13px;\n    font-weight: 500;\n    text-align: center;\n    transition: all 0.2s;\n\n    &:hover {\n      border-color: #4a90e2;\n      background: #f5f5f5;\n      color: #4a90e2;\n    }\n  }\n\n  // Panel Footer\n  .config-panel-footer {\n    display: flex;\n    justify-content: flex-end;\n    padding: 20px;\n    border-top: 1px solid #ddd;\n    gap: 10px;\n\n    button {\n      padding: 10px 20px;\n      border: 1px solid #ddd;\n      border-radius: 4px;\n      background: white;\n      cursor: pointer;\n      font-size: 13px;\n      font-weight: 500;\n      transition: all 0.2s;\n\n      &:hover {\n        background: #f5f5f5;\n      }\n\n      &.primary {\n        border-color: #4a90e2;\n        background: #4a90e2;\n        color: white;\n\n        &:hover {\n          border-color: #357abd;\n          background: #357abd;\n        }\n      }\n    }\n  }\n}\n","/**\n * Config Panel Component (Library Version)\n * =========================================\n *\n * Configuration panel with auto-generated forms and custom panel support.\n * This is the library version that uses ComponentDefinition for flexibility.\n *\n * ## Key Features\n *\n * **Auto-generated forms**:\n * - Reads ComponentDefinition.configSchema\n * - Generates form fields automatically (text, number, select, checkbox, color)\n * - Live preview of changes\n * - Revert on cancel\n *\n * **Custom panels**:\n * - Uses ComponentDefinition.renderConfigPanel() if provided\n * - Consumer has full control over config UI\n * - Library provides onChange, onSave, onCancel callbacks\n *\n * **Basic fields** (always available):\n * - Component name (item.name)\n * - Z-index controls (bring to front, send to back, etc.)\n *\n * @module config-panel\n */\n\nimport { Component, h, Listen, Prop, State } from '@stencil/core';\n\n// Internal imports\nimport { eventManager } from '../../../services/event-manager';\nimport { gridState } from '../../../services/state-manager';\nimport { ComponentDefinition, ConfigField } from '../../../types/component-definition';\n\n/**\n * ConfigPanel Component\n * =====================\n *\n * Library component providing configuration panel with auto-generated and custom forms.\n *\n * **Tag**: `<config-panel>`\n * **Shadow DOM**: Disabled (for consistency with other components)\n */\n@Component({\n  tag: 'config-panel',\n  styleUrl: 'config-panel.scss',\n  shadow: false,\n})\nexport class ConfigPanel {\n  /**\n   * Component registry (from parent grid-builder)\n   *\n   * **Source**: grid-builder component\n   * **Purpose**: Look up component definitions for config forms\n   */\n  @Prop() componentRegistry?: Map<string, ComponentDefinition>;\n\n  /**\n   * Panel open state\n   */\n  @State() isOpen: boolean = false;\n\n  /**\n   * Selected item ID\n   */\n  @State() selectedItemId: string | null = null;\n\n  /**\n   * Selected canvas ID\n   */\n  @State() selectedCanvasId: string | null = null;\n\n  /**\n   * Component name (editable)\n   */\n  @State() componentName: string = '';\n\n  /**\n   * Component config (editable)\n   */\n  @State() componentConfig: Record<string, any> = {};\n\n  /**\n   * Original state for cancel functionality\n   */\n  private originalState: {\n    name: string;\n    zIndex: number;\n    config: Record<string, any>;\n  } | null = null;\n\n  /**\n   * Callback for componentDeleted event (stored for unsubscribe)\n   */\n  private handleComponentDeleted = (event: { itemId: string; canvasId: string }) => {\n    console.log('üîî config-panel received componentDeleted event', {\n      eventItemId: event.itemId,\n      selectedItemId: this.selectedItemId,\n      isOpen: this.isOpen,\n      shouldClose: this.isOpen && this.selectedItemId && event.itemId === this.selectedItemId,\n    });\n\n    // Close panel if the deleted item is the currently selected one\n    if (this.isOpen && this.selectedItemId && event.itemId === this.selectedItemId) {\n      console.log('  ‚úÖ Closing panel because selected item was deleted');\n      this.closePanel();\n    } else {\n      console.log('  ‚ÑπÔ∏è Not closing panel - different item or panel already closed');\n    }\n  };\n\n  /**\n   * Listen for item-click events to open panel\n   */\n  @Listen('item-click', { target: 'document' })\n  handleItemClick(event: CustomEvent) {\n    const { itemId, canvasId } = event.detail;\n    this.openPanel(itemId, canvasId);\n  }\n\n  /**\n   * Component lifecycle: Subscribe to componentDeleted event\n   */\n  componentDidLoad() {\n    console.log('üìã config-panel componentDidLoad - subscribing to componentDeleted event');\n    // Subscribe to componentDeleted events to auto-close panel when selected item is deleted\n    eventManager.on('componentDeleted', this.handleComponentDeleted);\n    console.log('  ‚úÖ Subscribed to componentDeleted event');\n  }\n\n  /**\n   * Component lifecycle: Cleanup event subscriptions\n   */\n  disconnectedCallback() {\n    eventManager.off('componentDeleted', this.handleComponentDeleted);\n  }\n\n  /**\n   * Render component template\n   */\n  render() {\n    const panelClasses = {\n      'config-panel': true,\n      open: this.isOpen,\n    };\n\n    // Get component definition for the selected item\n    const item = this.getSelectedItem();\n    const definition = item ? this.componentRegistry?.get(item.type) : null;\n\n    return (\n      <div class={panelClasses}>\n        <div class=\"config-panel-header\">\n          <h2>Component Settings</h2>\n          <button class=\"config-panel-close\" onClick={() => this.closePanel()}>\n            √ó\n          </button>\n        </div>\n\n        <div class=\"config-panel-body\">\n          {/* Component Name Field */}\n          <div class=\"config-field\">\n            <label htmlFor=\"componentName\">Component Name</label>\n            <input\n              type=\"text\"\n              id=\"componentName\"\n              value={this.componentName}\n              onInput={(e) => this.handleNameInput(e)}\n              placeholder=\"Enter component name\"\n            />\n          </div>\n\n          {/* Custom Config Panel or Auto-Generated Form */}\n          {definition && this.renderConfigFields(definition)}\n\n          {/* Z-Index Controls */}\n          <div class=\"config-field\">\n            <label>Layer Order</label>\n            <div class=\"z-index-controls\">\n              <button class=\"z-index-btn\" onClick={() => this.bringToFront()} title=\"Bring to Front\">\n                ‚¨ÜÔ∏è To Front\n              </button>\n              <button class=\"z-index-btn\" onClick={() => this.bringForward()} title=\"Bring Forward\">\n                ‚Üë Forward\n              </button>\n              <button class=\"z-index-btn\" onClick={() => this.sendBackward()} title=\"Send Backward\">\n                ‚Üì Backward\n              </button>\n              <button class=\"z-index-btn\" onClick={() => this.sendToBack()} title=\"Send to Back\">\n                ‚¨áÔ∏è To Back\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"config-panel-footer\">\n          <button onClick={() => this.closePanel()}>Cancel</button>\n          <button class=\"primary\" onClick={() => this.saveConfig()}>\n            Save\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  /**\n   * Render config fields (custom or auto-generated)\n   */\n  private renderConfigFields(definition: ComponentDefinition) {\n    // If component provides custom config panel, use it\n    if (definition.renderConfigPanel) {\n      return definition.renderConfigPanel({\n        config: this.componentConfig,\n        onChange: this.handleConfigChange,\n        onSave: this.saveConfig,\n        onCancel: this.closePanel,\n      });\n    }\n\n    // Otherwise, auto-generate form from configSchema\n    if (definition.configSchema && definition.configSchema.length > 0) {\n      return (\n        <div class=\"config-section\">\n          <h3>Component Configuration</h3>\n          {definition.configSchema.map((field) => this.renderConfigField(field))}\n        </div>\n      );\n    }\n\n    // No config available\n    return (\n      <div class=\"config-section\">\n        <p class=\"no-config\">No configuration options available for this component.</p>\n      </div>\n    );\n  }\n\n  /**\n   * Render a single config field from schema\n   */\n  private renderConfigField(field: ConfigField) {\n    const value = this.componentConfig[field.name] ?? field.defaultValue ?? '';\n\n    switch (field.type) {\n      case 'text':\n        return (\n          <div class=\"config-field\" key={field.name}>\n            <label htmlFor={field.name}>{field.label}</label>\n            <input\n              type=\"text\"\n              id={field.name}\n              value={value}\n              onInput={(e) => this.handleConfigChange(field.name, (e.target as HTMLInputElement).value)}\n              placeholder={field.placeholder}\n            />\n          </div>\n        );\n\n      case 'number':\n        return (\n          <div class=\"config-field\" key={field.name}>\n            <label htmlFor={field.name}>{field.label}</label>\n            <input\n              type=\"number\"\n              id={field.name}\n              value={value}\n              onInput={(e) => this.handleConfigChange(field.name, Number((e.target as HTMLInputElement).value))}\n              min={field.min}\n              max={field.max}\n              step={field.step}\n            />\n          </div>\n        );\n\n      case 'select':\n        return (\n          <div class=\"config-field\" key={field.name}>\n            <label htmlFor={field.name}>{field.label}</label>\n            <select\n              id={field.name}\n              onChange={(e) => this.handleConfigChange(field.name, (e.target as HTMLSelectElement).value)}\n            >\n              {field.options?.map((option) => {\n                // Handle both string and object options\n                const optionValue = typeof option === 'string' ? option : option.value;\n                const optionLabel = typeof option === 'string' ? option : option.label;\n                return (\n                  <option key={optionValue} value={optionValue} selected={value === optionValue}>\n                    {optionLabel}\n                  </option>\n                );\n              })}\n            </select>\n          </div>\n        );\n\n      case 'checkbox':\n        return (\n          <div class=\"config-field config-field-checkbox\" key={field.name}>\n            <label htmlFor={field.name}>\n              <input\n                type=\"checkbox\"\n                id={field.name}\n                checked={!!value}\n                onChange={(e) => this.handleConfigChange(field.name, (e.target as HTMLInputElement).checked)}\n              />\n              {field.label}\n            </label>\n          </div>\n        );\n\n      case 'color':\n        return (\n          <div class=\"config-field\" key={field.name}>\n            <label htmlFor={field.name}>{field.label}</label>\n            <input\n              type=\"color\"\n              id={field.name}\n              value={value}\n              onInput={(e) => this.handleConfigChange(field.name, (e.target as HTMLInputElement).value)}\n            />\n          </div>\n        );\n\n      case 'textarea':\n        return (\n          <div class=\"config-field\" key={field.name}>\n            <label htmlFor={field.name}>{field.label}</label>\n            <textarea\n              id={field.name}\n              value={value}\n              onInput={(e) => this.handleConfigChange(field.name, (e.target as HTMLTextAreaElement).value)}\n              placeholder={field.placeholder}\n              rows={field.rows || 3}\n            />\n          </div>\n        );\n\n      default:\n        return (\n          <div class=\"config-field\" key={field.name}>\n            <label>{field.label}</label>\n            <p class=\"field-error\">Unknown field type: {field.type}</p>\n          </div>\n        );\n    }\n  }\n\n  /**\n   * Get selected item from state\n   */\n  private getSelectedItem() {\n    if (!this.selectedItemId || !this.selectedCanvasId) {\n      return null;\n    }\n\n    const canvas = gridState.canvases[this.selectedCanvasId];\n    return canvas?.items.find((i) => i.id === this.selectedItemId);\n  }\n\n  /**\n   * Open config panel for item\n   */\n  private openPanel = (itemId: string, canvasId: string) => {\n    this.selectedItemId = itemId;\n    this.selectedCanvasId = canvasId;\n\n    // Get item from state\n    const item = this.getSelectedItem();\n    if (!item) {\n      return;\n    }\n\n    // Get component definition\n    const definition = this.componentRegistry?.get(item.type);\n\n    // Save original state for cancel functionality\n    this.originalState = {\n      name: item.name || definition?.name || item.type,\n      zIndex: item.zIndex,\n      config: item.config ? { ...item.config } : {},\n    };\n\n    // Populate form\n    this.componentName = this.originalState.name;\n    this.componentConfig = { ...this.originalState.config };\n\n    // Update selection in state\n    gridState.selectedItemId = itemId;\n    gridState.selectedCanvasId = canvasId;\n\n    // Open panel\n    this.isOpen = true;\n  };\n\n  /**\n   * Close config panel (revert changes)\n   */\n  private closePanel = () => {\n    // Revert changes on cancel\n    if (this.selectedItemId && this.selectedCanvasId && this.originalState) {\n      const canvas = gridState.canvases[this.selectedCanvasId];\n      const itemIndex = canvas?.items.findIndex((i) => i.id === this.selectedItemId);\n      if (itemIndex !== undefined && itemIndex !== -1) {\n        canvas.items[itemIndex] = {\n          ...canvas.items[itemIndex],\n          name: this.originalState.name,\n          zIndex: this.originalState.zIndex,\n          config: this.originalState.config,\n        };\n        gridState.canvases = { ...gridState.canvases };\n      }\n    }\n\n    this.isOpen = false;\n    this.selectedItemId = null;\n    this.selectedCanvasId = null;\n    this.componentName = '';\n    this.componentConfig = {};\n    this.originalState = null;\n  };\n\n  /**\n   * Save config changes\n   */\n  private saveConfig = () => {\n    // Changes are already applied live, so just close without reverting\n    this.isOpen = false;\n    this.selectedItemId = null;\n    this.selectedCanvasId = null;\n    this.componentName = '';\n    this.componentConfig = {};\n    this.originalState = null;\n  };\n\n  /**\n   * Handle component name input\n   */\n  private handleNameInput = (e: Event) => {\n    const target = e.target as HTMLInputElement;\n    this.componentName = target.value;\n\n    // Apply changes immediately (live preview)\n    if (this.selectedItemId && this.selectedCanvasId) {\n      const canvas = gridState.canvases[this.selectedCanvasId];\n      const itemIndex = canvas?.items.findIndex((i) => i.id === this.selectedItemId);\n      if (itemIndex !== undefined && itemIndex !== -1) {\n        canvas.items[itemIndex] = { ...canvas.items[itemIndex], name: this.componentName };\n        gridState.canvases = { ...gridState.canvases };\n      }\n    }\n  };\n\n  /**\n   * Handle config field change\n   */\n  private handleConfigChange = (fieldName: string, value: any) => {\n    // Update local config state\n    this.componentConfig = { ...this.componentConfig, [fieldName]: value };\n\n    // Apply changes immediately (live preview)\n    if (this.selectedItemId && this.selectedCanvasId) {\n      const canvas = gridState.canvases[this.selectedCanvasId];\n      const itemIndex = canvas?.items.findIndex((i) => i.id === this.selectedItemId);\n      if (itemIndex !== undefined && itemIndex !== -1) {\n        canvas.items[itemIndex] = {\n          ...canvas.items[itemIndex],\n          config: this.componentConfig,\n        };\n        gridState.canvases = { ...gridState.canvases };\n      }\n    }\n  };\n\n  /**\n   * Z-index control methods\n   */\n  private bringToFront = () => {\n    if (!this.selectedItemId || !this.selectedCanvasId) return;\n    const canvas = gridState.canvases[this.selectedCanvasId];\n    const itemIndex = canvas?.items.findIndex((i) => i.id === this.selectedItemId);\n    if (itemIndex === undefined || itemIndex === -1) return;\n\n    const newZIndex = ++canvas.zIndexCounter;\n    canvas.items[itemIndex] = { ...canvas.items[itemIndex], zIndex: newZIndex };\n    gridState.canvases = { ...gridState.canvases };\n  };\n\n  private bringForward = () => {\n    if (!this.selectedItemId || !this.selectedCanvasId) return;\n    const canvas = gridState.canvases[this.selectedCanvasId];\n    const itemIndex = canvas?.items.findIndex((i) => i.id === this.selectedItemId);\n    if (itemIndex === undefined || itemIndex === -1) return;\n\n    const item = canvas.items[itemIndex];\n    const itemsAbove = canvas.items.filter((i) => i.zIndex > item.zIndex);\n    if (itemsAbove.length > 0) {\n      const nextZIndex = Math.min(...itemsAbove.map((i) => i.zIndex));\n      const itemAboveIndex = canvas.items.findIndex((i) => i.zIndex === nextZIndex);\n      if (itemAboveIndex !== -1) {\n        const temp = item.zIndex;\n        canvas.items[itemIndex] = { ...item, zIndex: nextZIndex };\n        canvas.items[itemAboveIndex] = { ...canvas.items[itemAboveIndex], zIndex: temp };\n        gridState.canvases = { ...gridState.canvases };\n      }\n    }\n  };\n\n  private sendBackward = () => {\n    if (!this.selectedItemId || !this.selectedCanvasId) return;\n    const canvas = gridState.canvases[this.selectedCanvasId];\n    const itemIndex = canvas?.items.findIndex((i) => i.id === this.selectedItemId);\n    if (itemIndex === undefined || itemIndex === -1) return;\n\n    const item = canvas.items[itemIndex];\n    const itemsBelow = canvas.items.filter((i) => i.zIndex < item.zIndex);\n    if (itemsBelow.length > 0) {\n      const prevZIndex = Math.max(...itemsBelow.map((i) => i.zIndex));\n      const itemBelowIndex = canvas.items.findIndex((i) => i.zIndex === prevZIndex);\n      if (itemBelowIndex !== -1) {\n        const temp = item.zIndex;\n        canvas.items[itemIndex] = { ...item, zIndex: prevZIndex };\n        canvas.items[itemBelowIndex] = { ...canvas.items[itemBelowIndex], zIndex: temp };\n        gridState.canvases = { ...gridState.canvases };\n      }\n    }\n  };\n\n  private sendToBack = () => {\n    if (!this.selectedItemId || !this.selectedCanvasId) return;\n    const canvas = gridState.canvases[this.selectedCanvasId];\n    const itemIndex = canvas?.items.findIndex((i) => i.id === this.selectedItemId);\n    if (itemIndex === undefined || itemIndex === -1) return;\n\n    const minZIndex = Math.min(...canvas.items.map((i) => i.zIndex));\n    const newZIndex = Math.max(1, minZIndex - 1);\n\n    if (minZIndex <= 1) {\n      const sortedItems = [...canvas.items].sort((a, b) => a.zIndex - b.zIndex);\n      canvas.items = sortedItems.map((itm, index) => ({\n        ...itm,\n        zIndex: itm.id === this.selectedItemId ? 1 : index + 2,\n      }));\n    } else {\n      canvas.items[itemIndex] = { ...canvas.items[itemIndex], zIndex: newZIndex };\n    }\n\n    gridState.canvases = { ...gridState.canvases };\n  };\n}\n"],"names":["gridState"],"mappings":"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"}