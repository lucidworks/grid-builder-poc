{"file":"state-manager-6c3d6100.js","mappings":"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","names":[],"sources":["src/services/state-manager.ts"],"sourcesContent":["import { createStore } from '@stencil/store';\n\n/**\n * Grid Item Interface\n */\nexport interface GridItem {\n  id: string;\n  canvasId: string;\n  type: string;\n  name: string;\n  layouts: {\n    desktop: {\n      x: number;\n      y: number;\n      width: number;\n      height: number;\n    };\n    mobile: {\n      x: number | null;\n      y: number | null;\n      width: number | null;\n      height: number | null;\n      customized: boolean;\n    };\n  };\n  zIndex: number;\n}\n\n/**\n * Canvas Interface\n */\nexport interface Canvas {\n  items: GridItem[];\n  zIndexCounter: number;\n  backgroundColor: string;\n}\n\n/**\n * Grid State Interface\n */\nexport interface GridState {\n  canvases: Record<string, Canvas>;\n  selectedItemId: string | null;\n  selectedCanvasId: string | null;\n  currentViewport: 'desktop' | 'mobile';\n  showGrid: boolean;\n}\n\n/**\n * Initial State with prepopulated demo items\n */\nconst initialState: GridState = {\n  canvases: {\n    canvas1: {\n      items: [\n        // Hero section demo items\n        {\n          id: 'item-1',\n          canvasId: 'canvas1',\n          type: 'header',\n          name: 'Header',\n          layouts: {\n            desktop: { x: 2, y: 2, width: 20, height: 6 },\n            mobile: { x: null, y: null, width: null, height: null, customized: false },\n          },\n          zIndex: 1,\n        },\n        {\n          id: 'item-2',\n          canvasId: 'canvas1',\n          type: 'text',\n          name: 'Text',\n          layouts: {\n            desktop: { x: 2, y: 9, width: 20, height: 5 },\n            mobile: { x: null, y: null, width: null, height: null, customized: false },\n          },\n          zIndex: 2,\n        },\n        {\n          id: 'item-3',\n          canvasId: 'canvas1',\n          type: 'button',\n          name: 'Button',\n          layouts: {\n            desktop: { x: 2, y: 15, width: 9, height: 4 },\n            mobile: { x: null, y: null, width: null, height: null, customized: false },\n          },\n          zIndex: 3,\n        },\n        {\n          id: 'item-4',\n          canvasId: 'canvas1',\n          type: 'image',\n          name: 'Image',\n          layouts: {\n            desktop: { x: 23, y: 2, width: 15, height: 12 },\n            mobile: { x: null, y: null, width: null, height: null, customized: false },\n          },\n          zIndex: 4,\n        },\n      ],\n      zIndexCounter: 5,\n      backgroundColor: '#ffffff',\n    },\n    canvas2: {\n      items: [\n        // Content section demo items\n        {\n          id: 'item-5',\n          canvasId: 'canvas2',\n          type: 'header',\n          name: 'Header',\n          layouts: {\n            desktop: { x: 2, y: 2, width: 18, height: 4 },\n            mobile: { x: null, y: null, width: null, height: null, customized: false },\n          },\n          zIndex: 1,\n        },\n        {\n          id: 'item-6',\n          canvasId: 'canvas2',\n          type: 'text',\n          name: 'Text',\n          layouts: {\n            desktop: { x: 2, y: 7, width: 18, height: 8 },\n            mobile: { x: null, y: null, width: null, height: null, customized: false },\n          },\n          zIndex: 2,\n        },\n        {\n          id: 'item-7',\n          canvasId: 'canvas2',\n          type: 'video',\n          name: 'Video',\n          layouts: {\n            desktop: { x: 21, y: 2, width: 17, height: 13 },\n            mobile: { x: null, y: null, width: null, height: null, customized: false },\n          },\n          zIndex: 3,\n        },\n      ],\n      zIndexCounter: 4,\n      backgroundColor: '#f5f5f5',\n    },\n    canvas3: {\n      items: [\n        // Footer section demo items\n        {\n          id: 'item-8',\n          canvasId: 'canvas3',\n          type: 'text',\n          name: 'Text',\n          layouts: {\n            desktop: { x: 2, y: 2, width: 15, height: 5 },\n            mobile: { x: null, y: null, width: null, height: null, customized: false },\n          },\n          zIndex: 1,\n        },\n        {\n          id: 'item-9',\n          canvasId: 'canvas3',\n          type: 'button',\n          name: 'Button',\n          layouts: {\n            desktop: { x: 18, y: 2, width: 8, height: 4 },\n            mobile: { x: null, y: null, width: null, height: null, customized: false },\n          },\n          zIndex: 2,\n        },\n        {\n          id: 'item-10',\n          canvasId: 'canvas3',\n          type: 'button',\n          name: 'Button',\n          layouts: {\n            desktop: { x: 27, y: 2, width: 8, height: 4 },\n            mobile: { x: null, y: null, width: null, height: null, customized: false },\n          },\n          zIndex: 3,\n        },\n      ],\n      zIndexCounter: 4,\n      backgroundColor: '#ffffff',\n    },\n  },\n  selectedItemId: null,\n  selectedCanvasId: null,\n  currentViewport: 'desktop',\n  showGrid: true,\n};\n\n/**\n * Global Grid State Store\n */\nconst { state, onChange, dispose } = createStore<GridState>(initialState);\n\n// Wrap reset to also reset the ID counter and restore initial state\nexport function reset() {\n  itemIdCounter = 10; // Reset to 10 to account for prepopulated items\n\n  // Restore initial state with prepopulated items\n  state.canvases = JSON.parse(JSON.stringify(initialState.canvases));\n  state.selectedItemId = null;\n  state.selectedCanvasId = null;\n  state.currentViewport = 'desktop';\n  state.showGrid = true;\n}\n\nexport { state as gridState, onChange, dispose };\n\n/**\n * Helper Functions\n */\n\n/**\n * Add item to canvas\n */\nexport function addItemToCanvas(canvasId: string, item: GridItem) {\n  const canvas = state.canvases[canvasId];\n  if (!canvas) {\n    return;\n  }\n\n  canvas.items.push(item);\n  state.canvases = { ...state.canvases }; // Trigger update\n}\n\n/**\n * Remove item from canvas\n */\nexport function removeItemFromCanvas(canvasId: string, itemId: string) {\n  const canvas = state.canvases[canvasId];\n  if (!canvas) {\n    return;\n  }\n\n  canvas.items = canvas.items.filter((item) => item.id !== itemId);\n  state.canvases = { ...state.canvases }; // Trigger update\n}\n\n/**\n * Update item in canvas\n */\nexport function updateItem(canvasId: string, itemId: string, updates: Partial<GridItem>) {\n  const canvas = state.canvases[canvasId];\n  if (!canvas) {\n    return;\n  }\n\n  const item = canvas.items.find((i) => i.id === itemId);\n  if (!item) {\n    return;\n  }\n\n  Object.assign(item, updates);\n  state.canvases = { ...state.canvases }; // Trigger update\n}\n\n/**\n * Get item by ID\n */\nexport function getItem(canvasId: string, itemId: string): GridItem | null {\n  const canvas = state.canvases[canvasId];\n  if (!canvas) {\n    return null;\n  }\n\n  return canvas.items.find((i) => i.id === itemId) || null;\n}\n\n/**\n * Move item to different canvas\n */\nexport function moveItemToCanvas(fromCanvasId: string, toCanvasId: string, itemId: string) {\n  const fromCanvas = state.canvases[fromCanvasId];\n  const toCanvas = state.canvases[toCanvasId];\n\n  if (!fromCanvas || !toCanvas) {\n    return;\n  }\n\n  const item = fromCanvas.items.find((i) => i.id === itemId);\n  if (!item) {\n    return;\n  }\n\n  // Remove from old canvas\n  fromCanvas.items = fromCanvas.items.filter((i) => i.id !== itemId);\n\n  // Update item's canvasId\n  item.canvasId = toCanvasId;\n\n  // Add to new canvas\n  toCanvas.items.push(item);\n\n  state.canvases = { ...state.canvases }; // Trigger update\n}\n\n/**\n * Generate unique item ID\n */\nlet itemIdCounter = 10; // Start at 10 to account for prepopulated items (item-1 through item-10)\nexport function generateItemId(): string {\n  return `item-${++itemIdCounter}`;\n}\n\n/**\n * Select item\n */\nexport function selectItem(itemId: string, canvasId: string) {\n  state.selectedItemId = itemId;\n  state.selectedCanvasId = canvasId;\n}\n\n/**\n * Deselect item\n */\nexport function deselectItem() {\n  state.selectedItemId = null;\n  state.selectedCanvasId = null;\n}\n"],"version":3}