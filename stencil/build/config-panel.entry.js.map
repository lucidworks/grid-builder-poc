{"file":"config-panel.entry.esm.js","mappings":"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","names":["gridState"],"sources":["src/components/config-panel/config-panel.css?tag=config-panel","src/components/config-panel/config-panel.tsx"],"sourcesContent":["/* Configuration Side Panel */\n.config-panel {\n  position: fixed;\n  z-index: 10000;\n  top: 0;\n  right: -400px;\n  display: flex;\n  width: 400px;\n  height: 100vh;\n  flex-direction: column;\n  background: white;\n  box-shadow: -2px 0 8px rgba(0, 0, 0, 15%);\n  transition: right 0.3s ease;\n}\n\n.config-panel.open {\n  right: 0;\n}\n\n/* Panel Header */\n.config-panel-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 20px;\n  border-bottom: 1px solid #ddd;\n}\n\n.config-panel-header h2 {\n  margin: 0;\n  color: #333;\n  font-size: 18px;\n}\n\n.config-panel-close {\n  display: flex;\n  width: 32px;\n  height: 32px;\n  align-items: center;\n  justify-content: center;\n  padding: 0;\n  border: none;\n  border-radius: 4px;\n  background: transparent;\n  color: #666;\n  cursor: pointer;\n  font-size: 24px;\n  transition: all 0.2s;\n}\n\n.config-panel-close:hover {\n  background: #f5f5f5;\n  color: #333;\n}\n\n/* Panel Body */\n.config-panel-body {\n  flex: 1;\n  padding: 20px;\n  overflow-y: auto;\n}\n\n.config-field {\n  margin-bottom: 20px;\n}\n\n.config-field label {\n  display: block;\n  margin-bottom: 8px;\n  color: #333;\n  font-size: 14px;\n  font-weight: 600;\n}\n\n.config-field input {\n  width: 100%;\n  box-sizing: border-box;\n  padding: 10px 12px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  font-size: 14px;\n  transition: border-color 0.2s;\n}\n\n.config-field input:focus {\n  border-color: #4a90e2;\n  outline: none;\n}\n\n/* Z-Index Controls */\n.z-index-controls {\n  display: grid;\n  gap: 8px;\n  grid-template-columns: 1fr 1fr;\n}\n\n.z-index-btn {\n  padding: 10px 12px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  background: white;\n  cursor: pointer;\n  font-size: 13px;\n  font-weight: 500;\n  text-align: center;\n  transition: all 0.2s;\n}\n\n.z-index-btn:hover {\n  border-color: #4a90e2;\n  background: #f5f5f5;\n  color: #4a90e2;\n}\n\n/* Panel Footer */\n.config-panel-footer {\n  display: flex;\n  justify-content: flex-end;\n  padding: 20px;\n  border-top: 1px solid #ddd;\n  gap: 10px;\n}\n\n.config-panel-footer button {\n  padding: 10px 20px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  background: white;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.2s;\n}\n\n.config-panel-footer button:hover {\n  background: #f5f5f5;\n}\n\n.config-panel-footer button.primary {\n  border-color: #4a90e2;\n  background: #4a90e2;\n  color: white;\n}\n\n.config-panel-footer button.primary:hover {\n  border-color: #357abd;\n  background: #357abd;\n}\n","import { Component, h, Listen, State } from '@stencil/core';\nimport { componentTemplates } from '../../data/component-templates';\nimport { gridState } from '../../services/state-manager';\n\n@Component({\n  tag: 'config-panel',\n  styleUrl: 'config-panel.css',\n  shadow: false,\n})\nexport class ConfigPanel {\n  @State() isOpen: boolean = false;\n  @State() selectedItemId: string | null = null;\n  @State() selectedCanvasId: string | null = null;\n  @State() componentName: string = '';\n\n  // Store original state for cancel functionality\n  private originalState: { name: string; zIndex: number } | null = null;\n\n  @Listen('item-click', { target: 'document' })\n  handleItemClick(event: CustomEvent) {\n    const { itemId, canvasId } = event.detail;\n    this.openPanel(itemId, canvasId);\n  }\n\n  render() {\n    const panelClasses = {\n      'config-panel': true,\n      open: this.isOpen,\n    };\n\n    return (\n      <div class={panelClasses}>\n        <div class=\"config-panel-header\">\n          <h2>Component Settings</h2>\n          <button class=\"config-panel-close\" onClick={() => this.closePanel()}>\n            ×\n          </button>\n        </div>\n\n        <div class=\"config-panel-body\">\n          <div class=\"config-field\">\n            <label htmlFor=\"componentName\">Component Name</label>\n            <input\n              type=\"text\"\n              id=\"componentName\"\n              value={this.componentName}\n              onInput={(e) => this.handleNameInput(e)}\n              placeholder=\"Enter component name\"\n            />\n          </div>\n\n          <div class=\"config-field\">\n            <label>Layer Order</label>\n            <div class=\"z-index-controls\">\n              <button class=\"z-index-btn\" onClick={() => this.bringToFront()} title=\"Bring to Front\">\n                ⬆️ To Front\n              </button>\n              <button class=\"z-index-btn\" onClick={() => this.bringForward()} title=\"Bring Forward\">\n                ↑ Forward\n              </button>\n              <button class=\"z-index-btn\" onClick={() => this.sendBackward()} title=\"Send Backward\">\n                ↓ Backward\n              </button>\n              <button class=\"z-index-btn\" onClick={() => this.sendToBack()} title=\"Send to Back\">\n                ⬇️ To Back\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"config-panel-footer\">\n          <button onClick={() => this.closePanel()}>Cancel</button>\n          <button class=\"primary\" onClick={() => this.saveConfig()}>\n            Save\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  private openPanel(itemId: string, canvasId: string) {\n    this.selectedItemId = itemId;\n    this.selectedCanvasId = canvasId;\n\n    // Get item from state\n    const canvas = gridState.canvases[canvasId];\n    const item = canvas?.items.find((i) => i.id === itemId);\n    if (!item) {\n      return;\n    }\n\n    // Save original state for cancel functionality\n    const template = componentTemplates[item.type];\n    this.originalState = {\n      name: item.name || template.title,\n      zIndex: item.zIndex,\n    };\n\n    // Populate form\n    this.componentName = this.originalState.name;\n\n    // Update selection in state\n    gridState.selectedItemId = itemId;\n    gridState.selectedCanvasId = canvasId;\n\n    // Open panel\n    this.isOpen = true;\n  }\n\n  private closePanel() {\n    // Revert changes on cancel\n    if (this.selectedItemId && this.selectedCanvasId && this.originalState) {\n      const canvas = gridState.canvases[this.selectedCanvasId];\n      const itemIndex = canvas?.items.findIndex((i) => i.id === this.selectedItemId);\n      if (itemIndex !== undefined && itemIndex !== -1) {\n        // Create new item reference to restore original state\n        canvas.items[itemIndex] = {\n          ...canvas.items[itemIndex],\n          name: this.originalState.name,\n          zIndex: this.originalState.zIndex,\n        };\n        gridState.canvases = { ...gridState.canvases }; // Trigger update\n      }\n    }\n\n    this.isOpen = false;\n\n    // Clear selection\n    gridState.selectedItemId = null;\n    gridState.selectedCanvasId = null;\n\n    // Clear component state\n    this.selectedItemId = null;\n    this.selectedCanvasId = null;\n    this.componentName = '';\n    this.originalState = null;\n  }\n\n  private saveConfig() {\n    // Changes are already applied live, so just close without reverting\n    this.isOpen = false;\n\n    // Clear selection\n    gridState.selectedItemId = null;\n    gridState.selectedCanvasId = null;\n\n    // Clear component state\n    this.selectedItemId = null;\n    this.selectedCanvasId = null;\n    this.componentName = '';\n    this.originalState = null;\n  }\n\n  private bringToFront() {\n    if (!this.selectedItemId || !this.selectedCanvasId) {\n      return;\n    }\n\n    const canvas = gridState.canvases[this.selectedCanvasId];\n    const itemIndex = canvas?.items.findIndex((i) => i.id === this.selectedItemId);\n    if (itemIndex === undefined || itemIndex === -1) {\n      return;\n    }\n\n    // Increment canvas z-index counter and assign to item\n    const newZIndex = ++canvas.zIndexCounter;\n    canvas.items[itemIndex] = { ...canvas.items[itemIndex], zIndex: newZIndex };\n    gridState.canvases = { ...gridState.canvases }; // Trigger update\n  }\n\n  private bringForward() {\n    if (!this.selectedItemId || !this.selectedCanvasId) {\n      return;\n    }\n\n    const canvas = gridState.canvases[this.selectedCanvasId];\n    const itemIndex = canvas?.items.findIndex((i) => i.id === this.selectedItemId);\n    if (itemIndex === undefined || itemIndex === -1) {\n      return;\n    }\n\n    const item = canvas.items[itemIndex];\n    // Find items with z-index greater than current\n    const itemsAbove = canvas.items.filter((i) => i.zIndex > item.zIndex);\n    if (itemsAbove.length > 0) {\n      // Get the lowest z-index above this item\n      const nextZIndex = Math.min(...itemsAbove.map((i) => i.zIndex));\n      // Swap z-indexes\n      const itemAboveIndex = canvas.items.findIndex((i) => i.zIndex === nextZIndex);\n      if (itemAboveIndex !== -1) {\n        const temp = item.zIndex;\n        canvas.items[itemIndex] = { ...item, zIndex: nextZIndex };\n        canvas.items[itemAboveIndex] = { ...canvas.items[itemAboveIndex], zIndex: temp };\n        gridState.canvases = { ...gridState.canvases }; // Trigger update\n      }\n    }\n  }\n\n  private sendBackward() {\n    if (!this.selectedItemId || !this.selectedCanvasId) {\n      return;\n    }\n\n    const canvas = gridState.canvases[this.selectedCanvasId];\n    const itemIndex = canvas?.items.findIndex((i) => i.id === this.selectedItemId);\n    if (itemIndex === undefined || itemIndex === -1) {\n      return;\n    }\n\n    const item = canvas.items[itemIndex];\n    // Find items with z-index less than current\n    const itemsBelow = canvas.items.filter((i) => i.zIndex < item.zIndex);\n    if (itemsBelow.length > 0) {\n      // Get the highest z-index below this item\n      const prevZIndex = Math.max(...itemsBelow.map((i) => i.zIndex));\n      // Swap z-indexes\n      const itemBelowIndex = canvas.items.findIndex((i) => i.zIndex === prevZIndex);\n      if (itemBelowIndex !== -1) {\n        const temp = item.zIndex;\n        canvas.items[itemIndex] = { ...item, zIndex: prevZIndex };\n        canvas.items[itemBelowIndex] = { ...canvas.items[itemBelowIndex], zIndex: temp };\n        gridState.canvases = { ...gridState.canvases }; // Trigger update\n      }\n    }\n  }\n\n  private sendToBack() {\n    if (!this.selectedItemId || !this.selectedCanvasId) {\n      return;\n    }\n\n    const canvas = gridState.canvases[this.selectedCanvasId];\n    const itemIndex = canvas?.items.findIndex((i) => i.id === this.selectedItemId);\n    if (itemIndex === undefined || itemIndex === -1) {\n      return;\n    }\n\n    // Find the lowest z-index\n    const minZIndex = Math.min(...canvas.items.map((i) => i.zIndex));\n    const newZIndex = Math.max(1, minZIndex - 1);\n\n    // If the item is already at the back, reorder all z-indexes\n    if (minZIndex <= 1) {\n      // Sort items by current z-index\n      const sortedItems = [...canvas.items].sort((a, b) => a.zIndex - b.zIndex);\n\n      // Reassign z-indexes starting from 1, with this item first\n      canvas.items = sortedItems.map((itm, index) => ({\n        ...itm,\n        zIndex: itm.id === this.selectedItemId ? 1 : index + 2,\n      }));\n    } else {\n      canvas.items[itemIndex] = { ...canvas.items[itemIndex], zIndex: newZIndex };\n    }\n\n    gridState.canvases = { ...gridState.canvases }; // Trigger update\n  }\n\n  private handleNameInput(e: Event) {\n    const target = e.target as HTMLInputElement;\n    this.componentName = target.value;\n\n    // Apply changes immediately (live preview)\n    if (this.selectedItemId && this.selectedCanvasId) {\n      const canvas = gridState.canvases[this.selectedCanvasId];\n      const itemIndex = canvas?.items.findIndex((i) => i.id === this.selectedItemId);\n      if (itemIndex !== undefined && itemIndex !== -1) {\n        // Create new item reference for Stencil to detect change\n        canvas.items[itemIndex] = { ...canvas.items[itemIndex], name: this.componentName };\n        gridState.canvases = { ...gridState.canvases }; // Trigger update\n      }\n    }\n  }\n}\n"],"version":3}