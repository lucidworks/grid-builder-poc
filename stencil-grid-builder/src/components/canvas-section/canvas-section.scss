/**
 * Canvas Section Styles
 * ======================
 *
 * Styles for canvas-section component providing grid background and container.
 */

/* Canvas Section Container - Flush sections with title tab on right */
.canvas-section {
  position: relative;
  display: flex;
  width: 100%;
  margin: 0; /* Flush sections - no gaps */
  padding: 0; /* Flush sections - no gaps */
  flex-direction: column;
}

/* Grid Container */
.grid-container {
  position: relative;
  width: 100%;
  /* min-height set dynamically via inline style (grid-based) */
  background-image: linear-gradient(rgba(0, 0, 0, 5%) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0, 0, 0, 5%) 1px, transparent 1px);
  /* background-size set dynamically via inline style (config-based) */
  transition: background-color 0.2s;
}

/* Hide grid when toggle disabled */
.grid-container.hide-grid {
  background-image: none;
}

/* Active canvas highlighting */
.grid-container.active {
  outline: 2px solid var(--primary-color, #007bff);
  outline-offset: -2px;
  box-shadow: 0 0 0 1px rgba(0, 123, 255, 0.3);
}

/* Drop target highlighting (when dragging over canvas) */
/* Only show drop target styling if canvas is not already active */
.grid-container.drop-target:not(.active) {
  outline: 3px dashed var(--primary-color, #007bff);
  outline-offset: -3px;
  box-shadow:
    0 0 0 3px color-mix(in srgb, var(--primary-color) 25%, transparent),
    inset 0 0 30px color-mix(in srgb, var(--primary-color) 15%, transparent);
  background-color: color-mix(in srgb, var(--primary-color) 8%, transparent);
}

/* Canvas title styling - consumer can override */
.canvas-title {
  opacity: 0.3;
  transition: opacity 0.2s ease;
}

/* Undim canvas title when canvas is active */
/* Targets .canvas-header that precedes an active canvas-section */
.canvas-header:has(+ canvas-section .grid-container.active) .canvas-title {
  opacity: 1;
}

/* ========================================
 * Click-to-Add Visual Feedback Animations
 * ========================================
 * Animations for click-to-add feature providing visual feedback
 * when users click palette items to add components.
 */

/* Canvas Highlight Animation (Pulse on Border) */
@keyframes canvas-highlight-pulse {
  0%,
  100% {
    box-shadow: 0 0 0 0 var(--primary-color, #f59e0b);
    opacity: 1;
  }
  50% {
    box-shadow: 0 0 0 4px var(--primary-color, #f59e0b);
    opacity: 0.7;
  }
}

.canvas-highlight {
  animation: canvas-highlight-pulse 600ms ease-out;
}

/* Position Indicator (Ghost Outline) */
@keyframes position-indicator-fade {
  0% {
    opacity: 0.3;
  }
  70% {
    opacity: 0.3;
  }
  100% {
    opacity: 0;
  }
}

.position-indicator {
  position: absolute;
  border: 2px dashed var(--primary-color, #007bff);
  background: var(--primary-color, #007bff);
  opacity: 0.3;
  pointer-events: none;
  z-index: 9999;
  animation: position-indicator-fade 800ms ease-out forwards;
}
